!function(){const e={version:"@VERSION_PLACEHOLDER@",getInstance(e){if("undefined"==typeof window)return null;switch(e){case"toast":return window.toast||null;case"comments":return window.comments||null;case"imageZoom":return window.imageZoom||null;default:return console.warn(`Unknown module: ${e}. Available: toast, comments, StandardLab, imageZoom`),null}},getInstances:()=>"undefined"==typeof window?{toast:null,comments:null,StandardLab:null,imageZoom:null}:{toast:window.toast||null,comments:window.comments||null,StandardLab:window.StandardLab||null,imageZoom:window.imageZoom||null},detectFramework(){if("undefined"==typeof window)return"none";if(window.startViewTransition)return"astro-view-transitions";if(window.astro)return"astro";const e=document.documentElement;return Array.from(e.attributes).some(e=>e.name.startsWith("data-astro-cid-"))?"astro":window.htmx?"htmx":"none"},refresh(){"undefined"!=typeof window&&(window.imageZoom&&"function"==typeof window.imageZoom.rescan&&window.imageZoom.rescan(),"function"==typeof initCopyButtons&&initCopyButtons(),"function"==typeof initScrollWrappers&&initScrollWrappers())},init(){"undefined"!=typeof window&&(this.refresh(),"astro"==this.detectFramework()&&document.addEventListener("astro:page-load",()=>{this.refresh()}),"htmx"==this.detectFramework()&&document.body.addEventListener("htmx:afterSettle",()=>{this.refresh()}))},info(){const e=this.detectFramework();console.log(`Standard Framework v${this.version}`),console.log(`Framework detected: ${e}`),console.log("Modules:",["toast - Notification system","comments - GitHub-backed comments","StandardLab - Design token inspector","imageZoom - Click-to-zoom lightbox","initCopyButtons() - Copy buttons for code blocks","initScrollWrappers() - Scroll shadows"]),console.log("Integrations:",["âœ“ initAstro() - For Astro View Transitions API (recommended)","âš  initHTMX() - For HTMX navigation (legacy, use View Transitions instead)"]),console.log("\nðŸ“š Learn more:"),console.log("  Astro View Transitions: https://docs.astro.build/en/guides/view-transitions/")}};"undefined"!=typeof window&&(window.standard=e,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>e.init()):e.init(),console.log("Standard Framework loaded. Type window.standard.info() for help."))}(),function(){class e{constructor(e={}){this.apiUrl=e.apiUrl||"/api/comments",this.pageId=e.pageId,this.container="string"==typeof e.container?document.querySelector(e.container):e.container||document.querySelector("#comments"),this.formSelector=e.form||"#comment-form",this.comments=[],this.loading=!1,this.pollInterval=e.pollInterval||null,this.pollTimer=null,this.onLoad=e.onLoad||null,this.onRender=e.onRender||null}async load(){if(!this.pageId)return console.error("GitHubComments: pageId is required"),this.error="Configuration error: pageId is required",[];this.loading=!0,this.error=null;try{const e=await fetch(`${this.apiUrl}?pageId=${encodeURIComponent(this.pageId)}`);if(!e.ok)throw new Error(`API error: ${e.status}`);const t=await e.json();if(this.comments=t.comments||[],this.loading=!1,"function"==typeof this.onLoad)try{this.onLoad(this.comments)}catch(e){}return this.comments}catch(e){return console.error("Error loading comments:",e),this.loading=!1,this.error=e.message||"Failed to load comments. Please try again later.",[]}}async submit(e){try{const t=await fetch(this.apiUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pageId:this.pageId,...e})});if(!t.ok){let e=`API error: ${t.status}`;try{e=(await t.json()).message||e}catch(n){e=`API endpoint not available (${t.status})`}throw new Error(e)}const n=await t.json();return n.comment&&(this.comments.push(n.comment),this.comments.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt))),n}catch(e){throw console.error("Error submitting comment:",e),e}}formatTime(e){const t=new Date(e),n=new Date,o=Math.floor((n-t)/1e3);return o<60?"just now":o<3600?`${Math.floor(o/60)}m ago`:o<86400?`${Math.floor(o/3600)}h ago`:o<604800?`${Math.floor(o/86400)}d ago`:t.toLocaleDateString()}escapeHTML(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}formatContent(e){let t=this.escapeHTML(e);return t=t.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>"),t=t.replace(/\*(.+?)\*/g,"<em>$1</em>"),t=t.replace(/_(.+?)_/g,"<em>$1</em>"),t=t.replace(/```(.*?)```/gs,"<pre><code>$1</code></pre>"),t=t.replace(/`(.+?)`/g,"<code>$1</code>"),t=t.replace(/\[(.+?)\]\((.+?)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer">$1</a>'),t=t.replace(/\n/g,"<br>"),t}renderComment(e,t=0){const n=!1!==e.approved?"":' data-pending="true"',o=e.spam?' data-spam="true"':"";return`\n      <div class="comment" data-id="${this.escapeHTML(String(e.id))}" data-level="${t}"${n}${o}>\n        <div class="comment-header">\n          <span class="comment-author">${this.escapeHTML(e.author||"Anonymous")}</span>\n          <span class="comment-date">${this.formatTime(e.createdAt)}</span>\n          ${e.spam?'<span class="comment-flag">Flagged as spam</span>':""}\n          ${e.approved?"":'<span class="comment-pending">Awaiting moderation</span>'}\n        </div>\n        <div class="comment-content">${this.formatContent(e.content||"")}</div>\n      </div>\n    `}buildCommentTree(){const e={},t=[];for(const t of this.comments)e[t.id]={...t,replies:[]};for(const n of this.comments)n.parentId&&e[n.parentId]?e[n.parentId].replies.push(e[n.id]):t.push(e[n.id]);return t}renderTree(e,t=0){return e.map(e=>{let n=this.renderComment(e,t);return e.replies&&e.replies.length>0&&(n+=`<div class="comment-replies">${this.renderTree(e.replies,t+1)}</div>`),n}).join("")}updateFormVisibility(){const e=document.getElementById("show-comment-form-btn");e&&(this.error?e.style.display="none":e.style.display="")}render(){if(!this.container)return void console.error("GitHubComments: container not found");if(this.error)return this.container.innerHTML=`\n        <aside class="comments debug" role="alert">\n          Error loading comments: ${this.escapeHTML(this.error)}\n        </aside>\n      `,void this.updateFormVisibility();if(0===this.comments.length)return this.container.innerHTML='<p class="comments-empty">No comments yet. Be the first to comment!</p>',void this.updateFormVisibility();const e=this.buildCommentTree();if(this.container.innerHTML=this.renderTree(e),this.attachReplyHandlers(),this.updateFormVisibility(),"function"==typeof this.onRender)try{this.onRender(this.container)}catch(e){}}attachReplyHandlers(){this.container&&this.container.querySelectorAll(".comment-reply").forEach(e=>{e.addEventListener("click",e=>{const t=e.target.dataset.parentId,n=document.querySelector(this.formSelector);if(n){const e=n.querySelector('[name="parentId"]');e&&(e.value=t),n.scrollIntoView({behavior:"smooth"})}})})}attachFormHandler(e=null){const t=document.querySelector(e||this.formSelector);if(t){if(t.removeAttribute("hx-boost"),t.setAttribute("hx-disable","true"),window.htmx){const n=t.cloneNode(!0);t.parentNode.replaceChild(n,t);return void document.querySelector(e||this.formSelector).addEventListener("submit",this._handleFormSubmit.bind(this))}t.addEventListener("submit",this._handleFormSubmit.bind(this))}}async _handleFormSubmit(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();const t=e.target,n=new FormData(t),o={author:n.get("author"),email:n.get("email"),content:n.get("content"),parentId:n.get("parentId")||null},i=t.querySelector("button[type=submit]"),r=i?i.textContent:"",a=t.querySelector("#form-status");try{i&&(i.disabled=!0,i.textContent="Submitting...",i.style.opacity="0.7"),a&&(a.style.display="block",a.textContent="Sending your comment...",a.style.color="var(--color-foreground, #000)");const e=await this.submit(o);a&&(a.textContent="Comment submitted successfully! It will appear after moderation.",a.style.color="var(--color-green, green)",setTimeout(()=>{a.style.display="none",a.textContent=""},6e3)),t.reset();const n=t.querySelector('[name="parentId"]');return n&&(n.value=""),this.render(),e}catch(e){throw a&&(a.textContent=`Error: ${e.message}`,a.style.color="var(--color-red, red)",a.style.display="block"),e}finally{i&&(i.disabled=!1,i.textContent=r,i.style.opacity="1")}}startPolling(){this.pollInterval&&(this.stopPolling(),this.pollTimer=setInterval(async()=>{const e=this.comments.length;await this.load(),this.comments.length>e&&this.render()},this.pollInterval))}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}}function t(e){if(!e||"string"!=typeof e)return"index";let t=e.trim();try{t=new URL(t,window.location.origin).pathname}catch(e){}return t=t.replace(/^\/|\/$/g,""),""===t?"index":(t=t.replace(/[\/]+/g,"_"),t=t.replace(/[^A-Za-z0-9_-]/g,"_"),t)}let n=null,o={apiUrl:"/api/comments",containerSelector:"#comments",formSelector:"#comment-form",pollInterval:null,autoInit:!0,pageId:null,onLoad:null,onRender:null};function i(){if("undefined"==typeof document)return null;const e=document.querySelector("[data-page-id]")||document.body,t=e&&e.getAttribute&&e.getAttribute("data-page-id");if(t)return t;const n=document.querySelector('meta[name="page-id"]');if(n&&n.content)return n.content;const o=document.querySelector('meta[property="og:url"]');if(o&&o.content)try{return new URL(o.content).pathname}catch(e){return o.content}const i=document.querySelector('link[rel="canonical"]');if(i&&i.href)try{return new URL(i.href).pathname}catch(e){return i.href}return null}const r={version:"@VERSION_PLACEHOLDER@",configure:(e={})=>(Object.assign(o,e||{}),o),getInstance:()=>n,createInstance(r={}){const a={apiUrl:o.apiUrl,container:r.container||o.containerSelector,form:r.formSelector||o.formSelector,pollInterval:null!=r.pollInterval?r.pollInterval:o.pollInterval,onLoad:r.onLoad||o.onLoad,onRender:r.onRender||o.onRender},s=r.pageId||o.pageId||i();return a.pageId=t(s||window.location.pathname),n=new e(a),n},async init(e={}){if("undefined"==typeof document)return null;if(n&&!e.recreate)return n;let t=e.container;if(!t){t=document.querySelector("[data-comments]")||document.querySelector(o.containerSelector)||o.containerSelector}const i=this.createInstance({...e,container:t});try{await i.load(),i.render()}catch(e){}try{i.attachFormHandler(e.formSelector||o.formSelector)}catch(e){}return i.pollInterval&&i.startPolling(),i},async load(){return n||await this.init(),n?n.load():[]},render(){if(n)return n.render();console.error("comments: not initialized")},attachFormHandler(e){if(n)return n.attachFormHandler(e);console.error("comments: not initialized")},submit:e=>n?n.submit(e):Promise.reject(new Error("comments: not initialized")),startPolling(){if(n)return n.startPolling();console.error("comments: not initialized")},stopPolling(){if(n)return n.stopPolling()},getPageId(){if(n&&n.pageId)return n.pageId;return t(o.pageId||i()||("undefined"!=typeof window?window.location.pathname:"index"))}};function a(){if(o.autoInit&&!n)try{r.init().catch(()=>{})}catch(e){}document.body.addEventListener("htmx:afterSettle",function(e){if(document.querySelector("#comments, [data-comments]")){const e=r.getInstance();e&&e.stopPolling(),r.init({recreate:!0})}})}"undefined"!=typeof document&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",a):a()),"undefined"!=typeof window&&(window.comments=r,window.GitHubComments=e)}(),function(){function e(){navigator.clipboard?document.querySelectorAll("pre > code").forEach(e=>{if(e.parentNode.querySelector(".copy-button"))return;const t=document.createElement("button");t.className="copy-button",t.textContent="Copy",t.setAttribute("aria-label","Copy code to clipboard"),t.onclick=async()=>{try{await navigator.clipboard.writeText(e.innerText),t.textContent="Copied!",t.classList.add("copied"),setTimeout(()=>{t.textContent="Copy",t.classList.remove("copied")},2e3)}catch(e){console.error("Failed to copy:",e),t.textContent="Failed",setTimeout(()=>{t.textContent="Copy"},2e3)}},e.parentNode.append(t)}):console.warn("Clipboard API not available (requires HTTPS)")}"undefined"!=typeof document&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()),"undefined"!=typeof window&&(window.initCopyButtons=e)}(),function(){
/**
   * Image Zoom - Standalone lightbox with keyboard navigation
   *
   * A lightweight image zoom library with full featured lightbox experience.
   * Click any image to zoom, use arrow keys to navigate, ESC to close.
   *
   * Features:
   * - Click to zoom in/out
   * - Keyboard navigation (â†/â†’ arrows, ESC to close)
   * - Click backdrop to close
   * - Auto-closes on scroll
   * - Wraps around image gallery
   * - Custom events for extensibility
   * - Configurable selectors
   * - Graceful degradation (CSS fallback without JS)
   * - HTMX compatible via rescan() method
   *
   * @version @VERSION_PLACEHOLDER@
   * @license MIT
   */
class e{constructor(e={}){this.options={selector:"img:not([data-no-zoom])",enableKeyboardNav:!0,...e},this.overlay=null,this.originalImage=null,this.images=[],this.boundKeydownHandler=this.handleKeydown.bind(this),this.boundCloseHandler=this.close.bind(this),this.boundClickHandler=this.handleClick.bind(this),this.init()}init(){document.documentElement.classList.add("js-image-zoom-enabled"),document.addEventListener("click",this.boundClickHandler),console.log("[ImageZoom] Initialized and click listener attached")}rescan(){return this.refreshImages(),document.documentElement.classList.add("js-image-zoom-enabled"),document.removeEventListener("click",this.boundClickHandler),document.addEventListener("click",this.boundClickHandler),console.log(`[ImageZoom] Rescanned. Found ${this.images.length} images. Listener rebound.`),this.images.length}refreshImages(){return this.images=Array.from(document.querySelectorAll(this.options.selector)),this.images.length}handleClick(e){const t=e.target.closest(this.options.selector);t?(console.log("[ImageZoom] Click detected on zoomable image",t),this.overlay?(e.preventDefault(),this.close()):(e.preventDefault(),e.stopPropagation(),this.open(t))):this.overlay&&(e.preventDefault(),this.close())}handleKeydown(e){if(this.overlay)switch(e.key){case"Escape":e.preventDefault(),this.close();break;case"ArrowLeft":case"ArrowUp":e.preventDefault(),this.navigate(-1);break;case"ArrowRight":case"ArrowDown":e.preventDefault(),this.navigate(1)}}open(e){if(this.overlay)return;this.originalImage=e,this.overlay=document.createElement("div"),this.overlay.className="image-zoom-overlay";const t=new Image;t.src=this.originalImage.src,t.alt=this.originalImage.alt,this.overlay.appendChild(t),document.body.appendChild(this.overlay),document.documentElement.classList.add("image-zoomed-active"),this.options.enableKeyboardNav&&document.addEventListener("keydown",this.boundKeydownHandler),window.addEventListener("scroll",this.boundCloseHandler),requestAnimationFrame(()=>{this.overlay.classList.add("is-visible")})}close(){this.overlay&&(window.removeEventListener("scroll",this.boundCloseHandler),this.overlay.classList.remove("is-visible"),this.overlay.addEventListener("transitionend",()=>{this.overlay&&(this.overlay.remove(),this.overlay=null)},{once:!0}),document.documentElement.classList.remove("image-zoomed-active"),this.originalImage=null,this.options.enableKeyboardNav&&document.removeEventListener("keydown",this.boundKeydownHandler))}navigate(e){if(!this.originalImage)return;this.images=Array.from(document.querySelectorAll(this.options.selector));const t=this.images.indexOf(this.originalImage);if(-1===t)return;const n=(t+e+this.images.length)%this.images.length,o=this.images[n];if(o){const e=this.overlay.querySelector("img");e.src=o.src,e.alt=o.alt,this.originalImage=o}}destroy(){this.overlay&&this.close(),document.removeEventListener("click",this.boundClickHandler)}}if("undefined"!=typeof window){console.log("hola"),window.ImageZoom=e;const t=()=>{window.imageZoom=new e};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",t()):t()}}(),function(){function e(e=document){e.querySelectorAll(".scroll:not([data-scroll-initialized])").forEach(e=>{const t=()=>{if(!(e.scrollWidth>e.clientWidth))return void e.classList.remove("show-left-shadow","show-right-shadow");const t=e.scrollLeft,n=e.scrollWidth-e.clientWidth;e.classList.toggle("show-right-shadow",0===t),e.classList.toggle("show-left-shadow",t>=n-1)};t(),e.addEventListener("scroll",t,{passive:!0}),window.addEventListener("resize",t),e.dataset.scrollInitialized="true"})}"undefined"!=typeof document&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{e(document)}):e(document)),"undefined"!=typeof window&&(window.initializeScrollWrappers=e)}(),function(){function e(){window.htmx&&(document.body.addEventListener("htmx:beforeSwap",e=>{const t=(new DOMParser).parseFromString(e.detail.xhr.responseText,"text/html").documentElement.dataset.theme;t&&(document.documentElement.dataset.theme=t)}),document.body.addEventListener("htmx:afterSettle",function(e){window.imageZoom&&window.imageZoom.rescan(),initScrollWrappers(e.detail.elt),initCopyButtons()}))}"undefined"!=typeof document&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()),"undefined"!=typeof window&&(window.initHTMX=e)}(),function(){let e=null,t={x:0,y:0};function n(){return"undefined"!=typeof window&&("startViewTransition"in document&&(!0===window.transitionEnabledOnThisPage||!("transitionEnabledOnThisPage"in window)))}function o(o={}){const{usePageLoad:i=!1,debug:r=!1,restoreScroll:a=!1}=o;if("undefined"==typeof document)return console.warn("[Standard Astro] Document not available - running in non-browser environment"),{success:!1,reason:"non-browser-environment"};const s=n();return r&&console.log("[Standard Astro] Initializing...",{viewTransitionsEnabled:s,usePageLoad:i,restoreScroll:a}),"undefined"!=typeof document&&(e=document.documentElement.dataset.theme),"undefined"!=typeof window&&(document.addEventListener("astro:before-preparation",t=>{const n=document.documentElement.dataset.theme;n&&(e=n)}),document.addEventListener("astro:before-swap",t=>{if(t.newDocument){const n=t.newDocument.documentElement.dataset.theme;n&&(e=n,document.documentElement.dataset.theme=n)}}),document.addEventListener("astro:after-swap",()=>{e&&(document.documentElement.dataset.theme=e)})),function(e={}){const{restoreScroll:n=!1}=e;"undefined"!=typeof window&&(document.addEventListener("astro:before-preparation",()=>{t={x:window.scrollX||0,y:window.scrollY||0}}),document.addEventListener("astro:after-swap",()=>{n?window.scrollTo(t.x,t.y):window.scrollTo(0,0)}))}({restoreScroll:a}),i?("undefined"!=typeof window&&document.addEventListener("astro:page-load",()=>{window.imageZoom&&"function"==typeof window.imageZoom.rescan&&window.imageZoom.rescan(),"function"==typeof initScrollWrappers&&initScrollWrappers(document),"function"==typeof initCopyButtons&&initCopyButtons()}),r&&console.log("[Standard Astro] Using astro:page-load event")):("undefined"!=typeof window&&document.addEventListener("astro:after-swap",()=>{window.imageZoom&&"function"==typeof window.imageZoom.rescan&&window.imageZoom.rescan(),"function"==typeof initScrollWrappers&&initScrollWrappers(document),"function"==typeof initCopyButtons&&initCopyButtons()}),r&&console.log("[Standard Astro] Using astro:after-swap event")),r&&(!function(){if("undefined"==typeof window||"undefined"==typeof document)return;["astro:before-preparation","astro:after-preparation","astro:before-swap","astro:after-swap","astro:page-load"].forEach(e=>{document.addEventListener(e,t=>{console.log(`[Standard] ${e}`,{type:e,fromURL:t.from?.href||"N/A",toURL:t.to?.href||"N/A",direction:t.direction||"N/A"})})})}(),console.log("[Standard Astro] Debug logging enabled")),r&&console.log("[Standard Astro] âœ“ Initialization complete"),{success:!0,viewTransitionsEnabled:s,modules:["imageZoom","scrollWrappers","copyButtons"]}}const i={reinitialize(){window.imageZoom&&"function"==typeof window.imageZoom.rescan&&window.imageZoom.rescan(),"function"==typeof initScrollWrappers&&initScrollWrappers(document),"function"==typeof initCopyButtons&&initCopyButtons()},isSupported:()=>n(),getCurrentTheme:()=>e,setTheme(t){e=t,"undefined"!=typeof document&&(document.documentElement.dataset.theme=t)}};"undefined"!=typeof window&&(window.initAstro=o,window.astroHelpers=i),"undefined"!=typeof document&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{n()&&o()}):n()&&o())}();