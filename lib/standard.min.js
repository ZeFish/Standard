var htmx=function(){"use strict";const Q={onLoad:null,process:null,on:null,off:null,trigger:null,ajax:null,find:null,findAll:null,closest:null,values:function(e,t){return dn(e,t||"post").values},remove:null,addClass:null,removeClass:null,toggleClass:null,takeClass:null,swap:null,defineExtension:null,removeExtension:null,logAll:null,logNone:null,logger:null,config:{historyEnabled:!0,historyCacheSize:10,refreshOnHistoryMiss:!1,defaultSwapStyle:"innerHTML",defaultSwapDelay:0,defaultSettleDelay:20,includeIndicatorStyles:!0,indicatorClass:"htmx-indicator",requestClass:"htmx-request",addedClass:"htmx-added",settlingClass:"htmx-settling",swappingClass:"htmx-swapping",allowEval:!0,allowScriptTags:!0,inlineScriptNonce:"",inlineStyleNonce:"",attributesToSettle:["class","style","width","height"],withCredentials:!1,timeout:0,wsReconnectDelay:"full-jitter",wsBinaryType:"blob",disableSelector:"[hx-disable], [data-hx-disable]",scrollBehavior:"instant",defaultFocusScroll:!1,getCacheBusterParam:!1,globalViewTransitions:!1,methodsThatUseUrlParams:["get","delete"],selfRequestsOnly:!0,ignoreTitle:!1,scrollIntoViewOnBoost:!0,triggerSpecsCache:null,disableInheritance:!1,responseHandling:[{code:"204",swap:!1},{code:"[23]..",swap:!0},{code:"[45]..",swap:!1,error:!0}],allowNestedOobSwaps:!0,historyRestoreAsHxRequest:!0,reportValidityOfForms:!1},parseInterval:null,location:location,_:null,version:"2.0.8"};Q.onLoad=V,Q.process=Ft,Q.on=xe,Q.off=be,Q.trigger=ae,Q.ajax=Ln,Q.find=f,Q.findAll=x,Q.closest=g,Q.remove=_,Q.addClass=K,Q.removeClass=G,Q.toggleClass=W,Q.takeClass=Z,Q.swap=ze,Q.defineExtension=_n,Q.removeExtension=zn,Q.logAll=j,Q.logNone=$,Q.parseInterval=d,Q._=e;const n={addTriggerHandler:St,bodyContains:se,canAccessLocalStorage:X,findThisElement:Se,filterValues:yn,swap:ze,hasAttribute:s,getAttributeValue:a,getClosestAttributeValue:ne,getClosestMatch:q,getExpressionVars:Rn,getHeaders:mn,getInputValues:dn,getInternalData:oe,getSwapSpecification:bn,getTriggerSpecs:st,getTarget:Ee,makeFragment:D,mergeObjects:le,makeSettleInfo:Sn,oobSwap:Te,querySelectorExt:ue,settleImmediately:Yt,shouldCancel:ht,triggerEvent:ae,triggerErrorEvent:fe,withExtensions:Vt},de=["get","post","put","delete","patch"],R=de.map(function(e){return"[hx-"+e+"], [data-hx-"+e+"]"}).join(", ");function d(e){if(null==e)return;let t=NaN;return t="ms"==e.slice(-2)?parseFloat(e.slice(0,-2)):"s"==e.slice(-1)?1e3*parseFloat(e.slice(0,-1)):"m"==e.slice(-1)?1e3*parseFloat(e.slice(0,-1))*60:parseFloat(e),isNaN(t)?void 0:t}function ee(e,t){return e instanceof Element&&e.getAttribute(t)}function s(e,t){return!!e.hasAttribute&&(e.hasAttribute(t)||e.hasAttribute("data-"+t))}function a(e,t){return ee(e,t)||ee(e,"data-"+t)}function u(e){const t=e.parentElement;return!t&&e.parentNode instanceof ShadowRoot?e.parentNode:t}function te(){return document}function y(e,t){return e.getRootNode?e.getRootNode({composed:t}):te()}function q(e,t){for(;e&&!t(e);)e=u(e);return e||null}function o(e,t,n){const o=a(t,n),r=a(t,"hx-disinherit");var i=a(t,"hx-inherit");if(e!==t){if(Q.config.disableInheritance)return i&&("*"===i||i.split(" ").indexOf(n)>=0)?o:null;if(r&&("*"===r||r.split(" ").indexOf(n)>=0))return"unset"}return o}function ne(e,t){let n=null;if(q(e,function(r){return!!(n=o(e,ce(r),t))}),"unset"!==n)return n}function h(e,t){return e instanceof Element&&e.matches(t)}function A(e){const t=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i.exec(e);return t?t[1].toLowerCase():""}function L(e){if("parseHTMLUnsafe"in Document)return Document.parseHTMLUnsafe(e);return(new DOMParser).parseFromString(e,"text/html")}function N(e,t){for(;t.childNodes.length>0;)e.append(t.childNodes[0])}function r(e){const t=te().createElement("script");return ie(e.attributes,function(e){t.setAttribute(e.name,e.value)}),t.textContent=e.textContent,t.async=!1,Q.config.inlineScriptNonce&&(t.nonce=Q.config.inlineScriptNonce),t}function i(e){return e.matches("script")&&("text/javascript"===e.type||"module"===e.type||""===e.type)}function I(e){Array.from(e.querySelectorAll("script")).forEach(e=>{if(i(e)){const t=r(e),n=e.parentNode;try{n.insertBefore(t,e)}catch(e){H(e)}finally{e.remove()}}})}function D(e){const t=e.replace(/<head(\s[^>]*)?>[\s\S]*?<\/head>/i,""),n=A(t);let o;if("html"===n){o=new DocumentFragment;const t=L(e);N(o,t.body),o.title=t.title}else if("body"===n){o=new DocumentFragment;const e=L(t);N(o,e.body),o.title=e.title}else{const e=L('<body><template class="internal-htmx-wrapper">'+t+"</template></body>");o=e.querySelector("template").content,o.title=e.title;var r=o.querySelector("title");r&&r.parentNode===o&&(r.remove(),o.title=r.innerText)}return o&&(Q.config.allowScriptTags?I(o):o.querySelectorAll("script").forEach(e=>e.remove())),o}function re(e){e&&e()}function t(e,t){return Object.prototype.toString.call(e)==="[object "+t+"]"}function P(e){return"function"==typeof e}function k(e){return t(e,"Object")}function oe(e){const t="htmx-internal-data";let n=e[t];return n||(n=e[t]={}),n}function M(e){const t=[];if(e)for(let n=0;n<e.length;n++)t.push(e[n]);return t}function ie(e,t){if(e)for(let n=0;n<e.length;n++)t(e[n])}function F(e){const t=e.getBoundingClientRect(),n=t.top,o=t.bottom;return n<window.innerHeight&&o>=0}function se(e){return e.getRootNode({composed:!0})===document}function B(e){return e.trim().split(/\s+/)}function le(e,t){for(const n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function v(e){try{return JSON.parse(e)}catch(e){return H(e),null}}function X(){const e="htmx:sessionStorageTest";try{return sessionStorage.setItem(e,e),sessionStorage.removeItem(e),!0}catch(e){return!1}}function U(e){const t=new URL(e,"http://x");return t&&(e=t.pathname+t.search),"/"!=e&&(e=e.replace(/\/+$/,"")),e}function e(e){return On(te().body,function(){return eval(e)})}function V(e){return Q.on("htmx:load",function(t){e(t.detail.elt)})}function j(){Q.logger=function(e,t,n){console&&console.log(t,e,n)}}function $(){Q.logger=null}function f(e,t){return"string"!=typeof e?e.querySelector(t):f(te(),e)}function x(e,t){return"string"!=typeof e?e.querySelectorAll(t):x(te(),e)}function b(){return window}function _(e,t){e=w(e),t?b().setTimeout(function(){_(e),e=null},t):u(e).removeChild(e)}function ce(e){return e instanceof Element?e:null}function z(e){return e instanceof HTMLElement?e:null}function J(e){return"string"==typeof e?e:null}function p(e){return e instanceof Element||e instanceof Document||e instanceof DocumentFragment?e:null}function K(e,t,n){(e=ce(w(e)))&&(n?b().setTimeout(function(){K(e,t),e=null},n):e.classList&&e.classList.add(t))}function G(e,t,n){let o=ce(w(e));o&&(n?b().setTimeout(function(){G(o,t),o=null},n):o.classList&&(o.classList.remove(t),0===o.classList.length&&o.removeAttribute("class")))}function W(e,t){(e=w(e)).classList.toggle(t)}function Z(e,t){ie((e=w(e)).parentElement.children,function(e){G(e,t)}),K(ce(e),t)}function g(e,t){return(e=ce(w(e)))?e.closest(t):null}function l(e,t){return e.substring(0,t.length)===t}function Y(e,t){return e.substring(e.length-t.length)===t}function pe(e){const t=e.trim();return l(t,"<")&&Y(t,"/>")?t.substring(1,t.length-2):t}function m(e,t,n){if(0===t.indexOf("global "))return m(e,t.slice(7),!0);e=w(e);const o=[];{let e=0,n=0;for(let r=0;r<t.length;r++){const a=t[r];","!==a||0!==e?"<"===a?e++:"/"===a&&r<t.length-1&&">"===t[r+1]&&e--:(o.push(t.substring(n,r)),n=r+1)}n<t.length&&o.push(t.substring(n))}const r=[],a=[];for(;o.length>0;){const t=pe(o.shift());let i;0===t.indexOf("closest ")?i=g(ce(e),pe(t.slice(8))):0===t.indexOf("find ")?i=f(p(e),pe(t.slice(5))):"next"===t||"nextElementSibling"===t?i=ce(e).nextElementSibling:0===t.indexOf("next ")?i=ge(e,pe(t.slice(5)),!!n):"previous"===t||"previousElementSibling"===t?i=ce(e).previousElementSibling:0===t.indexOf("previous ")?i=me(e,pe(t.slice(9)),!!n):"document"===t?i=document:"window"===t?i=window:"body"===t?i=document.body:"root"===t?i=y(e,!!n):"host"===t?i=e.getRootNode().host:a.push(t),i&&r.push(i)}if(a.length>0){const t=a.join(","),o=p(y(e,!!n));r.push(...M(o.querySelectorAll(t)))}return r}var ge=function(e,t,n){const o=p(y(e,n)).querySelectorAll(t);for(let t=0;t<o.length;t++){const n=o[t];if(n.compareDocumentPosition(e)===Node.DOCUMENT_POSITION_PRECEDING)return n}},me=function(e,t,n){const o=p(y(e,n)).querySelectorAll(t);for(let t=o.length-1;t>=0;t--){const n=o[t];if(n.compareDocumentPosition(e)===Node.DOCUMENT_POSITION_FOLLOWING)return n}};function ue(e,t){return"string"!=typeof e?m(e,t)[0]:m(te().body,e)[0]}function w(e,t){return"string"==typeof e?f(p(t)||document,e):e}function ye(e,t,n,o){return P(t)?{target:te().body,event:J(e),listener:t,options:n}:{target:w(e),event:J(t),listener:n,options:o}}function xe(e,t,n,o){Gn(function(){const r=ye(e,t,n,o);r.target.addEventListener(r.event,r.listener,r.options)});return P(t)?t:n}function be(e,t,n){return Gn(function(){const o=ye(e,t,n);o.target.removeEventListener(o.event,o.listener)}),P(t)?t:n}const ve=te().createElement("output");function we(e,t){const n=ne(e,t);if(n){if("this"===n)return[Se(e,t)];{const o=m(e,n);if(/(^|,)(\s*)inherit(\s*)($|,)/.test(n)){const n=ce(q(e,function(n){return n!==e&&s(ce(n),t)}));n&&o.push(...we(n,t))}return 0===o.length?(H('The selector "'+n+'" on '+t+" returned no matches!"),[ve]):o}}}function Se(e,t){return ce(q(e,function(e){return null!=a(ce(e),t)}))}function Ee(e){const t=ne(e,"hx-target");if(t)return"this"===t?Se(e,"hx-target"):ue(e,t);return oe(e).boosted?te().body:e}function Ce(e){return Q.config.attributesToSettle.includes(e)}function Oe(e,t){ie(Array.from(e.attributes),function(n){!t.hasAttribute(n.name)&&Ce(n.name)&&e.removeAttribute(n.name)}),ie(t.attributes,function(t){Ce(t.name)&&e.setAttribute(t.name,t.value)})}function He(e,t){const n=Jn(t);for(let o=0;o<n.length;o++){const r=n[o];try{if(r.isInlineSwap(e))return!0}catch(t){H(t)}}return"outerHTML"===e}function Te(e,t,n,o){o=o||te();let r="#"+CSS.escape(ee(t,"id")),a="outerHTML";"true"===e||(e.indexOf(":")>0?(a=e.substring(0,e.indexOf(":")),r=e.substring(e.indexOf(":")+1)):a=e),t.removeAttribute("hx-swap-oob"),t.removeAttribute("data-hx-swap-oob");const i=m(o,r,!1);return i.length?(ie(i,function(e){let o;const r=t.cloneNode(!0);o=te().createDocumentFragment(),o.appendChild(r),He(a,e)||(o=p(r));const i={shouldSwap:!0,target:e,fragment:o};ae(e,"htmx:oobBeforeSwap",i)&&(e=i.target,i.shouldSwap&&(qe(o),$e(a,e,e,o,n),Re()),ie(n.elts,function(e){ae(e,"htmx:oobAfterSwap",i)}))}),t.parentNode.removeChild(t)):(t.parentNode.removeChild(t),fe(te().body,"htmx:oobErrorNoTarget",{content:t})),e}function Re(){const e=f("#--htmx-preserve-pantry--");if(e){for(const t of[...e.children]){const e=f("#"+t.id);e.parentNode.moveBefore(t,e),e.remove()}e.remove()}}function qe(e){ie(x(e,"[hx-preserve], [data-hx-preserve]"),function(e){const t=a(e,"id"),n=te().getElementById(t);if(null!=n)if(e.moveBefore){let e=f("#--htmx-preserve-pantry--");null==e&&(te().body.insertAdjacentHTML("afterend","<div id='--htmx-preserve-pantry--'></div>"),e=f("#--htmx-preserve-pantry--")),e.moveBefore(n,null)}else e.parentNode.replaceChild(n,e)})}function Ae(e,t,n){ie(t.querySelectorAll("[id]"),function(t){const o=ee(t,"id");if(o&&o.length>0){const r=o.replace("'","\\'"),a=t.tagName.replace(":","\\:"),i=p(e),s=i&&i.querySelector(a+"[id='"+r+"']");if(s&&s!==i){const e=t.cloneNode();Oe(t,s),n.tasks.push(function(){Oe(t,e)})}}})}function Le(e){return function(){G(e,Q.config.addedClass),Ft(ce(e)),Ne(p(e)),ae(e,"htmx:load")}}function Ne(e){const t="[autofocus]",n=z(h(e,t)?e:e.querySelector(t));null!=n&&n.focus()}function c(e,t,n,o){for(Ae(e,n,o);n.childNodes.length>0;){const r=n.firstChild;K(ce(r),Q.config.addedClass),e.insertBefore(r,t),r.nodeType!==Node.TEXT_NODE&&r.nodeType!==Node.COMMENT_NODE&&o.tasks.push(Le(r))}}function Ie(e,t){let n=0;for(;n<e.length;)t=(t<<5)-t+e.charCodeAt(n++)|0;return t}function De(e){let t=0;for(let n=0;n<e.attributes.length;n++){const o=e.attributes[n];o.value&&(t=Ie(o.name,t),t=Ie(o.value,t))}return t}function Pe(e){const t=oe(e);if(t.onHandlers){for(let n=0;n<t.onHandlers.length;n++){const o=t.onHandlers[n];be(e,o.event,o.listener)}delete t.onHandlers}}function ke(e){const t=oe(e);t.timeout&&clearTimeout(t.timeout),t.listenerInfos&&ie(t.listenerInfos,function(e){e.on&&be(e.on,e.trigger,e.listener)}),Pe(e),ie(Object.keys(t),function(e){"firstInitCompleted"!==e&&delete t[e]})}function S(e){ae(e,"htmx:beforeCleanupElement"),ke(e),ie(e.children,function(e){S(e)})}function Me(e,t,n){if("BODY"===e.tagName)return je(e,t,n);let o;const r=e.previousSibling,a=u(e);if(a){for(c(a,e,t,n),o=null==r?a.firstChild:r.nextSibling,n.elts=n.elts.filter(function(t){return t!==e});o&&o!==e;)o instanceof Element&&n.elts.push(o),o=o.nextSibling;S(e),e.remove()}}function Fe(e,t,n){return c(e,e.firstChild,t,n)}function Be(e,t,n){return c(u(e),e,t,n)}function Xe(e,t,n){return c(e,null,t,n)}function Ue(e,t,n){return c(u(e),e.nextSibling,t,n)}function Ve(e){S(e);const t=u(e);if(t)return t.removeChild(e)}function je(e,t,n){const o=e.firstChild;if(c(e,o,t,n),o){for(;o.nextSibling;)S(o.nextSibling),e.removeChild(o.nextSibling);S(o),e.removeChild(o)}}function $e(e,t,n,o,r){switch(e){case"none":return;case"outerHTML":return void Me(n,o,r);case"afterbegin":return void Fe(n,o,r);case"beforebegin":return void Be(n,o,r);case"beforeend":return void Xe(n,o,r);case"afterend":return void Ue(n,o,r);case"delete":return void Ve(n);default:var a=Jn(t);for(let i=0;i<a.length;i++){const s=a[i];try{const t=s.handleSwap(e,n,o,r);if(t){if(Array.isArray(t))for(let e=0;e<t.length;e++){const n=t[e];n.nodeType!==Node.TEXT_NODE&&n.nodeType!==Node.COMMENT_NODE&&r.tasks.push(Le(n))}return}}catch(t){H(t)}}"innerHTML"===e?je(n,o,r):$e(Q.config.defaultSwapStyle,t,n,o,r)}}function _e(e,t,n){var o=x(e,"[hx-swap-oob], [data-hx-swap-oob]");return ie(o,function(e){if(Q.config.allowNestedOobSwaps||null===e.parentElement){const o=a(e,"hx-swap-oob");null!=o&&Te(o,e,t,n)}else e.removeAttribute("hx-swap-oob"),e.removeAttribute("data-hx-swap-oob")}),o.length>0}function ze(e,t,n,o){o||(o={});let r=null,a=null,i=function(){re(o.beforeSwapCallback),e=w(e);const a=o.contextElement?y(o.contextElement,!1):te(),i=document.activeElement;let s={};s={elt:i,start:i?i.selectionStart:null,end:i?i.selectionEnd:null};const l=Sn(e);if("textContent"===n.swapStyle)e.textContent=t;else{let r=D(t);if(l.title=o.title||r.title,o.historyRequest&&(r=r.querySelector("[hx-history-elt],[data-hx-history-elt]")||r),o.selectOOB){const e=o.selectOOB.split(",");for(let t=0;t<e.length;t++){const n=e[t].split(":",2);let o=n[0].trim();0===o.indexOf("#")&&(o=o.substring(1));const i=n[1]||"true",s=r.querySelector("#"+o);s&&Te(i,s,l,a)}}if(_e(r,l,a),ie(x(r,"template"),function(e){e.content&&_e(e.content,l,a)&&e.remove()}),o.select){const e=te().createDocumentFragment();ie(r.querySelectorAll(o.select),function(t){e.appendChild(t)}),r=e}qe(r),$e(n.swapStyle,o.contextElement,e,r,l),Re()}if(s.elt&&!se(s.elt)&&ee(s.elt,"id")){const e=document.getElementById(ee(s.elt,"id")),t={preventScroll:void 0!==n.focusScroll?!n.focusScroll:!Q.config.defaultFocusScroll};if(e){if(s.start&&e.setSelectionRange)try{e.setSelectionRange(s.start,s.end)}catch(i){}e.focus(t)}}e.classList.remove(Q.config.swappingClass),ie(l.elts,function(e){e.classList&&e.classList.add(Q.config.settlingClass),ae(e,"htmx:afterSwap",o.eventInfo)}),re(o.afterSwapCallback),n.ignoreTitle||Xn(l.title);const c=function(){if(ie(l.tasks,function(e){e.call()}),ie(l.elts,function(e){e.classList&&e.classList.remove(Q.config.settlingClass),ae(e,"htmx:afterSettle",o.eventInfo)}),o.anchor){const e=ce(w("#"+o.anchor));e&&e.scrollIntoView({block:"start",behavior:"auto"})}En(l.elts,n),re(o.afterSettleCallback),re(r)};n.settleDelay>0?b().setTimeout(c,n.settleDelay):c()},s=Q.config.globalViewTransitions;n.hasOwnProperty("transition")&&(s=n.transition);const l=o.contextElement||te();if(s&&ae(l,"htmx:beforeTransition",o.eventInfo)&&"undefined"!=typeof Promise&&document.startViewTransition){const e=new Promise(function(e,t){r=e,a=t}),t=i;i=function(){document.startViewTransition(function(){return t(),e})}}try{n?.swapDelay&&n.swapDelay>0?b().setTimeout(i,n.swapDelay):i()}catch(i){throw fe(l,"htmx:swapError",o.eventInfo),re(a),i}}function Je(e,t,n){const o=e.getResponseHeader(t);if(0===o.indexOf("{")){const e=v(o);for(const t in e)if(e.hasOwnProperty(t)){let o=e[t];k(o)?n=void 0!==o.target?o.target:n:o={value:o},ae(n,t,o)}}else{const e=o.split(",");for(let t=0;t<e.length;t++)ae(n,e[t].trim(),[])}}const Ke=/\s/,E=/[\s,]/,Ge=/[_$a-zA-Z]/,We=/[_$a-zA-Z0-9]/,Ze=['"',"'","/"],C=/[^\s]/,Ye=/[{(]/,Qe=/[})]/;function et(e){const t=[];let n=0;for(;n<e.length;){if(Ge.exec(e.charAt(n))){for(var o=n;We.exec(e.charAt(n+1));)n++;t.push(e.substring(o,n+1))}else if(-1!==Ze.indexOf(e.charAt(n))){const r=e.charAt(n);o=n;for(n++;n<e.length&&e.charAt(n)!==r;)"\\"===e.charAt(n)&&n++,n++;t.push(e.substring(o,n+1))}else{const o=e.charAt(n);t.push(o)}n++}return t}function tt(e,t,n){return Ge.exec(e.charAt(0))&&"true"!==e&&"false"!==e&&"this"!==e&&e!==n&&"."!==t}function nt(e,t,n){if("["===t[0]){t.shift();let o=1,r=" return (function("+n+"){ return (",a=null;for(;t.length>0;){const i=t[0];if("]"===i){if(o--,0===o){null===a&&(r+="true"),t.shift(),r+=")})";try{const t=On(e,function(){return Function(r)()},function(){return!0});return t.source=r,t}catch(e){return fe(te().body,"htmx:syntax:error",{error:e,source:r}),null}}}else"["===i&&o++;tt(i,a,n)?r+="(("+n+"."+i+") ? ("+n+"."+i+") : (window."+i+"))":r+=i,a=t.shift()}}}function O(e,t){let n="";for(;e.length>0&&!t.test(e[0]);)n+=e.shift();return n}function rt(e){let t;return e.length>0&&Ye.test(e[0])?(e.shift(),t=O(e,Qe).trim(),e.shift()):t=O(e,E),t}const ot="input, textarea, select";function it(e,t,n){const o=[],r=et(t);do{O(r,C);const t=r.length,n=O(r,/[,\[\s]/);if(""!==n)if("every"===n){const t={trigger:"every"};O(r,C),t.pollInterval=d(O(r,/[,\[\s]/)),O(r,C),(a=nt(e,r,"event"))&&(t.eventFilter=a),o.push(t)}else{const t={trigger:n};var a;for((a=nt(e,r,"event"))&&(t.eventFilter=a),O(r,C);r.length>0&&","!==r[0];){const n=r.shift();if("changed"===n)t.changed=!0;else if("once"===n)t.once=!0;else if("consume"===n)t.consume=!0;else if("delay"===n&&":"===r[0])r.shift(),t.delay=d(O(r,E));else if("from"===n&&":"===r[0]){if(r.shift(),Ye.test(r[0]))var i=rt(r);else if("closest"===(i=O(r,E))||"find"===i||"next"===i||"previous"===i){r.shift();const e=rt(r);e.length>0&&(i+=" "+e)}t.from=i}else"target"===n&&":"===r[0]?(r.shift(),t.target=rt(r)):"throttle"===n&&":"===r[0]?(r.shift(),t.throttle=d(O(r,E))):"queue"===n&&":"===r[0]?(r.shift(),t.queue=O(r,E)):"root"===n&&":"===r[0]?(r.shift(),t[n]=rt(r)):"threshold"===n&&":"===r[0]?(r.shift(),t[n]=O(r,E)):fe(e,"htmx:syntax:error",{token:r.shift()});O(r,C)}o.push(t)}r.length===t&&fe(e,"htmx:syntax:error",{token:r.shift()}),O(r,C)}while(","===r[0]&&r.shift());return n&&(n[t]=o),o}function st(e){const t=a(e,"hx-trigger");let n=[];if(t){const o=Q.config.triggerSpecsCache;n=o&&o[t]||it(e,t,o)}return n.length>0?n:h(e,"form")?[{trigger:"submit"}]:h(e,'input[type="button"], input[type="submit"]')?[{trigger:"click"}]:h(e,ot)?[{trigger:"change"}]:[{trigger:"click"}]}function lt(e){oe(e).cancelled=!0}function ct(e,t,n){const o=oe(e);o.timeout=b().setTimeout(function(){se(e)&&!0!==o.cancelled&&(pt(n,e,Xt("hx:poll:trigger",{triggerSpec:n,target:e}))||t(e),ct(e,t,n))},n.pollInterval)}function ut(e){return location.hostname===e.hostname&&ee(e,"href")&&0!==ee(e,"href").indexOf("#")}function ft(e){return g(e,Q.config.disableSelector)}function at(e,t,n){if(e instanceof HTMLAnchorElement&&ut(e)&&(""===e.target||"_self"===e.target)||"FORM"===e.tagName&&"dialog"!==String(ee(e,"method")).toLowerCase()){let o,r;if(t.boosted=!0,"A"===e.tagName)o="get",r=ee(e,"href");else{const t=ee(e,"method");o=t?t.toLowerCase():"get",r=ee(e,"action"),null!=r&&""!==r||(r=location.href),"get"===o&&r.includes("?")&&(r=r.replace(/\?[^#]+/,""))}n.forEach(function(n){gt(e,function(e,t){const n=ce(e);ft(n)?S(n):he(o,r,n,t)},t,n,!0)})}}function ht(e,t){if("submit"===e.type&&"FORM"===t.tagName)return!0;if("click"===e.type){const e=t.closest('input[type="submit"], button');if(e&&e.form&&"submit"===e.type)return!0;const n=t.closest("a"),o=/^#.+/;if(n&&n.href&&!o.test(n.getAttribute("href")))return!0}return!1}function dt(e,t){return oe(e).boosted&&e instanceof HTMLAnchorElement&&"click"===t.type&&(t.ctrlKey||t.metaKey)}function pt(e,t,n){const o=e.eventFilter;if(o)try{return!0!==o.call(t,n)}catch(e){const t=o.source;return fe(te().body,"htmx:eventFilter:error",{error:e,source:t}),!0}return!1}function gt(e,t,n,o,r){const a=oe(e);let i;i=o.from?m(e,o.from):[e],o.changed&&("lastValue"in a||(a.lastValue=new WeakMap),i.forEach(function(e){a.lastValue.has(o)||a.lastValue.set(o,new WeakMap),a.lastValue.get(o).set(e,e.value)})),ie(i,function(i){const s=function(n){if(!se(e))return void i.removeEventListener(o.trigger,s);if(dt(e,n))return;if((r||ht(n,i))&&n.preventDefault(),pt(o,e,n))return;const l=oe(n);if(l.triggerSpec=o,null==l.handledFor&&(l.handledFor=[]),l.handledFor.indexOf(e)<0){if(l.handledFor.push(e),o.consume&&n.stopPropagation(),o.target&&n.target&&!h(ce(n.target),o.target))return;if(o.once){if(a.triggeredOnce)return;a.triggeredOnce=!0}if(o.changed){const e=n.target,t=e.value,r=a.lastValue.get(o);if(r.has(e)&&r.get(e)===t)return;r.set(e,t)}if(a.delayed&&clearTimeout(a.delayed),a.throttle)return;o.throttle>0?a.throttle||(ae(e,"htmx:trigger"),t(e,n),a.throttle=b().setTimeout(function(){a.throttle=null},o.throttle)):o.delay>0?a.delayed=b().setTimeout(function(){ae(e,"htmx:trigger"),t(e,n)},o.delay):(ae(e,"htmx:trigger"),t(e,n))}};null==n.listenerInfos&&(n.listenerInfos=[]),n.listenerInfos.push({trigger:o.trigger,listener:s,on:i}),i.addEventListener(o.trigger,s)})}let mt=!1,yt=null;function xt(){yt||(yt=function(){mt=!0},window.addEventListener("scroll",yt),window.addEventListener("resize",yt),setInterval(function(){mt&&(mt=!1,ie(te().querySelectorAll("[hx-trigger*='revealed'],[data-hx-trigger*='revealed']"),function(e){bt(e)}))},200))}function bt(e){if(!s(e,"data-hx-revealed")&&F(e)){e.setAttribute("data-hx-revealed","true");oe(e).initHash?ae(e,"revealed"):e.addEventListener("htmx:afterProcessNode",function(){ae(e,"revealed")},{once:!0})}}function vt(e,t,n,o){const r=function(){n.loaded||(n.loaded=!0,ae(e,"htmx:trigger"),t(e))};o>0?b().setTimeout(r,o):r()}function wt(e,t,n){let o=!1;return ie(de,function(r){if(s(e,"hx-"+r)){const i=a(e,"hx-"+r);o=!0,t.path=i,t.verb=r,n.forEach(function(n){St(e,n,t,function(e,t){const n=ce(e);ft(n)?S(n):he(r,i,n,t)})})}}),o}function St(e,t,n,o){if("revealed"===t.trigger)xt(),gt(e,o,n,t),bt(ce(e));else if("intersect"===t.trigger){const r={};t.root&&(r.root=ue(e,t.root)),t.threshold&&(r.threshold=parseFloat(t.threshold));const a=new IntersectionObserver(function(t){for(let n=0;n<t.length;n++){if(t[n].isIntersecting){ae(e,"intersect");break}}},r);a.observe(ce(e)),gt(ce(e),o,n,t)}else n.firstInitCompleted||"load"!==t.trigger?t.pollInterval>0?(n.polling=!0,ct(ce(e),o,t)):gt(e,o,n,t):pt(t,e,Xt("load",{elt:e}))||vt(ce(e),o,n,t.delay)}function Et(e){const t=ce(e);if(!t)return!1;const n=t.attributes;for(let e=0;e<n.length;e++){const t=n[e].name;if(l(t,"hx-on:")||l(t,"data-hx-on:")||l(t,"hx-on-")||l(t,"data-hx-on-"))return!0}return!1}const Ct=(new XPathEvaluator).createExpression('.//*[@*[ starts-with(name(), "hx-on:") or starts-with(name(), "data-hx-on:") or starts-with(name(), "hx-on-") or starts-with(name(), "data-hx-on-") ]]');function Ot(e,t){Et(e)&&t.push(ce(e));const n=Ct.evaluate(e);let o=null;for(;o=n.iterateNext();)t.push(ce(o))}function Ht(e){const t=[];if(e instanceof DocumentFragment)for(const n of e.childNodes)Ot(n,t);else Ot(e,t);return t}function Tt(e){if(e.querySelectorAll){const n=", [hx-boost] a, [data-hx-boost] a, a[hx-boost], a[data-hx-boost]",o=[];for(const e in jn){const n=jn[e];if(n.getSelectors){var t=n.getSelectors();t&&o.push(t)}}return e.querySelectorAll(R+n+", form, [type='submit'], [hx-ext], [data-hx-ext], [hx-trigger], [data-hx-trigger]"+o.flat().map(e=>", "+e).join(""))}return[]}function Rt(e){const t=At(e.target),n=Nt(e);n&&(n.lastButtonClicked=t)}function qt(e){const t=Nt(e);t&&(t.lastButtonClicked=null)}function At(e){return g(ce(e),"button, input[type='submit']")}function Lt(e){return e.form||g(e,"form")}function Nt(e){const t=At(e.target);if(!t)return;const n=Lt(t);return n?oe(n):void 0}function It(e){e.addEventListener("click",Rt),e.addEventListener("focusin",Rt),e.addEventListener("focusout",qt)}function Dt(e,t,n){const o=oe(e);let r;Array.isArray(o.onHandlers)||(o.onHandlers=[]);const a=function(t){On(e,function(){ft(e)||(r||(r=new Function("event",n)),r.call(e,t))})};e.addEventListener(t,a),o.onHandlers.push({event:t,listener:a})}function Pt(e){Pe(e);for(let t=0;t<e.attributes.length;t++){const n=e.attributes[t].name,o=e.attributes[t].value;if(l(n,"hx-on")||l(n,"data-hx-on")){const t=n.indexOf("-on")+3,r=n.slice(t,t+1);if("-"===r||":"===r){let r=n.slice(t+1);l(r,":")?r="htmx"+r:l(r,"-")?r="htmx:"+r.slice(1):l(r,"htmx-")&&(r="htmx:"+r.slice(5)),Dt(e,r,o)}}}}function kt(e){ae(e,"htmx:beforeProcessNode");const t=oe(e),n=st(e);wt(e,t,n)||("true"===ne(e,"hx-boost")?at(e,t,n):s(e,"hx-trigger")&&n.forEach(function(n){St(e,n,t,function(){})})),("FORM"===e.tagName||"submit"===ee(e,"type")&&s(e,"form"))&&It(e),t.firstInitCompleted=!0,ae(e,"htmx:afterProcessNode")}function Mt(e){if(!(e instanceof Element))return!1;const t=oe(e),n=De(e);return t.initHash!==n&&(ke(e),t.initHash=n,!0)}function Ft(e){if(ft(e=w(e)))return void S(e);const t=[];Mt(e)&&t.push(e),ie(Tt(e),function(e){ft(e)?S(e):Mt(e)&&t.push(e)}),ie(Ht(e),Pt),ie(t,kt)}function Bt(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}function Xt(e,t){return new CustomEvent(e,{bubbles:!0,cancelable:!0,composed:!0,detail:t})}function fe(e,t,n){ae(e,t,le({error:t},n))}function Ut(e){return"htmx:afterProcessNode"===e}function Vt(e,t,n){ie(Jn(e,[],n),function(e){try{t(e)}catch(e){H(e)}})}function H(e){console.error(e)}function ae(e,t,n){e=w(e),null==n&&(n={}),n.elt=e;const o=Xt(t,n);Q.logger&&!Ut(t)&&Q.logger(e,t,n),n.error&&(H(n.error),ae(e,"htmx:error",{errorInfo:n}));let r=e.dispatchEvent(o);const a=Bt(t);if(r&&a!==t){const t=Xt(a,o.detail);r=r&&e.dispatchEvent(t)}return Vt(ce(e),function(e){r=r&&!1!==e.onEvent(t,o)&&!o.defaultPrevented}),r}let jt;function $t(e){jt=e,X()&&sessionStorage.setItem("htmx-current-path-for-history",e)}function _t(){return te().querySelector("[hx-history-elt],[data-hx-history-elt]")||te().body}function zt(e,t){if(!X())return;const n=Kt(t),o=te().title,r=window.scrollY;if(Q.config.historyCacheSize<=0)return void sessionStorage.removeItem("htmx-history-cache");e=U(e);const a=v(sessionStorage.getItem("htmx-history-cache"))||[];for(let t=0;t<a.length;t++)if(a[t].url===e){a.splice(t,1);break}const i={url:e,content:n,title:o,scroll:r};for(ae(te().body,"htmx:historyItemCreated",{item:i,cache:a}),a.push(i);a.length>Q.config.historyCacheSize;)a.shift();for(;a.length>0;)try{sessionStorage.setItem("htmx-history-cache",JSON.stringify(a));break}catch(t){fe(te().body,"htmx:historyCacheError",{cause:t,cache:a}),a.shift()}}function Jt(e){if(!X())return null;e=U(e);const t=v(sessionStorage.getItem("htmx-history-cache"))||[];for(let n=0;n<t.length;n++)if(t[n].url===e)return t[n];return null}function Kt(e){const t=Q.config.requestClass,n=e.cloneNode(!0);return ie(x(n,"."+t),function(e){G(e,t)}),ie(x(n,"[data-disabled-by-htmx]"),function(e){e.removeAttribute("disabled")}),n.innerHTML}function Gt(){const e=_t();let t=jt;X()&&(t=sessionStorage.getItem("htmx-current-path-for-history")),t=t||location.pathname+location.search;te().querySelector('[hx-history="false" i],[data-hx-history="false" i]')||(ae(te().body,"htmx:beforeHistorySave",{path:t,historyElt:e}),zt(t,e)),Q.config.historyEnabled&&history.replaceState({htmx:!0},te().title,location.href)}function Wt(e){Q.config.getCacheBusterParam&&(Y(e=e.replace(/org\.htmx\.cache-buster=[^&]*&?/,""),"&")||Y(e,"?"))&&(e=e.slice(0,-1)),Q.config.historyEnabled&&history.pushState({htmx:!0},"",e),$t(e)}function Zt(e){Q.config.historyEnabled&&history.replaceState({htmx:!0},"",e),$t(e)}function Yt(e){ie(e,function(e){e.call(void 0)})}function Qt(e){const t=new XMLHttpRequest,n={swapStyle:"innerHTML",swapDelay:0,settleDelay:0},o={path:e,xhr:t,historyElt:_t(),swapSpec:n};t.open("GET",e,!0),Q.config.historyRestoreAsHxRequest&&t.setRequestHeader("HX-Request","true"),t.setRequestHeader("HX-History-Restore-Request","true"),t.setRequestHeader("HX-Current-URL",location.href),t.onload=function(){this.status>=200&&this.status<400?(o.response=this.response,ae(te().body,"htmx:historyCacheMissLoad",o),ze(o.historyElt,o.response,n,{contextElement:o.historyElt,historyRequest:!0}),$t(o.path),ae(te().body,"htmx:historyRestore",{path:e,cacheMiss:!0,serverResponse:o.response})):fe(te().body,"htmx:historyCacheMissLoadError",o)},ae(te().body,"htmx:historyCacheMiss",o)&&t.send()}function en(e){Gt();const t=Jt(e=e||location.pathname+location.search);if(t){const n={swapStyle:"innerHTML",swapDelay:0,settleDelay:0,scroll:t.scroll},o={path:e,item:t,historyElt:_t(),swapSpec:n};ae(te().body,"htmx:historyCacheHit",o)&&(ze(o.historyElt,t.content,n,{contextElement:o.historyElt,title:t.title}),$t(o.path),ae(te().body,"htmx:historyRestore",o))}else Q.config.refreshOnHistoryMiss?Q.location.reload(!0):Qt(e)}function tn(e){let t=we(e,"hx-indicator");return null==t&&(t=[e]),ie(t,function(e){const t=oe(e);t.requestCount=(t.requestCount||0)+1,e.classList.add.call(e.classList,Q.config.requestClass)}),t}function nn(e){let t=we(e,"hx-disabled-elt");return null==t&&(t=[]),ie(t,function(e){const t=oe(e);t.requestCount=(t.requestCount||0)+1,e.setAttribute("disabled",""),e.setAttribute("data-disabled-by-htmx","")}),t}function rn(e,t){ie(e.concat(t),function(e){const t=oe(e);t.requestCount=(t.requestCount||1)-1}),ie(e,function(e){0===oe(e).requestCount&&e.classList.remove.call(e.classList,Q.config.requestClass)}),ie(t,function(e){0===oe(e).requestCount&&(e.removeAttribute("disabled"),e.removeAttribute("data-disabled-by-htmx"))})}function on(e,t){for(let n=0;n<e.length;n++){if(e[n].isSameNode(t))return!0}return!1}function sn(e){const t=e;return""!==t.name&&null!=t.name&&!t.disabled&&!g(t,"fieldset[disabled]")&&("button"!==t.type&&"submit"!==t.type&&"image"!==t.tagName&&"reset"!==t.tagName&&"file"!==t.tagName&&("checkbox"!==t.type&&"radio"!==t.type||t.checked))}function ln(e,t,n){null!=e&&null!=t&&(Array.isArray(t)?t.forEach(function(t){n.append(e,t)}):n.append(e,t))}function cn(e,t,n){if(null!=e&&null!=t){let o=n.getAll(e);o=Array.isArray(t)?o.filter(e=>t.indexOf(e)<0):o.filter(e=>e!==t),n.delete(e),ie(o,t=>n.append(e,t))}}function un(e){return e instanceof HTMLSelectElement&&e.multiple?M(e.querySelectorAll("option:checked")).map(function(e){return e.value}):e instanceof HTMLInputElement&&e.files?M(e.files):e.value}function fn(e,t,n,o,r){if(null!=o&&!on(e,o)){if(e.push(o),sn(o)){ln(ee(o,"name"),un(o),t),r&&an(o,n)}o instanceof HTMLFormElement&&(ie(o.elements,function(o){e.indexOf(o)>=0?cn(o.name,un(o),t):e.push(o),r&&an(o,n)}),new FormData(o).forEach(function(e,n){e instanceof File&&""===e.name||ln(n,e,t)}))}}function an(e,t){const n=e;n.willValidate&&(ae(n,"htmx:validation:validate"),n.checkValidity()||(ae(n,"htmx:validation:failed",{message:n.validationMessage,validity:n.validity})&&!t.length&&Q.config.reportValidityOfForms&&n.reportValidity(),t.push({elt:n,message:n.validationMessage,validity:n.validity})))}function hn(e,t){for(const n of t.keys())e.delete(n);return t.forEach(function(t,n){e.append(n,t)}),e}function dn(e,t){const n=[],o=new FormData,r=new FormData,i=[],s=oe(e);s.lastButtonClicked&&!se(s.lastButtonClicked)&&(s.lastButtonClicked=null);let l=e instanceof HTMLFormElement&&!0!==e.noValidate||"true"===a(e,"hx-validate");if(s.lastButtonClicked&&(l=l&&!0!==s.lastButtonClicked.formNoValidate),"get"!==t&&fn(n,r,i,Lt(e),l),fn(n,o,i,e,l),s.lastButtonClicked||"BUTTON"===e.tagName||"INPUT"===e.tagName&&"submit"===ee(e,"type")){const t=s.lastButtonClicked||e;ln(ee(t,"name"),t.value,r)}return ie(we(e,"hx-include"),function(e){fn(n,o,i,ce(e),l),h(e,"form")||ie(p(e).querySelectorAll(ot),function(e){fn(n,o,i,e,l)})}),hn(o,r),{errors:i,formData:o,values:kn(o)}}function pn(e,t,n){""!==e&&(e+="&"),"[object Object]"===String(n)&&(n=JSON.stringify(n));const o=encodeURIComponent(n);return e+=encodeURIComponent(t)+"="+o}function gn(e){e=Dn(e);let t="";return e.forEach(function(e,n){t=pn(t,n,e)}),t}function mn(e,t,n){const o={"HX-Request":"true","HX-Trigger":ee(e,"id"),"HX-Trigger-Name":ee(e,"name"),"HX-Target":a(t,"id"),"HX-Current-URL":location.href};return Cn(e,"hx-headers",!1,o),void 0!==n&&(o["HX-Prompt"]=n),oe(e).boosted&&(o["HX-Boosted"]="true"),o}function yn(e,t){const n=ne(t,"hx-params");if(n){if("none"===n)return new FormData;if("*"===n)return e;if(0===n.indexOf("not "))return ie(n.slice(4).split(","),function(t){t=t.trim(),e.delete(t)}),e;{const t=new FormData;return ie(n.split(","),function(n){n=n.trim(),e.has(n)&&e.getAll(n).forEach(function(e){t.append(n,e)})}),t}}return e}function xn(e){return!!ee(e,"href")&&ee(e,"href").indexOf("#")>=0}function bn(e,t){const n=t||ne(e,"hx-swap"),o={swapStyle:oe(e).boosted?"innerHTML":Q.config.defaultSwapStyle,swapDelay:Q.config.defaultSwapDelay,settleDelay:Q.config.defaultSettleDelay};if(Q.config.scrollIntoViewOnBoost&&oe(e).boosted&&!xn(e)&&(o.show="top"),n){const e=B(n);if(e.length>0)for(let t=0;t<e.length;t++){const n=e[t];if(0===n.indexOf("swap:"))o.swapDelay=d(n.slice(5));else if(0===n.indexOf("settle:"))o.settleDelay=d(n.slice(7));else if(0===n.indexOf("transition:"))o.transition="true"===n.slice(11);else if(0===n.indexOf("ignoreTitle:"))o.ignoreTitle="true"===n.slice(12);else if(0===n.indexOf("scroll:")){const e=(a=n.slice(7).split(":")).pop();var r=a.length>0?a.join(":"):null;o.scroll=e,o.scrollTarget=r}else if(0===n.indexOf("show:")){var a;const e=(a=n.slice(5).split(":")).pop();r=a.length>0?a.join(":"):null;o.show=e,o.showTarget=r}else if(0===n.indexOf("focus-scroll:")){const e=n.slice(13);o.focusScroll="true"==e}else 0==t?o.swapStyle=n:H("Unknown modifier in hx-swap: "+n)}}return o}function vn(e){return"multipart/form-data"===ne(e,"hx-encoding")||h(e,"form")&&"multipart/form-data"===ee(e,"enctype")}function wn(e,t,n){let o=null;return Vt(t,function(r){null==o&&(o=r.encodeParameters(e,n,t))}),null!=o?o:vn(t)?hn(new FormData,Dn(n)):gn(n)}function Sn(e){return{tasks:[],elts:[e]}}function En(e,t){const n=e[0],o=e[e.length-1];if(t.scroll){var r=null;t.scrollTarget&&(r=ce(ue(n,t.scrollTarget))),"top"===t.scroll&&(n||r)&&((r=r||n).scrollTop=0),"bottom"===t.scroll&&(o||r)&&((r=r||o).scrollTop=r.scrollHeight),"number"==typeof t.scroll&&b().setTimeout(function(){window.scrollTo(0,t.scroll)},0)}if(t.show){r=null;if(t.showTarget){let e=t.showTarget;"window"===t.showTarget&&(e="body"),r=ce(ue(n,e))}"top"===t.show&&(n||r)&&(r=r||n).scrollIntoView({block:"start",behavior:Q.config.scrollBehavior}),"bottom"===t.show&&(o||r)&&(r=r||o).scrollIntoView({block:"end",behavior:Q.config.scrollBehavior})}}function Cn(e,t,n,o,r){if(null==o&&(o={}),null==e)return o;const i=a(e,t);if(i){let t,a=i.trim(),s=n;if("unset"===a)return null;0===a.indexOf("javascript:")?(a=a.slice(11),s=!0):0===a.indexOf("js:")&&(a=a.slice(3),s=!0),0!==a.indexOf("{")&&(a="{"+a+"}"),t=s?On(e,function(){return r?Function("event","return ("+a+")").call(e,r):Function("return ("+a+")").call(e)},{}):v(a);for(const e in t)t.hasOwnProperty(e)&&null==o[e]&&(o[e]=t[e])}return Cn(ce(u(e)),t,n,o,r)}function On(e,t,n){return Q.config.allowEval?t():(fe(e,"htmx:evalDisallowedError"),n)}function Hn(e,t,n){return Cn(e,"hx-vars",!0,n,t)}function Tn(e,t,n){return Cn(e,"hx-vals",!1,n,t)}function Rn(e,t){return le(Hn(e,t),Tn(e,t))}function qn(e,t,n){if(null!==n)try{e.setRequestHeader(t,n)}catch(o){e.setRequestHeader(t,encodeURIComponent(n)),e.setRequestHeader(t+"-URI-AutoEncoded","true")}}function An(e){if(e.responseURL)try{const t=new URL(e.responseURL);return t.pathname+t.search}catch(t){fe(te().body,"htmx:badResponseUrl",{url:e.responseURL})}}function T(e,t){return t.test(e.getAllResponseHeaders())}function Ln(e,t,n){if(e=e.toLowerCase(),n){if(n instanceof Element||"string"==typeof n)return he(e,t,null,null,{targetOverride:w(n)||ve,returnPromise:!0});{let o=w(n.target);return(n.target&&!o||n.source&&!o&&!w(n.source))&&(o=ve),he(e,t,w(n.source),n.event,{handler:n.handler,headers:n.headers,values:n.values,targetOverride:o,swapOverride:n.swap,select:n.select,returnPromise:!0,push:n.push,replace:n.replace,selectOOB:n.selectOOB})}}return he(e,t,null,null,{returnPromise:!0})}function Nn(e){const t=[];for(;e;)t.push(e),e=e.parentElement;return t}function In(e,t,n){const o=new URL(t,"about:"!==location.protocol?location.href:window.origin),r=("about:"!==location.protocol?location.origin:window.origin)===o.origin;return!(Q.config.selfRequestsOnly&&!r)&&ae(e,"htmx:validateUrl",le({url:o,sameHost:r},n))}function Dn(e){if(e instanceof FormData)return e;const t=new FormData;for(const n in e)e.hasOwnProperty(n)&&(e[n]&&"function"==typeof e[n].forEach?e[n].forEach(function(e){t.append(n,e)}):"object"!=typeof e[n]||e[n]instanceof Blob?t.append(n,e[n]):t.append(n,JSON.stringify(e[n])));return t}function Pn(e,t,n){return new Proxy(n,{get:function(n,o){return"number"==typeof o?n[o]:"length"===o?n.length:"push"===o?function(o){n.push(o),e.append(t,o)}:"function"==typeof n[o]?function(){n[o].apply(n,arguments),e.delete(t),n.forEach(function(n){e.append(t,n)})}:n[o]&&1===n[o].length?n[o][0]:n[o]},set:function(n,o,r){return n[o]=r,e.delete(t),n.forEach(function(n){e.append(t,n)}),!0}})}function kn(e){return new Proxy(e,{get:function(t,n){if("symbol"==typeof n){const o=Reflect.get(t,n);return"function"==typeof o?function(){return o.apply(e,arguments)}:o}if("toJSON"===n)return()=>Object.fromEntries(e);if(n in t&&"function"==typeof t[n])return function(){return e[n].apply(e,arguments)};const o=e.getAll(n);return 0===o.length?void 0:1===o.length?o[0]:Pn(t,n,o)},set:function(e,t,n){return"string"==typeof t&&(e.delete(t),n&&"function"==typeof n.forEach?n.forEach(function(n){e.append(t,n)}):"object"!=typeof n||n instanceof Blob?e.append(t,n):e.append(t,JSON.stringify(n)),!0)},deleteProperty:function(e,t){return"string"==typeof t&&e.delete(t),!0},ownKeys:function(e){return Reflect.ownKeys(Object.fromEntries(e))},getOwnPropertyDescriptor:function(e,t){return Reflect.getOwnPropertyDescriptor(Object.fromEntries(e),t)}})}function he(e,t,n,o,r,a){let i=null,s=null;if((r=null!=r?r:{}).returnPromise&&"undefined"!=typeof Promise)var l=new Promise(function(e,t){i=e,s=t});null==n&&(n=te().body);const c=r.handler||Vn,d=r.select||null;if(!se(n))return re(i),l;const u=r.targetOverride||ce(Ee(n));if(null==u||u==ve)return fe(n,"htmx:targetError",{target:ne(n,"hx-target")}),re(s),l;let f=oe(n);const m=f.lastButtonClicked;if(m){const n=ee(m,"formaction");null!=n&&(t=n);const o=ee(m,"formmethod");if(null!=o){if(!de.includes(o.toLowerCase()))return re(i),l;e=o}}const h=ne(n,"hx-confirm");if(void 0===a){const a=function(a){return he(e,t,n,o,r,!!a)};if(!1===ae(n,"htmx:confirm",{target:u,elt:n,path:t,verb:e,triggeringEvent:o,etc:r,issueRequest:a,question:h}))return re(i),l}let p=n,g=ne(n,"hx-sync"),b=null,y=!1;if(g){const e=g.split(":"),t=e[0].trim();if(p="this"===t?Se(n,"hx-sync"):ce(ue(n,t)),g=(e[1]||"drop").trim(),f=oe(p),"drop"===g&&f.xhr&&!0!==f.abortable)return re(i),l;if("abort"===g){if(f.xhr)return re(i),l;y=!0}else if("replace"===g)ae(p,"htmx:abort");else if(0===g.indexOf("queue")){b=(g.split(" ")[1]||"last").trim()}}if(f.xhr){if(!f.abortable){if(null==b){if(o){const e=oe(o);e&&e.triggerSpec&&e.triggerSpec.queue&&(b=e.triggerSpec.queue)}null==b&&(b="last")}return null==f.queuedRequests&&(f.queuedRequests=[]),"first"===b&&0===f.queuedRequests.length||"all"===b?f.queuedRequests.push(function(){he(e,t,n,o,r)}):"last"===b&&(f.queuedRequests=[],f.queuedRequests.push(function(){he(e,t,n,o,r)})),re(i),l}ae(p,"htmx:abort")}const v=new XMLHttpRequest;f.xhr=v,f.abortable=y;const w=function(){if(f.xhr=null,f.abortable=!1,null!=f.queuedRequests&&f.queuedRequests.length>0){f.queuedRequests.shift()()}},x=ne(n,"hx-prompt");if(x){var S=prompt(x);if(null===S||!ae(n,"htmx:prompt",{prompt:S,target:u}))return re(i),w(),l}if(h&&!a&&!confirm(h))return re(i),w(),l;let E=mn(n,u,S);"get"===e||vn(n)||(E["Content-Type"]="application/x-www-form-urlencoded"),r.headers&&(E=le(E,r.headers));const T=dn(n,e);let k=T.errors;const L=T.formData;r.values&&hn(L,Dn(r.values));const C=hn(L,Dn(Rn(n,o)));let A=yn(C,n);Q.config.getCacheBusterParam&&"get"===e&&A.set("org.htmx.cache-buster",ee(u,"id")||"true"),null!=t&&""!==t||(t=location.href);const O=Cn(n,"hx-request"),H=oe(n).boosted;let I=Q.config.methodsThatUseUrlParams.indexOf(e)>=0;const q={boosted:H,useUrlParams:I,formData:A,parameters:kn(A),unfilteredFormData:C,unfilteredParameters:kn(C),headers:E,elt:n,target:u,verb:e,errors:k,withCredentials:r.credentials||O.credentials||Q.config.withCredentials,timeout:r.timeout||O.timeout||Q.config.timeout,path:t,triggeringEvent:o};if(!ae(n,"htmx:configRequest",q))return re(i),w(),l;if(t=q.path,e=q.verb,E=q.headers,A=Dn(q.parameters),k=q.errors,I=q.useUrlParams,k&&k.length>0)return ae(n,"htmx:validation:halted",q),re(i),w(),l;const R=t.split("#"),D=R[0],$=R[1];let M=t;if(I){M=D;!A.keys().next().done&&(M.indexOf("?")<0?M+="?":M+="&",M+=gn(A),$&&(M+="#"+$))}if(!In(n,M,q))return fe(n,"htmx:invalidPath",q),re(s),w(),l;if(v.open(e.toUpperCase(),M,!0),v.overrideMimeType("text/html"),v.withCredentials=q.withCredentials,v.timeout=q.timeout,O.noHeaders);else for(const e in E)if(E.hasOwnProperty(e)){const t=E[e];qn(v,e,t)}const N={xhr:v,target:u,requestConfig:q,etc:r,boosted:H,select:d,pathInfo:{requestPath:t,finalRequestPath:M,responsePath:null,anchor:$}};if(v.onload=function(){try{const e=Nn(n);if(N.pathInfo.responsePath=An(v),c(n,N),!0!==N.keepIndicators&&rn(P,F),ae(n,"htmx:afterRequest",N),ae(n,"htmx:afterOnLoad",N),!se(n)){let t=null;for(;e.length>0&&null==t;){const n=e.shift();se(n)&&(t=n)}t&&(ae(t,"htmx:afterRequest",N),ae(t,"htmx:afterOnLoad",N))}re(i)}catch(e){throw fe(n,"htmx:onLoadError",le({error:e},N)),e}finally{w()}},v.onerror=function(){rn(P,F),fe(n,"htmx:afterRequest",N),fe(n,"htmx:sendError",N),re(s),w()},v.onabort=function(){rn(P,F),fe(n,"htmx:afterRequest",N),fe(n,"htmx:sendAbort",N),re(s),w()},v.ontimeout=function(){rn(P,F),fe(n,"htmx:afterRequest",N),fe(n,"htmx:timeout",N),re(s),w()},!ae(n,"htmx:beforeRequest",N))return re(i),w(),l;var P=tn(n),F=nn(n);ie(["loadstart","loadend","progress","abort"],function(e){ie([v,v.upload],function(t){t.addEventListener(e,function(t){ae(n,"htmx:xhr:"+e,{lengthComputable:t.lengthComputable,loaded:t.loaded,total:t.total})})})}),ae(n,"htmx:beforeSend",N);const B=I?null:wn(v,n,A);return v.send(B),l}function Mn(e,t){const n=t.xhr;let o=null,r=null;if(T(n,/HX-Push:/i)?(o=n.getResponseHeader("HX-Push"),r="push"):T(n,/HX-Push-Url:/i)?(o=n.getResponseHeader("HX-Push-Url"),r="push"):T(n,/HX-Replace-Url:/i)&&(o=n.getResponseHeader("HX-Replace-Url"),r="replace"),o)return"false"===o?{}:{type:r,path:o};const a=t.pathInfo.finalRequestPath,i=t.pathInfo.responsePath,s=t.etc.push||ne(e,"hx-push-url"),l=t.etc.replace||ne(e,"hx-replace-url"),c=oe(e).boosted;let d=null,u=null;return s?(d="push",u=s):l?(d="replace",u=l):c&&(d="push",u=i||a),u?"false"===u?{}:("true"===u&&(u=i||a),t.pathInfo.anchor&&-1===u.indexOf("#")&&(u=u+"#"+t.pathInfo.anchor),{type:d,path:u}):{}}function Fn(e,t){return new RegExp(e.code).test(t.toString(10))}function Bn(e){for(var t=0;t<Q.config.responseHandling.length;t++){var n=Q.config.responseHandling[t];if(Fn(n,e.status))return n}return{swap:!1}}function Xn(e){if(e){const t=f("title");t?t.textContent=e:window.document.title=e}}function Un(e,t){if("this"===t)return e;const n=ce(ue(e,t));if(null==n)throw fe(e,"htmx:targetError",{target:t}),new Error(`Invalid re-target ${t}`);return n}function Vn(e,t){const n=t.xhr;let o=t.target;const r=t.etc,a=t.select;if(!ae(e,"htmx:beforeOnLoad",t))return;if(T(n,/HX-Trigger:/i)&&Je(n,"HX-Trigger",e),T(n,/HX-Location:/i)){let e=n.getResponseHeader("HX-Location");var i={};return 0===e.indexOf("{")&&(e=(i=v(e)).path,delete i.path),i.push=i.push||"true",void Ln("get",e,i)}const s=T(n,/HX-Refresh:/i)&&"true"===n.getResponseHeader("HX-Refresh");if(T(n,/HX-Redirect:/i))return t.keepIndicators=!0,Q.location.href=n.getResponseHeader("HX-Redirect"),void(s&&Q.location.reload());if(s)return t.keepIndicators=!0,void Q.location.reload();const l=Mn(e,t),c=Bn(n),d=c.swap;let u=!!c.error,f=Q.config.ignoreTitle||c.ignoreTitle,m=c.select;c.target&&(t.target=Un(e,c.target));var h=r.swapOverride;null==h&&c.swapOverride&&(h=c.swapOverride),T(n,/HX-Retarget:/i)&&(t.target=Un(e,n.getResponseHeader("HX-Retarget"))),T(n,/HX-Reswap:/i)&&(h=n.getResponseHeader("HX-Reswap"));var p=n.response,g=le({shouldSwap:d,serverResponse:p,isError:u,ignoreTitle:f,selectOverride:m,swapOverride:h},t);if((!c.event||ae(o,c.event,g))&&ae(o,"htmx:beforeSwap",g)){if(o=g.target,p=g.serverResponse,u=g.isError,f=g.ignoreTitle,m=g.selectOverride,h=g.swapOverride,t.target=o,t.failed=u,t.successful=!u,g.shouldSwap){286===n.status&&lt(e),Vt(e,function(t){p=t.transformResponse(p,n,e)}),l.type&&Gt();var b=bn(e,h);b.hasOwnProperty("ignoreTitle")||(b.ignoreTitle=f),o.classList.add(Q.config.swappingClass),a&&(m=a),T(n,/HX-Reselect:/i)&&(m=n.getResponseHeader("HX-Reselect"));const i=r.selectOOB||ne(e,"hx-select-oob"),s=ne(e,"hx-select");ze(o,p,b,{select:"unset"===m?null:m||s,selectOOB:i,eventInfo:t,anchor:t.pathInfo.anchor,contextElement:e,afterSwapCallback:function(){if(T(n,/HX-Trigger-After-Swap:/i)){let t=e;se(e)||(t=te().body),Je(n,"HX-Trigger-After-Swap",t)}},afterSettleCallback:function(){if(T(n,/HX-Trigger-After-Settle:/i)){let t=e;se(e)||(t=te().body),Je(n,"HX-Trigger-After-Settle",t)}},beforeSwapCallback:function(){l.type&&(ae(te().body,"htmx:beforeHistoryUpdate",le({history:l},t)),"push"===l.type?(Wt(l.path),ae(te().body,"htmx:pushedIntoHistory",{path:l.path})):(Zt(l.path),ae(te().body,"htmx:replacedInHistory",{path:l.path})))}})}u&&fe(e,"htmx:responseError",le({error:"Response Status Error Code "+n.status+" from "+t.pathInfo.requestPath},t))}}$t(location.pathname+location.search);const jn={};function $n(){return{init:function(e){return null},getSelectors:function(){return null},onEvent:function(e,t){return!0},transformResponse:function(e,t,n){return e},isInlineSwap:function(e){return!1},handleSwap:function(e,t,n,o){return!1},encodeParameters:function(e,t,n){return null}}}function _n(e,t){t.init&&t.init(n),jn[e]=le($n(),t)}function zn(e){delete jn[e]}function Jn(e,t,n){if(null==t&&(t=[]),null==e)return t;null==n&&(n=[]);const o=a(e,"hx-ext");return o&&ie(o.split(","),function(e){if("ignore:"!=(e=e.replace(/ /g,"")).slice(0,7)){if(n.indexOf(e)<0){const n=jn[e];n&&t.indexOf(n)<0&&t.push(n)}}else n.push(e.slice(7))}),Jn(ce(u(e)),t,n)}var Kn=!1;function Gn(e){Kn||"complete"===te().readyState?e():te().addEventListener("DOMContentLoaded",e)}function Wn(){if(!1!==Q.config.includeIndicatorStyles){const e=Q.config.inlineStyleNonce?` nonce="${Q.config.inlineStyleNonce}"`:"",t=Q.config.indicatorClass,n=Q.config.requestClass;te().head.insertAdjacentHTML("beforeend",`<style${e}>.${t}{opacity:0;visibility: hidden} .${n} .${t}, .${n}.${t}{opacity:1;visibility: visible;transition: opacity 200ms ease-in}</style>`)}}function Zn(){const e=te().querySelector('meta[name="htmx-config"]');return e?v(e.content):null}function Yn(){const e=Zn();e&&(Q.config=le(Q.config,e))}return te().addEventListener("DOMContentLoaded",function(){Kn=!0}),Gn(function(){Yn(),Wn();let e=te().body;Ft(e);const t=te().querySelectorAll("[hx-trigger='restored'],[data-hx-trigger='restored']");e.addEventListener("htmx:abort",function(e){const t=oe(e.detail.elt||e.target);t&&t.xhr&&t.xhr.abort()});const n=window.onpopstate?window.onpopstate.bind(window):null;window.onpopstate=function(e){e.state&&e.state.htmx?(en(),ie(t,function(e){ae(e,"htmx:restored",{document:te(),triggerEvent:ae})})):n&&n(e)},b().setTimeout(function(){ae(e,"htmx:load",{}),e=null},0)}),Q}();!function(){function e(n){if(void 0!==n.preloadState)return;if(!function(e){const t=["href","hx-get","data-hx-get"],n=e=>t.some(t=>e.hasAttribute(t))||"get"===e.method,o=e.form instanceof HTMLFormElement&&n(e.form)&&l(e);if(!n(e)&&!o)return!1;if(e instanceof HTMLInputElement&&e.closest("label"))return!1;return!0}(n))return;if(n instanceof HTMLFormElement){const t=n;if(!(t.hasAttribute("method")&&"get"===t.method||t.hasAttribute("hx-get")||t.hasAttribute("hx-data-get")))return;for(let n=0;n<t.elements.length;n++){const o=t.elements.item(n);e(o),"labels"in o&&o.labels.forEach(e)}return}let o=s(n,"preload");n.preloadAlways=o&&o.includes("always"),n.preloadAlways&&(o=o.replace("always","").trim());let r=o||"mousedown";const a="mouseover"===r;n.addEventListener(r,t(n,a),{passive:!0}),"mousedown"!==r&&"mouseover"!==r||n.addEventListener("touchstart",t(n),{passive:!0}),"mouseover"===r&&n.addEventListener("mouseout",function(e){e.target===n&&"TIMEOUT"===n.preloadState&&(n.preloadState="READY")},{passive:!0}),n.preloadState="READY",htmx.trigger(n,"preload:init")}function t(e,t=!1){return function(){if("READY"===e.preloadState){if(t){e.preloadState="TIMEOUT";const t=100;return void window.setTimeout(function(){"TIMEOUT"===e.preloadState&&(e.preloadState="READY",n(e))},t)}n(e)}}}function n(e){if("READY"!==e.preloadState)return;e.preloadState="LOADING";const t=e.getAttribute("hx-get")||e.getAttribute("data-hx-get");if(t)return void r(t,e);const n="true"===s(e,"hx-boost");if(e.hasAttribute("href")){const t=e.getAttribute("href");return void(n?r(t,e):a(t,e))}if(l(e)){const t=e.form.getAttribute("action")||e.form.getAttribute("hx-get")||e.form.getAttribute("data-hx-get"),i=htmx.values(e.form),s=!(e.form.getAttribute("hx-get")||e.form.getAttribute("data-hx-get")||n)?a:r;if("submit"===e.type)return void s(t,e.form,i);const l=e.name||e.control.name;if("SELECT"===e.tagName)return void Array.from(e.options).forEach(n=>{if(n.selected)return;i.set(l,n.value);const r=o(e.form,i);s(t,e.form,r)});const c=e.getAttribute("type")||e.control.getAttribute("type"),d=e.value||e.control?.value;if("radio"===c)i.set(l,d);else if("checkbox"===c){const e=i.getAll(l);e.includes(d)?i[l]=e.filter(e=>e!==d):i.append(l,d)}const u=o(e.form,i);return void s(t,e.form,u)}}function o(e,t){const n=e.elements,o=new FormData;for(let e=0;e<n.length;e++){const r=n.item(e);t.has(r.name)&&"SELECT"===r.tagName?o.append(r.name,t.get(r.name)):t.has(r.name)&&t.getAll(r.name).includes(r.value)&&o.append(r.name,r.value)}return o}function r(e,t,n=void 0){htmx.ajax("GET",e,{source:t,values:n,headers:{"HX-Preloaded":"true"}})}function a(e,t,n=void 0){const o=new XMLHttpRequest;n&&(e+="?"+new URLSearchParams(n.entries()).toString()),o.open("GET",e),o.setRequestHeader("HX-Preloaded","true"),o.onload=function(){i(t,o.responseText)},o.send()}function i(e,t){e.preloadState=e.preloadAlways?"READY":"DONE","true"===s(e,"preload-images")&&(document.createElement("div").innerHTML=t)}function s(e,t){if(null!=e)return e.getAttribute(t)||e.getAttribute("data-"+t)||s(e.parentElement,t)}function l(e){if(e instanceof HTMLInputElement||e instanceof HTMLButtonElement){const t=e.getAttribute("type");return["checkbox","radio","submit"].includes(t)}return e instanceof HTMLLabelElement?e.control&&l(e.control):e instanceof HTMLSelectElement}htmx.defineExtension("preload",{onEvent:function(t,n){if("htmx:afterProcessNode"===t){const t=n.target||n.detail.elt;return void[...t.hasAttribute("preload")?[t]:[],...t.querySelectorAll("[preload]")].forEach(function(t){e(t),t.querySelectorAll("[href],[hx-get],[data-hx-get]").forEach(e)})}if("htmx:beforeRequest"===t){const e=n.detail.requestConfig.headers;if(!("HX-Preloaded"in e)||"true"!==e["HX-Preloaded"])return;n.preventDefault();const t=n.detail.xhr;t.onload=function(){i(n.detail.elt,t.responseText)},t.onerror=null,t.onabort=null,t.ontimeout=null,t.send()}}})}();export{default as toast}from"./standard.toast.js";export{default as comments,GitHubComments}from"./standard.comment.js";export{StandardLab}from"./standard.lab.js";export{ImageZoom,default as imageZoom}from"./standard.image-zoom.js";export{initCopyButtons}from"./standard.copy-buttons.js";export{initScrollWrappers}from"./standard.scroll-wrappers.js";export{initAstro,astroHelpers}from"./standard.astro.js";export{initHTMX}from"./standard.htmx.js";import{default as imageZoom}from"./standard.image-zoom.js";import{initCopyButtons}from"./standard.copy-buttons.js";import{initScrollWrappers}from"./standard.scroll-wrappers.js";const standard={version:"@VERSION_PLACEHOLDER@",getInstance(e){if("undefined"==typeof window)return null;switch(e){case"toast":return window.toast||null;case"comments":return window.comments||null;case"StandardLab":return window.StandardLab||null;case"imageZoom":return window.imageZoom||null;default:return console.warn(`Unknown module: ${e}. Available: toast, comments, StandardLab, imageZoom`),null}},getInstances:()=>"undefined"==typeof window?{toast:null,comments:null,StandardLab:null,imageZoom:null}:{toast:window.toast||null,comments:window.comments||null,StandardLab:window.StandardLab||null,imageZoom:window.imageZoom||null},detectFramework:()=>"undefined"==typeof window?"none":window.startViewTransition?"astro-view-transitions":window.astro?"astro":window.htmx?"htmx (deprecated)":"none",refresh(){"undefined"!=typeof window&&(window.imageZoom&&"function"==typeof window.imageZoom.rescan&&window.imageZoom.rescan(),"function"==typeof initCopyButtons&&initCopyButtons(),"function"==typeof initScrollWrappers&&initScrollWrappers())},init(){"undefined"!=typeof window&&(this.refresh(),document.addEventListener("astro:page-load",()=>{this.refresh()}),document.body.addEventListener("htmx:afterSettle",()=>{this.refresh()}))},info(){const e=this.detectFramework();console.log(`Standard Framework v${this.version}`),console.log(`Framework detected: ${e}`),console.log("Modules:",["toast - Notification system","comments - GitHub-backed comments","StandardLab - Design token inspector","imageZoom - Click-to-zoom lightbox","initCopyButtons() - Copy buttons for code blocks","initScrollWrappers() - Scroll shadows"]),console.log("Integrations:",[" initAstro() - For Astro View Transitions API (recommended)"," initHTMX() - For HTMX navigation (legacy, use View Transitions instead)"]),console.log("\n Learn more:"),console.log("  Astro View Transitions: https://docs.astro.build/en/guides/view-transitions/")}};export default standard;"undefined"!=typeof window&&(window.standard=standard,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>standard.init()):standard.init(),console.log("Standard Framework loaded. Type window.standard.info() for help."));const TOAST_DEFAULTS={duration:4e3,position:"top-center",pauseOnHover:!0,showProgress:!0,closeButton:!1,maxToasts:5,animation:"slide",role:"status"},toastContainers={};let toastNotificationQueue=[],activeToastCount=0;function getContainer(e){if(toastContainers[e])return toastContainers[e];const t=document.createElement("div");return t.className=`toast-container toast-container-${e}`,t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","false"),document.body.appendChild(t),toastContainers[e]=t,t}function createToast(e,t,n){const o=document.createElement("div");o.className=`toast toast-${t}`,o.setAttribute("role",n.role);const r=document.createElement("div");r.className="toast-content";const a=document.createElement("span");a.className="toast-icon",a.setAttribute("aria-hidden","true"),a.textContent=getIcon(t);const i=document.createElement("div");if(i.className="toast-message",i.textContent=e,r.appendChild(a),r.appendChild(i),n.closeButton){const e=document.createElement("button");e.className="toast-close",e.setAttribute("aria-label","Close notification"),e.innerHTML="",e.addEventListener("click",()=>dismissToast(o)),r.appendChild(e)}if(o.appendChild(r),n.showProgress&&n.duration>0){const e=document.createElement("div");e.className="toast-progress",o.appendChild(e),o._progressBar=e}return o}function getIcon(e){return{success:"",error:"",warning:"",info:""}[e]||""}function showToast(e,t="info",n={}){const o={...TOAST_DEFAULTS,...n};if(activeToastCount>=o.maxToasts)return void toastNotificationQueue.push({message:e,type:t,options:o});const r=getContainer(o.position),a=createToast(e,t,o);let i,s;r.appendChild(a),activeToastCount++,a.offsetHeight,requestAnimationFrame(()=>{a.classList.add("toast-visible")});let l=o.duration;function c(){o.duration<=0||(s=Date.now(),i=setTimeout(()=>{dismissToast(a)},l),a._progressBar&&(a._progressBar.style.transition=`width ${l}ms linear`,a._progressBar.style.width="0%"))}o.pauseOnHover&&(a.addEventListener("mouseenter",function(){if(!(o.duration<=0)&&(clearTimeout(i),l-=Date.now()-s,a._progressBar)){const e=window.getComputedStyle(a._progressBar);a._progressBar.style.width=e.width,a._progressBar.style.transition="none"}}),a.addEventListener("mouseleave",c)),c();const d=e=>{"Escape"===e.key&&dismissToast(a)};return document.addEventListener("keydown",d),a._escapeHandler=d,a}function dismissToast(e){e.classList.remove("toast-visible"),e.classList.add("toast-dismissing"),setTimeout(()=>{if(e.parentNode&&e.parentNode.removeChild(e),e._escapeHandler&&document.removeEventListener("keydown",e._escapeHandler),activeToastCount--,toastNotificationQueue.length>0){const e=toastNotificationQueue.shift();showToast(e.message,e.type,e.options)}},300)}const toast={success:(e,t={})=>showToast(e,"success",t),error:(e,t={})=>showToast(e,"error",{...t,role:"alert"}),warning:(e,t={})=>showToast(e,"warning",t),info:(e,t={})=>showToast(e,"info",t),show:(e,t="info",n={})=>showToast(e,t,n),dismissAll(){Object.values(toastContainers).forEach(e=>{e.querySelectorAll(".toast").forEach(dismissToast)}),toastNotificationQueue=[]},configure(e){Object.assign(TOAST_DEFAULTS,e)}};export default toast;
/**
 * Image Zoom - Standalone lightbox with keyboard navigation
 *
 * A lightweight image zoom library with full featured lightbox experience.
 * Click any image to zoom, use arrow keys to navigate, ESC to close.
 *
 * Features:
 * - Click to zoom in/out
 * - Keyboard navigation (/ arrows, ESC to close)
 * - Click backdrop to close
 * - Auto-closes on scroll
 * - Wraps around image gallery
 * - Custom events for extensibility
 * - Configurable selectors
 * - Graceful degradation (CSS fallback without JS)
 * - HTMX compatible via rescan() method
 *
 * @version @VERSION_PLACEHOLDER@
 * @license MIT
 */export class ImageZoom{constructor(e={}){this.options={selector:"img:not([data-no-zoom])",enableKeyboardNav:!0,...e},this.overlay=null,this.originalImage=null,this.images=[],this.boundKeydownHandler=this.handleKeydown.bind(this),this.boundCloseHandler=this.close.bind(this),this.boundClickHandler=this.handleClick.bind(this),this.init()}init(){document.documentElement.classList.add("js-image-zoom-enabled"),document.addEventListener("click",this.boundClickHandler),console.log("[ImageZoom] Initialized and click listener attached")}rescan(){return this.refreshImages(),document.documentElement.classList.add("js-image-zoom-enabled"),document.removeEventListener("click",this.boundClickHandler),document.addEventListener("click",this.boundClickHandler),console.log(`[ImageZoom] Rescanned. Found ${this.images.length} images. Listener rebound.`),this.images.length}refreshImages(){return this.images=Array.from(document.querySelectorAll(this.options.selector)),this.images.length}handleClick(e){const t=e.target.closest(this.options.selector);t?(console.log("[ImageZoom] Click detected on zoomable image",t),this.overlay?(e.preventDefault(),this.close()):(e.preventDefault(),e.stopPropagation(),this.open(t))):this.overlay&&(e.preventDefault(),this.close())}handleKeydown(e){if(this.overlay)switch(e.key){case"Escape":e.preventDefault(),this.close();break;case"ArrowLeft":case"ArrowUp":e.preventDefault(),this.navigate(-1);break;case"ArrowRight":case"ArrowDown":e.preventDefault(),this.navigate(1)}}open(e){if(this.overlay)return;this.originalImage=e,this.overlay=document.createElement("div"),this.overlay.className="image-zoom-overlay";const t=new Image;t.src=this.originalImage.src,t.alt=this.originalImage.alt,this.overlay.appendChild(t),document.body.appendChild(this.overlay),document.documentElement.classList.add("image-zoomed-active"),this.options.enableKeyboardNav&&document.addEventListener("keydown",this.boundKeydownHandler),window.addEventListener("scroll",this.boundCloseHandler),requestAnimationFrame(()=>{this.overlay.classList.add("is-visible")})}close(){this.overlay&&(window.removeEventListener("scroll",this.boundCloseHandler),this.overlay.classList.remove("is-visible"),this.overlay.addEventListener("transitionend",()=>{this.overlay&&(this.overlay.remove(),this.overlay=null)},{once:!0}),document.documentElement.classList.remove("image-zoomed-active"),this.originalImage=null,this.options.enableKeyboardNav&&document.removeEventListener("keydown",this.boundKeydownHandler))}navigate(e){if(!this.originalImage)return;this.images=Array.from(document.querySelectorAll(this.options.selector));const t=this.images.indexOf(this.originalImage);if(-1===t)return;const n=(t+e+this.images.length)%this.images.length,o=this.images[n];if(o){const e=this.overlay.querySelector("img");e.src=o.src,e.alt=o.alt,this.originalImage=o}}destroy(){this.overlay&&this.close(),document.removeEventListener("click",this.boundClickHandler)}}if("undefined"!=typeof window){window.ImageZoom=ImageZoom;const e=()=>{window.imageZoom=new ImageZoom};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}export default ImageZoom;export function initScrollWrappers(e=document){e.querySelectorAll(".scroll:not([data-scroll-initialized])").forEach(e=>{const t=()=>{if(!(e.scrollWidth>e.clientWidth))return void e.classList.remove("show-left-shadow","show-right-shadow");const t=e.scrollLeft,n=e.scrollWidth-e.clientWidth;e.classList.toggle("show-right-shadow",0===t),e.classList.toggle("show-left-shadow",t>=n-1)};t(),e.addEventListener("scroll",t,{passive:!0}),window.addEventListener("resize",t),e.dataset.scrollInitialized="true"})}"undefined"!=typeof document&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{initScrollWrappers(document)}):initScrollWrappers(document)),"undefined"!=typeof window&&(window.initializeScrollWrappers=initScrollWrappers);export function initCopyButtons(){navigator.clipboard?document.querySelectorAll("pre > code").forEach(e=>{if(e.parentNode.querySelector(".copy-button"))return;const t=document.createElement("button");t.className="copy-button",t.textContent="Copy",t.setAttribute("aria-label","Copy code to clipboard"),t.onclick=async()=>{try{await navigator.clipboard.writeText(e.innerText),t.textContent="Copied!",t.classList.add("copied"),setTimeout(()=>{t.textContent="Copy",t.classList.remove("copied")},2e3)}catch(e){console.error("Failed to copy:",e),t.textContent="Failed",setTimeout(()=>{t.textContent="Copy"},2e3)}},e.parentNode.append(t)}):console.warn("Clipboard API not available (requires HTTPS)")}"undefined"!=typeof document&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",initCopyButtons):initCopyButtons()),"undefined"!=typeof window&&(window.initCopyButtons=initCopyButtons)
/*!
 * Standard System Inspector - Minimal Debug Interface
 *
 * A minimalist debug interface for the Standard Framework
 * Philosophy: Felt, not seen. Present when needed, invisible when not.
 *
 * HTMX-COMPATIBLE VERSION: Includes a .refresh() method and stable IDs
 * to work with htmx:load events and hx-preserve.
 *
 * @version @VERSION_PLACEHOLDER@
 */;export class StandardLab{constructor(){this.state="dormant",this.badge=null,this.panel=null,this.currentTab="typography",this.googleFontsLoaded=new Set,this.colorScheme=this.detectColorScheme(),this.modifiedTokens=new Set,this.position=this.loadPosition(),this.version=document.documentElement.dataset.standardVersion,this.customThemes=[],this.sliderConfig={"--optical-ratio":{min:1,max:2,step:.01,unit:""},"--line-height":{min:1,max:2,step:.05,unit:""},"--font-size":{min:0,max:2,step:.05,unit:"em"},"--ratio-golden":{min:1,max:2,step:.01,unit:""},"--ratio-silver":{min:1,max:3,step:.01,unit:""},"--ratio-wholestep":{min:1,max:3,step:.01,unit:""},"--ratio-halfstep":{min:1,max:2,step:.01,unit:""},"--font-weight":{min:100,max:900,step:100,unit:""},"--bold-weight":{min:100,max:900,step:100,unit:""},"--radius":{min:0,max:2,step:.05,unit:"rem"},"--line-width":{min:0,max:10,step:.5,unit:"px"},"--base":{min:.5,max:3,step:.05,unit:"rem"},"--base-gap":{min:0,max:3,step:.05,unit:"rem"},"--base-block-gap":{min:0,max:3,step:.05,unit:"rem"},"--body-padding":{min:0,max:5,step:.25,unit:"rem"},"--gap":{min:0,max:3,step:.05,unit:"rem"},"--grid-gap":{min:0,max:3,step:.05,unit:"rem"}},this.coreTokens={typography:["--font-text","--font-header","--font-monospace","--font-interface","--font-size","--optical-ratio","--line-height","--font-weight","--bold-weight","--font-letter-spacing","--font-header-letter-spacing","--font-header-weight"],layout:["--line-width","--line-width-xs","--line-width-s","--line-width-m","--line-width-l","--line-width-xl","--base","--base-gap","--base-block-gap","--body-padding","--gap","--grid-gap"],colors:this.getColorTokens(),advanced:["--ratio-golden","--ratio-silver","--ratio-wholestep","--ratio-halfstep","--radius","--blur","--transition","--line-width","--shadow","--border"]},this.defaults={},this.init()}init(){this.storeDefaults(),this.createBadge(),this.initKeyboardShortcuts(),this.restoreTheme(),this.restoreDebugMode();const e=document.documentElement.getAttribute("data-theme");(document.documentElement.classList.contains("standard-debug")||"blueprint"===e)&&this.injectGridDebugOverlays(),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{this.colorScheme=e.matches?"dark":"light","full"===this.state&&this.refreshTokenList()}),this.initModificationTracking()}restoreTheme(){const e=sessionStorage.getItem("standard-theme");e&&document.documentElement.setAttribute("data-theme",e)}restoreDebugMode(){const e=sessionStorage.getItem("standard-debug-mode");"true"===e?document.documentElement.classList.add("standard-debug"):"false"===e&&document.documentElement.classList.remove("standard-debug")}saveDebugMode(e){sessionStorage.setItem("standard-debug-mode",e.toString())}addTheme(e,t){this.customThemes.some(t=>t.value===e)||(this.customThemes.push({value:e,label:t}),"quick"===this.state&&this.createQuickPanel())}storeDefaults(){[...this.coreTokens.typography,...this.coreTokens.layout,...this.coreTokens.colors,...this.coreTokens.advanced].forEach(e=>{const t=getComputedStyle(document.documentElement).getPropertyValue(e).trim();t&&(this.defaults[e]=t)})}getColorTokens(){const e="light"===this.colorScheme?"light":"dark";return[`--color-${e}-background`,`--color-${e}-foreground`,`--color-${e}-accent`,`--color-${e}-red`,`--color-${e}-orange`,`--color-${e}-yellow`,`--color-${e}-green`,`--color-${e}-cyan`,`--color-${e}-blue`,`--color-${e}-purple`,`--color-${e}-pink`]}detectColorScheme(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}loadPosition(){const e=localStorage.getItem("standard-lab-position");return e?JSON.parse(e):{bottom:16,right:16}}savePosition(){localStorage.setItem("standard-lab-position",JSON.stringify(this.position))}createBadge(){this.badge||(this.badge=document.createElement("button"),this.badge.id="standard-lab-badge-container",this.badge.className="standard-lab-badge",this.badge.setAttribute("aria-label","Open Standard Inspector"),this.badge.setAttribute("title","Standard Inspector (Shift+Cmd+S)"),this.badge.setAttribute("style","color:var(--color-subtle);"),this.badge.style.bottom=`${this.position.bottom}px`,this.badge.style.right=`${this.position.right}px`,this.badge.innerHTML="",this.badge.addEventListener("click",()=>this.openQuick()),this.makeDraggable(this.badge),document.body.appendChild(this.badge),this.updateBadge(),this.injectStyles())}updateBadge(){if(!this.badge)return;const e=this.modifiedTokens.size;e>0?this.badge.setAttribute("data-modified",e):this.badge.removeAttribute("data-modified")}makeDraggable(e){let t,n,o,r,a=!1;const i=i=>{if(!a)return;const s=t-i.clientX,l=i.clientY-n;this.position.right=Math.max(0,r+s),this.position.bottom=Math.max(0,o-l),e.style.right=`${this.position.right}px`,e.style.bottom=`${this.position.bottom}px`},s=()=>{a=!1,e.style.cursor="",document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",s),this.savePosition()};e.addEventListener("mousedown",l=>{if(l.target!==e&&!e.classList.contains("standard-lab-panel-header"))return;a=!0,t=l.clientX,n=l.clientY;const c=e.getBoundingClientRect();o=window.innerHeight-c.bottom,r=window.innerWidth-c.right,document.addEventListener("mousemove",i),document.addEventListener("mouseup",s),e.style.cursor="grabbing",l.preventDefault()})}openQuick(){"quick"!==this.state?(this.state="quick",this.createQuickPanel()):this.close()}openFull(){this.state="full",this.createFullPanel()}close(){this.panel&&(this.panel.style.opacity="0",this.panel.style.transform="translateY(10px)",setTimeout(()=>{this.panel&&(this.panel.remove(),this.panel=null)},200)),this.state="dormant"}refresh(){if(console.log("refresh"),this.storeDefaults(),this.badge=null,this.init(),document.documentElement.classList.contains("standard-debug")&&(this.removeGridDebugOverlays(),this.injectGridDebugOverlays()),"dormant"!==this.state)if("quick"===this.state)this.createQuickPanel();else if("full"===this.state){const e=this.panel?.querySelector('[data-filter="modified"]')?.checked||!1;this.createFullPanel(),this.switchTab(this.currentTab);const t=this.panel?.querySelector('[data-filter="modified"]');t&&(t.checked=e,this.refreshTokenList(e))}}createQuickPanel(){this.panel&&this.panel.remove(),this.panel=document.createElement("div"),this.panel.id="standard-lab-panel-container",this.panel.className="standard-lab-panel standard-lab-panel-quick",this.panel.style.bottom=`calc(${this.position.bottom}px + var(--space-2))`,this.panel.style.right=`${this.position.right}px`;const e=document.documentElement.classList.contains("standard-debug"),t=this.modifiedTokens.size;this.panel.innerHTML=`\n      <header class="standard-lab-panel-header">\n          <div>\n            <h2>Inspector v${this.version}</h2>\n            <div class="standard-lab-viewport-info">${window.innerWidth}px</div>\n          </div>\n          <button class="standard-lab-btn-icon" data-action="close" title="Close (Esc)"></button>\n        </header>\n      <section class="standard-lab-section">\n        <label class="standard-lab-toggle">\n          <input type="checkbox" ${e?"checked":""} data-toggle="debug">\n          <span>Debug Mode</span>\n          <kbd>D</kbd>\n        </label>\n      </section>\n      <section class="standard-lab-section">\n        <label class="standard-lab-label">Theme</label>\n        <select class="standard-lab-select" data-action="theme">\n          ${this.getThemeOptions()}\n        </select>\n      </section>\n      <div class="standard-lab-actions">\n        <button class="standard-lab-btn" data-action="edit-tokens">\n          ${t>0?`Edit Tokens (${t})`:"Edit Tokens"}\n        </button>\n        ${t>0?'<button class="standard-lab-btn standard-lab-btn-secondary" data-action="reset">Reset</button>':""}\n        <button class="standard-lab-btn standard-lab-btn-secondary" data-action="copy">Copy CSS</button>\n      </div>\n    `,this.attachQuickPanelListeners(),document.body.appendChild(this.panel),requestAnimationFrame(()=>{this.panel.style.opacity="1",this.panel.style.transform="translateY(0)"})}getThemeOptions(){const e=[{value:"",label:"Empty"},{value:"default",label:"Default"},{value:"bauhaus",label:"Bauhaus"},{value:"venetian",label:"Venetian"},{value:"newspaper",label:"Newspaper"},{value:"didone",label:"Didone"},{value:"transitional",label:"Transitional"},{value:"english-oldstyle",label:"English Oldstyle"},{value:"paper",label:"Paper"},{value:"swiss",label:"Swiss"},{value:"kernel",label:"Kernel"},{value:"forest",label:"Forest"},{value:"book",label:"Book"},{value:"minimal",label:"Minimal"},{value:"marauder",label:"Marauder"},{value:"blueprint",label:"Blueprint"},{value:"custom_1",label:"Custom 1"},{value:"custom_2",label:"Custom 2"},{value:"custom_3",label:"Custom 3"},...this.customThemes],t=document.documentElement.getAttribute("data-theme")||"";return e.map(e=>`<option value="${e.value}" ${t===e.value?"selected":""}>${e.label}</option>`).join("")}attachQuickPanelListeners(){this.panel.querySelector('[data-action="close"]')?.addEventListener("click",()=>this.close()),this.panel.querySelector('[data-toggle="debug"]')?.addEventListener("change",e=>{const t=e.target.checked;document.documentElement.classList.toggle("standard-debug",t),this.saveDebugMode(t);const n=document.documentElement.getAttribute("data-theme");t||"blueprint"===n?this.injectGridDebugOverlays():this.removeGridDebugOverlays(),window.toast?.info("Debug mode "+(e.target.checked?"enabled":"disabled"))}),this.panel.querySelector('[data-action="theme"]')?.addEventListener("change",e=>{const t=e.target.value;t?document.documentElement.setAttribute("data-theme",t):document.documentElement.removeAttribute("data-theme"),sessionStorage.setItem("standard-theme",t),this.handleBlueprintDebugException(t),window.toast?.info(`Theme: ${t||"Default"}`)}),this.panel.querySelector('[data-action="edit-tokens"]')?.addEventListener("click",()=>this.openFull()),this.panel.querySelector('[data-action="reset"]')?.addEventListener("click",()=>this.resetAll()),this.panel.querySelector('[data-action="copy"]')?.addEventListener("click",()=>this.copyCSS())}handleBlueprintDebugException(e){const t="blueprint"===e,n=document.documentElement.classList.contains("standard-debug");t&&!n?this.injectGridDebugOverlays():t||n||this.removeGridDebugOverlays()}createFullPanel(){this.panel&&this.panel.remove(),this.panel=document.createElement("div"),this.panel.id="standard-lab-panel-container",this.panel.className="standard-lab-panel standard-lab-panel-full",this.panel.style.bottom=`calc(${this.position.bottom}px + var(--space-2))`,this.panel.style.right=`${this.position.right}px`;const e=this.modifiedTokens.size,t=e>0;this.panel.innerHTML=`\n      <header class="standard-lab-panel-header" style="cursor: grab;">\n        <h2>Token Editor</h2>\n        <div class="standard-lab-header-actions">\n          <button class="standard-lab-btn-icon" data-action="minimize" title="Minimize"></button>\n          <button class="standard-lab-btn-icon" data-action="close" title="Close (Esc)"></button>\n        </div>\n      </header>\n      <nav class="standard-lab-tabs">\n        <button class="standard-lab-tab" data-tab="typography" aria-selected="true">Typography</button>\n        <button class="standard-lab-tab" data-tab="layout">Layout</button>\n        <button class="standard-lab-tab" data-tab="colors">Colors</button>\n        <button class="standard-lab-tab" data-tab="advanced">Advanced</button>\n      </nav>\n      ${e>0?`<div class="standard-lab-filter"><label class="standard-lab-toggle"><input type="checkbox" ${t?"checked":""} data-filter="modified"><span>Show modified only (${e})</span></label></div>`:""}\n      <div class="standard-lab-content">${this.renderTokenList("typography",t)}</div>\n      <div class="standard-lab-actions">\n        <button class="standard-lab-btn standard-lab-btn-secondary" data-action="reset">Reset All</button>\n        <button class="standard-lab-btn" data-action="copy">Copy CSS</button>\n      </div>\n    `,this.attachFullPanelListeners(),this.makeDraggable(this.panel.querySelector(".standard-lab-panel-header")),document.body.appendChild(this.panel),requestAnimationFrame(()=>{this.panel.style.opacity="1",this.panel.style.transform="translateY(0)"})}renderTokenList(e,t=!1){const n=this.coreTokens[e]||[];let o=t?n.filter(e=>this.modifiedTokens.has(e)):n;return 0===o.length?'<div class="standard-lab-empty">No tokens to display</div>':`<div class="standard-lab-token-list">${o.map(e=>this.renderTokenRow(e)).join("")}</div>`}isNumericValue(e){return!!e&&/^-?\d+(\.\d+)?(rem|em|px|%|ch|vh|vw)?$/.test(e.trim())}extractNumericValue(e){if(!e)return 0;const t=e.match(/^(-?\d+(\.\d+)?)/);return t?parseFloat(t[1]):0}extractUnit(e){if(!e)return"";const t=e.match(/[a-z%]+$/i);return t?t[0]:""}renderTokenRow(e){const t=this.getPropertyValue(e),n=this.modifiedTokens.has(e),o=e.includes("color")&&this.isColorValue(t),r=this.sliderConfig[e];if(r&&this.isNumericValue(t)){return`\n        <div class="standard-lab-token-row ${n?"is-modified":""}">\n          <div class="standard-lab-slider-container">\n            <label class="standard-lab-slider-label">${e}</label>\n            <div class="standard-lab-slider-controls">\n              <input\n                type="range"\n                class="standard-lab-slider-input"\n                data-token="${e}"\n                value="${this.extractNumericValue(t)}"\n                min="${r.min}"\n                max="${r.max}"\n                step="${r.step}"\n                title="${e}">\n              <input\n                type="text"\n                class="standard-lab-text-input standard-lab-slider-value"\n                data-token="${e}"\n                value="${t}"\n                spellcheck="false">\n            </div>\n          </div>\n          <button class="standard-lab-btn-icon standard-lab-btn-reset" data-action="reset-token" data-token="${e}" title="Reset" ${n?"":"disabled"}></button>\n        </div>\n      `}return o?`\n        <div class="standard-lab-token-row ${n?"is-modified":""}">\n          <div class="standard-lab-color-container">\n            <label class="standard-lab-color-label">${e}</label>\n            <div class="standard-lab-color-controls">\n              <input\n                type="color"\n                class="standard-lab-color-input"\n                data-token="${e}"\n                value="${this.extractHexColor(t)}"\n                title="Pick color">\n              <input\n                type="text"\n                class="standard-lab-text-input standard-lab-color-value"\n                data-token="${e}"\n                value="${t}"\n                placeholder="${e}"\n                spellcheck="false">\n            </div>\n          </div>\n          <button class="standard-lab-btn-icon standard-lab-btn-reset" data-action="reset-token" data-token="${e}" title="Reset" ${n?"":"disabled"}></button>\n        </div>\n      `:`\n      <div class="standard-lab-token-row ${n?"is-modified":""}">\n        <div class="standard-lab-text-container">\n          <label class="standard-lab-text-label">${e}</label>\n          <input type="text" class="standard-lab-text-input" data-token="${e}" value="${t}" placeholder="${e}" spellcheck="false">\n        </div>\n        <button class="standard-lab-btn-icon standard-lab-btn-reset" data-action="reset-token" data-token="${e}" title="Reset" ${n?"":"disabled"}></button>\n      </div>\n    `}attachFullPanelListeners(){this.panel.querySelector('[data-action="close"]')?.addEventListener("click",()=>this.close()),this.panel.querySelector('[data-action="minimize"]')?.addEventListener("click",()=>this.openQuick()),this.panel.querySelectorAll(".standard-lab-tab").forEach(e=>{e.addEventListener("click",e=>this.switchTab(e.target.dataset.tab))}),this.panel.querySelector('[data-filter="modified"]')?.addEventListener("change",e=>this.refreshTokenList(e.target.checked)),this.panel.querySelectorAll(".standard-lab-slider-input").forEach(e=>{e.addEventListener("input",e=>{const t=e.target.dataset.token,n=`${e.target.value}${this.sliderConfig[t].unit||this.extractUnit(this.getPropertyValue(t))}`;this.updateToken(t,n);const o=this.panel.querySelector(`.standard-lab-slider-value[data-token="${t}"]`);o&&(o.value=n)})}),this.panel.querySelectorAll(".standard-lab-slider-value").forEach(e=>{e.addEventListener("input",e=>{const t=e.target.dataset.token,n=e.target.value,o=this.extractNumericValue(n);this.updateToken(t,n);const r=this.panel.querySelector(`.standard-lab-slider-input[data-token="${t}"]`);r&&(r.value=o)})}),this.panel.querySelectorAll(".standard-lab-text-input:not(.standard-lab-slider-value):not(.standard-lab-color-value)").forEach(e=>{e.addEventListener("input",e=>this.updateToken(e.target.dataset.token,e.target.value))}),this.panel.querySelectorAll(".standard-lab-color-input").forEach(e=>{e.addEventListener("input",e=>{const t=e.target.dataset.token,n=e.target.value;this.updateToken(t,n);const o=this.panel.querySelector(`.standard-lab-color-value[data-token="${t}"]`);o&&(o.value=n)})}),this.panel.querySelectorAll(".standard-lab-color-value").forEach(e=>{e.addEventListener("input",e=>{const t=e.target.dataset.token,n=e.target.value;this.updateToken(t,n);const o=this.panel.querySelector(`.standard-lab-color-input[data-token="${t}"]`);o&&this.isColorValue(n)&&(o.value=this.extractHexColor(n))})}),this.panel.querySelectorAll('[data-action="reset-token"]').forEach(e=>{e.addEventListener("click",e=>this.resetToken(e.target.dataset.token))}),this.panel.querySelector('[data-action="reset"]')?.addEventListener("click",()=>this.resetAll()),this.panel.querySelector('[data-action="copy"]')?.addEventListener("click",()=>this.copyCSS())}switchTab(e){this.currentTab=e,this.panel.querySelectorAll(".standard-lab-tab").forEach(t=>{t.setAttribute("aria-selected",t.dataset.tab===e)});const t=this.panel.querySelector('[data-filter="modified"]')?.checked||!1;this.refreshTokenList(t)}refreshTokenList(e=!1){const t=this.panel?.querySelector(".standard-lab-content");t&&(t.innerHTML=this.renderTokenList(this.currentTab,e),this.attachFullPanelListeners())}updateToken(e,t){document.documentElement.style.setProperty(e,t),t!==this.defaults[e]?this.modifiedTokens.add(e):this.modifiedTokens.delete(e),this.updateBadge();const n=this.panel?.querySelector(`[data-action="reset-token"][data-token="${e}"]`);n&&(n.disabled=!this.modifiedTokens.has(e));const o=this.panel?.querySelector(`.standard-lab-token-row:has([data-token="${e}"])`);o&&o.classList.toggle("is-modified",this.modifiedTokens.has(e)),!e.includes("font-")||e.includes("font-size")||e.includes("font-ratio")||this.loadGoogleFont(t)}resetToken(e){const t=this.defaults[e];if(t){document.documentElement.style.setProperty(e,t),this.modifiedTokens.delete(e);const n=this.panel?.querySelector(`[data-token="${e}"]`);n&&(n.value=t),this.updateBadge(),this.refreshTokenList(),window.toast?.info(`Reset ${e}`)}}resetAll(){confirm("Reset all tokens to defaults?")&&(document.documentElement.removeAttribute("style"),this.modifiedTokens.clear(),this.googleFontsLoaded.clear(),this.updateBadge(),"full"===this.state&&this.refreshTokenList(),window.toast?.info("All tokens reset"))}copyCSS(){const e=`:root {\n${[...this.coreTokens.typography,...this.coreTokens.layout,...this.coreTokens.colors,...this.coreTokens.advanced].map(e=>`  ${e}: ${this.getPropertyValue(e)};`).join("\n")}\n}`;navigator.clipboard.writeText(e).then(()=>window.toast?.success("CSS copied to clipboard!")).catch(()=>{const t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.opacity="0",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),window.toast?.success("CSS copied to clipboard!")})}getPropertyValue(e){return getComputedStyle(document.documentElement).getPropertyValue(e).trim()||document.documentElement.style.getPropertyValue(e).trim()}isColorValue(e){return!!e&&(e.startsWith("#")||e.startsWith("rgb")||e.startsWith("hsl")||e.startsWith("oklch")||e.includes("color-mix"))}extractHexColor(e){if(!e)return"#000000";const t=e.match(/#[0-9a-f]{6}/i);if(t)return t[0];const n=e.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);if(n){const[,e,t,o]=n;return"#"+[e,t,o].map(e=>parseInt(e).toString(16).padStart(2,"0")).join("")}return{white:"#ffffff",black:"#000000",red:"#ff0000",green:"#00ff00",blue:"#0000ff",yellow:"#ffff00",orange:"#ffa500",purple:"#800080",pink:"#ffc0cb",cyan:"#00ffff"}[e.toLowerCase()]||"#000000"}loadGoogleFont(e){const t=e.split(",")[0].trim().replace(/['"]/g,"");if(["system-ui","sans-serif","serif","monospace","-apple-system","BlinkMacSystemFont"].includes(t)||this.googleFontsLoaded.has(t))return;const n=`https://fonts.googleapis.com/css2?family=${t.replace(/ /g,"+")}:wght@300;400;500;600;700;900&display=swap`;if(!document.querySelector(`link[href*="${t.replace(/ /g,"+")}"]`)){const e=document.createElement("link");e.rel="stylesheet",e.href=n,document.head.appendChild(e),this.googleFontsLoaded.add(t)}}showNotification(e,t="info"){const n=document.createElement("div");n.className=`standard-lab-notification standard-lab-notification-${t}`,n.textContent=e,document.body.appendChild(n),requestAnimationFrame(()=>{n.style.opacity="1",n.style.transform="translateY(0)"}),setTimeout(()=>{n.style.opacity="0",n.style.transform="translateY(-10px)",setTimeout(()=>n.remove(),200)},2500)}initKeyboardShortcuts(){document.addEventListener("keydown",e=>{const t=navigator.platform.indexOf("Mac")>-1;if(e.shiftKey&&(t?e.metaKey:e.ctrlKey)&&"s"===e.key.toLowerCase()&&(e.preventDefault(),"dormant"===this.state?this.openQuick():this.close()),e.shiftKey&&(t?e.metaKey:e.ctrlKey)&&"d"===e.key.toLowerCase()){e.preventDefault(),document.documentElement.classList.toggle("standard-debug");const t=document.documentElement.classList.contains("standard-debug");this.saveDebugMode(t),t?this.injectGridDebugOverlays():this.removeGridDebugOverlays(),window.toast?.info("Debug mode "+(t?"enabled":"disabled"))}"Escape"===e.key&&"dormant"!==this.state&&this.close()})}initModificationTracking(){[...this.coreTokens.typography,...this.coreTokens.layout,...this.coreTokens.colors,...this.coreTokens.advanced].forEach(e=>{const t=this.getPropertyValue(e),n=this.defaults[e];t&&n&&t!==n&&this.modifiedTokens.add(e)}),this.updateBadge()}injectGridDebugOverlays(){document.querySelectorAll(".prose").forEach(e=>{if(e.querySelector(".grid-debug-overlay"))return;const t=document.createElement("div");t.className="grid-debug-overlay",t.setAttribute("aria-hidden","true");for(let e=0;e<7;e++)t.appendChild(document.createElement("span"));e.insertBefore(t,e.firstChild)})}removeGridDebugOverlays(){document.querySelectorAll(".grid-debug-overlay").forEach(e=>e.remove())}injectStyles(){if(document.getElementById("standard-lab-styles"))return;const e=document.createElement("style");e.id="standard-lab-styles",e.textContent='\n      .standard-lab-badge { font-family: var(--font-interface); position: fixed; width: var(--space); height: var(--space); border-radius: 50%; background: var(--color-background-accent); border: var(--border-accent); box-shadow: var(--shadow); backdrop-filter: var(--blur); cursor: pointer; z-index: var(--z-toast); line-height:1.5; display: flex; align-items: baseline; justify-content: center; color: var(--color-foreground); transition: all 0.2s ease; padding: 0; }\n      .standard-lab-badge:hover { box-shadow: var(--shadow); transform: scale(1.05); color: var(--color-accent); }\n      .standard-lab-badge:active { transform: scale(0.95); }\n      .standard-lab-badge[data-modified]::after { content: attr(data-modified); position: absolute; top: -4px; right: -4px; width: 20px; height: 20px; border-radius: 50%; background: var(--color-accent); color: var(--color-background); font-size: var(--scale-d3); display: flex; align-items: center; justify-content: center; font-weight: 600; border: 2px solid var(--color-background); }\n      .standard-lab-panel { position: fixed; font-size: 16px !important; line-height: 1.2 !important; font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif !important; background: var(--modal-background); backdrop-filter: var(--blur); border: var(--border); border-radius: 6px; box-shadow: var(--shadow); z-index: var(--z-toast); opacity: 0; transform: translateY(10px); transition: opacity 0.2s ease, transform 0.2s ease; display: flex; flex-direction: column; }\n      .standard-lab-panel * { font-size: inherit !important; line-height: inherit !important; line-height:1.5 !important; }\n      .standard-lab-panel :is(label, input) { margin:0; }\n      .standard-lab-panel-quick { max-width: 280px; max-height: 400px; }\n      .standard-lab-panel-full { max-width: 360px; max-height: 600px; }\n      .standard-lab-panel-header { padding: 6px; border-bottom: var(--border); display: flex; align-items: center; justify-content: space-between; flex-shrink: 0; }\n      .standard-lab-panel-header h2 { margin: 0; font-size: 14px !important; font-weight: 600; letter-spacing: -0.02em; }\n      .standard-lab-viewport-info { font-size: 11px !important; font-weight: 400; color: var(--color-muted); margin-top: 2px; font-family: var(--font-monospace); }\n      .standard-lab-header-actions { display: flex; gap: 6px; }\n      .standard-lab-section { padding: 6px; border-bottom: var(--border); }\n      .standard-lab-section:last-of-type { border-bottom: none; }\n      .standard-lab-label { display: block; font-size: 11px !important; font-weight: 600; color: var(--color-muted); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 6px; }\n      .standard-lab-toggle { display: flex; align-items: center; gap: 6px; cursor: pointer; user-select: none; }\n      .standard-lab-toggle input[type="checkbox"] { width: 16px; height: 16px; cursor: pointer; margin: 0; }\n      .standard-lab-toggle span { flex: 1; font-size: 14px !important; }\n      .standard-lab-toggle kbd { font-size: 12px !important; font-family: var(--font-monospace); color: var(--color-subtle); padding: 2px 6px; background: var(--color-background-secondary); border-radius: 6px; }\n      .standard-lab-select { width: 100%; padding: 6px 3px; margin:0; background: var(--color-background); border: var(--border); border-radius: 6px; font-size: 14px !important; color: var(--color-foreground); cursor: pointer; }\n      .standard-lab-actions { padding: 6px; border-top: var(--border); display: flex; flex-direction: column; gap: 6px; flex-shrink: 0; }\n      .standard-lab-btn { font-size: 12px !important; width: 100%; padding: 6px 3px; background: var(--color-accent); color: var(--color-background); border: border-radius: var(--border); border-radius: 6px; font-size: 14px !important; font-weight: 600; cursor: pointer; transition: opacity 0.2s ease; }\n      .standard-lab-btn:hover { opacity: 0.9; }\n      .standard-lab-btn:active { opacity: 0.8; }\n      .standard-lab-btn-secondary { background: var(--color-background-secondary); color: var(--color-foreground); border: var(--border); }\n      .standard-lab-btn-icon { font-size: 12px !important; width: 24px; height: 24px; padding: 0; background: transparent; border: none; color: var(--color-muted); font-size: 20px !important; line-height: 1 !important; cursor: pointer; border-radius: 6px; transition: all 0.2s ease; display: flex; align-items: center; justify-content: center; }\n      .standard-lab-btn-icon:hover { background: var(--color-background-secondary); color: var(--color-foreground); }\n      .standard-lab-tabs { display: flex; border-bottom: var(--border); flex-shrink: 0; }\n      .standard-lab-tab { flex: 1; padding: 6px; background: transparent; border: none; border-bottom: 2px solid transparent; font-size: 16px !important; font-weight: 500; color: var(--color-muted); cursor: pointer; transition: all 0.2s ease; }\n      .standard-lab-tab:hover { color: var(--color-foreground); background: var(--color-background-secondary); }\n      .standard-lab-tab[aria-selected="true"] { color: var(--color-foreground); border-bottom-color: var(--color-accent); font-weight: 600; }\n      .standard-lab-filter { padding: 6px var(--space-d2); background: var(--color-background-secondary); border-bottom: var(--border); flex-shrink: 0; }\n      .standard-lab-content { flex: 1; overflow-y: auto; padding: 6px; }\n      .standard-lab-content::-webkit-scrollbar { width: 6px; }\n      .standard-lab-content::-webkit-scrollbar-track { background: transparent; }\n      .standard-lab-content::-webkit-scrollbar-thumb { background: var(--color-border); border-radius: 6px; }\n      .standard-lab-content::-webkit-scrollbar-thumb:hover { background: var(--color-muted); }\n      .standard-lab-token-list { display: flex; flex-direction: column; gap: 3px; }\n      .standard-lab-token-row { display: grid; grid-template-columns: 1fr auto; gap: 6px; align-items: start; padding: 6px; border-radius: 6px; transition: background 0.2s ease; }\n      .standard-lab-token-row:hover { background: var(--color-background-secondary); }\n      .standard-lab-token-row.is-modified { background: color-mix(in srgb, var(--color-accent) 5%, transparent); }\n      .standard-lab-text-input { padding: 0; background: transparent; border: 1px solid transparent; border-radius: 6px; font-size: 12px !important; font-family: var(--font-monospace); color: var(--color-foreground); min-width: 0; transition: all 0.2s ease; }\n      .standard-lab-text-input:focus { outline: none; background: var(--color-background); border-color: var(--color-accent); }\n      .standard-lab-color-container { width: 100%; }\n      .standard-lab-color-label { display: block; font-size: 11px !important; font-family: var(--font-monospace); color: var(--color-muted); margin-bottom: 6px; }\n      .standard-lab-color-controls { display: flex; gap: 6px; align-items: center; }\n      .standard-lab-color-input { width: 40px; height: 40px; border: var(--border); border-radius: 6px; cursor: pointer; padding: 4px; background: var(--color-background); flex-shrink: 0; }\n      .standard-lab-color-input::-webkit-color-swatch-wrapper { padding: 0; }\n      .standard-lab-color-input::-webkit-color-swatch { border: none; border-radius: 6px; }\n      .standard-lab-color-value { flex: 1; min-width: 0; padding: 0; font-family: var(--font-monospace); font-size: 12px !important; }\n      .standard-lab-text-container { width: 100%; }\n      .standard-lab-text-label { display: block; font-size: 11px !important; font-family: var(--font-monospace); color: var(--color-muted); margin-bottom: 6px; }\n      .standard-lab-slider-container { width: 100%; }\n      .standard-lab-slider-label { display: block; font-size: 11px !important; font-family: var(--font-monospace); color: var(--color-muted); margin-bottom: 6px; }\n      .standard-lab-slider-controls { display: flex; gap: 6px; align-items: center; }\n      .standard-lab-slider-input { flex: 1; height: 6px; -webkit-appearance: none; appearance: none; background: var(--color-background-secondary); border-radius: 6px; outline: none; cursor: pointer; }\n      .standard-lab-slider-input::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 16px; height: 16px; background: var(--color-accent); border-radius: 50%; cursor: grab; transition: transform 0.1s ease; }\n      .standard-lab-slider-input::-webkit-slider-thumb:active { cursor: grabbing; transform: scale(1.2); }\n      .standard-lab-slider-input::-moz-range-thumb { width: 16px; height: 16px; background: var(--color-accent); border-radius: 50%; border: none; cursor: grab; transition: transform 0.1s ease; }\n      .standard-lab-slider-input::-moz-range-thumb:active { cursor: grabbing; transform: scale(1.2); }\n      .standard-lab-slider-value { width: 80px; flex-shrink: 0; text-align: center; padding: 6px 8px; font-size: 12px !important; }\n      .standard-lab-btn-reset { opacity: 0; transition: opacity 0.2s ease; }\n      .standard-lab-token-row:hover .standard-lab-btn-reset:not(:disabled) { opacity: 1; }\n      .standard-lab-btn-reset:disabled { opacity: 0; cursor: not-allowed; }\n      .standard-lab-empty { padding: var(--space); text-align: center; color: var(--color-subtle); font-size: 14px !important; }\n      .standard-lab-notification { position: fixed; top: var(--space); left: 50%; transform: translateX(-50%) translateY(-10px); background: var(--color-background); border: var(--border); border-radius: 6px; padding: 8px 16px; box-shadow: var(--shadow); z-index: calc(var(--z-toast) + 1); font-size: 14px !important; opacity: 0; transition: opacity 0.2s ease, transform 0.2s ease; pointer-events: none; }\n      .standard-lab-notification-success { background: var(--color-success); color: white; border-color: var(--color-success); }\n      .standard-lab-notification-info { background: var(--color-info); color: white; border-color: var(--color-info); }\n      @media (prefers-color-scheme: dark) { .standard-lab-panel { box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3); } }\n      @media (max-width: 768px) { .standard-lab-panel-quick, .standard-lab-panel-full { width: calc(100vw - 32px); max-width: 360px; } }\n      @media print { .standard-lab-badge, .standard-lab-panel, .standard-lab-notification { display: none !important; } }\n    ',document.head.appendChild(e)}}if("undefined"!=typeof window){const t=()=>{window.StandardLab||(window.StandardLab=new StandardLab,console.log("[StandardLab]  Initialized"))};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):t(),document.addEventListener("astro:after-swap",()=>{if(console.log("[StandardLab]  Page swap detected"),!window.StandardLab)return console.log("[StandardLab]   Instance not found, reinitializing"),void(window.StandardLab=new StandardLab);document.getElementById("standard-lab-badge-container")||(console.log("[StandardLab]  Recreating badge"),window.StandardLab.badge=null,window.StandardLab.createBadge());const e=document.getElementById("standard-lab-panel-container");"dormant"===window.StandardLab.state||e||(window.StandardLab.state="dormant",window.StandardLab.panel=null),window.StandardLab.restoreTheme(),window.StandardLab.restoreDebugMode(),document.documentElement.classList.contains("standard-debug")&&window.StandardLab.injectGridDebugOverlays()}),document.body.addEventListener("htmx:afterSettle",()=>{console.log("[StandardLab]  HTMX swap detected"),window.StandardLab&&window.StandardLab.refresh()})}export default StandardLab;export class GitHubComments{constructor(e={}){this.apiUrl=e.apiUrl||"/api/comments",this.pageId=e.pageId,this.container="string"==typeof e.container?document.querySelector(e.container):e.container||document.querySelector("#comments"),this.formSelector=e.form||"#comment-form",this.comments=[],this.loading=!1,this.pollInterval=e.pollInterval||null,this.pollTimer=null,this.onLoad=e.onLoad||null,this.onRender=e.onRender||null}async load(){if(!this.pageId)return console.error("GitHubComments: pageId is required"),this.error="Configuration error: pageId is required",[];this.loading=!0,this.error=null;try{const e=await fetch(`${this.apiUrl}?pageId=${encodeURIComponent(this.pageId)}`);if(!e.ok)throw new Error(`API error: ${e.status}`);const t=await e.json();if(this.comments=t.comments||[],this.loading=!1,"function"==typeof this.onLoad)try{this.onLoad(this.comments)}catch(e){}return this.comments}catch(e){return console.error("Error loading comments:",e),this.loading=!1,this.error=e.message||"Failed to load comments. Please try again later.",[]}}async submit(e){try{const t=await fetch(this.apiUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pageId:this.pageId,...e})});if(!t.ok){let e=`API error: ${t.status}`;try{e=(await t.json()).message||e}catch(n){e=`API endpoint not available (${t.status})`}throw new Error(e)}const n=await t.json();return n.comment&&(this.comments.push(n.comment),this.comments.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt))),n}catch(e){throw console.error("Error submitting comment:",e),e}}formatTime(e){const t=new Date(e),n=new Date,o=Math.floor((n-t)/1e3);return o<60?"just now":o<3600?`${Math.floor(o/60)}m ago`:o<86400?`${Math.floor(o/3600)}h ago`:o<604800?`${Math.floor(o/86400)}d ago`:t.toLocaleDateString()}escapeHTML(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}formatContent(e){let t=this.escapeHTML(e);return t=t.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>"),t=t.replace(/\*(.+?)\*/g,"<em>$1</em>"),t=t.replace(/_(.+?)_/g,"<em>$1</em>"),t=t.replace(/```(.*?)```/gs,"<pre><code>$1</code></pre>"),t=t.replace(/`(.+?)`/g,"<code>$1</code>"),t=t.replace(/\[(.+?)\]\((.+?)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer">$1</a>'),t=t.replace(/\n/g,"<br>"),t}renderComment(e,t=0){const n=!1!==e.approved?"":' data-pending="true"',o=e.spam?' data-spam="true"':"";return`\n      <div class="comment" data-id="${this.escapeHTML(String(e.id))}" data-level="${t}"${n}${o}>\n        <div class="comment-header">\n          <span class="comment-author">${this.escapeHTML(e.author||"Anonymous")}</span>\n          <span class="comment-date">${this.formatTime(e.createdAt)}</span>\n          ${e.spam?'<span class="comment-flag">Flagged as spam</span>':""}\n          ${e.approved?"":'<span class="comment-pending">Awaiting moderation</span>'}\n        </div>\n        <div class="comment-content">${this.formatContent(e.content||"")}</div>\n      </div>\n    `}buildCommentTree(){const e={},t=[];for(const t of this.comments)e[t.id]={...t,replies:[]};for(const n of this.comments)n.parentId&&e[n.parentId]?e[n.parentId].replies.push(e[n.id]):t.push(e[n.id]);return t}renderTree(e,t=0){return e.map(e=>{let n=this.renderComment(e,t);return e.replies&&e.replies.length>0&&(n+=`<div class="comment-replies">${this.renderTree(e.replies,t+1)}</div>`),n}).join("")}updateFormVisibility(){const e=document.getElementById("show-comment-form-btn");e&&(this.error?e.style.display="none":e.style.display="")}render(){if(!this.container)return void console.error("GitHubComments: container not found");if(this.error)return this.container.innerHTML=`\n        <aside class="comments debug" role="alert">\n          Error loading comments: ${this.escapeHTML(this.error)}\n        </aside>\n      `,void this.updateFormVisibility();if(0===this.comments.length)return this.container.innerHTML='<p class="comments-empty">No comments yet. Be the first to comment!</p>',void this.updateFormVisibility();const e=this.buildCommentTree();if(this.container.innerHTML=this.renderTree(e),this.attachReplyHandlers(),this.updateFormVisibility(),"function"==typeof this.onRender)try{this.onRender(this.container)}catch(e){}}attachReplyHandlers(){this.container&&this.container.querySelectorAll(".comment-reply").forEach(e=>{e.addEventListener("click",e=>{const t=e.target.dataset.parentId,n=document.querySelector(this.formSelector);if(n){const e=n.querySelector('[name="parentId"]');e&&(e.value=t),n.scrollIntoView({behavior:"smooth"})}})})}attachFormHandler(e=null){const t=document.querySelector(e||this.formSelector);if(t){if(t.removeAttribute("hx-boost"),t.setAttribute("hx-disable","true"),window.htmx){const n=t.cloneNode(!0);t.parentNode.replaceChild(n,t);return void document.querySelector(e||this.formSelector).addEventListener("submit",this._handleFormSubmit.bind(this))}t.addEventListener("submit",this._handleFormSubmit.bind(this))}}async _handleFormSubmit(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();const t=e.target,n=new FormData(t),o={author:n.get("author"),email:n.get("email"),content:n.get("content"),parentId:n.get("parentId")||null},r=t.querySelector("button[type=submit]"),a=r?r.textContent:"",i=t.querySelector("#form-status");try{r&&(r.disabled=!0,r.textContent="Submitting...",r.style.opacity="0.7"),i&&(i.style.display="block",i.textContent="Sending your comment...",i.style.color="var(--color-foreground, #000)");const e=await this.submit(o);i&&(i.textContent="Comment submitted successfully! It will appear after moderation.",i.style.color="var(--color-green, green)",setTimeout(()=>{i.style.display="none",i.textContent=""},6e3)),t.reset();const n=t.querySelector('[name="parentId"]');return n&&(n.value=""),this.render(),e}catch(e){throw i&&(i.textContent=`Error: ${e.message}`,i.style.color="var(--color-red, red)",i.style.display="block"),e}finally{r&&(r.disabled=!1,r.textContent=a,r.style.opacity="1")}}startPolling(){this.pollInterval&&(this.stopPolling(),this.pollTimer=setInterval(async()=>{const e=this.comments.length;await this.load(),this.comments.length>e&&this.render()},this.pollInterval))}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}}function normalizePageId(e){if(!e||"string"!=typeof e)return"index";let t=e.trim();try{t=new URL(t,window.location.origin).pathname}catch(e){}return t=t.replace(/^\/|\/$/g,""),""===t?"index":(t=t.replace(/[\/]+/g,"_"),t=t.replace(/[^A-Za-z0-9_-]/g,"_"),t)}const COMMENT_DEFAULTS={apiUrl:"/api/comments",containerSelector:"#comments",formSelector:"#comment-form",pollInterval:null,autoInit:!0,pageId:null,onLoad:null,onRender:null};let _instance=null,_configured={...COMMENT_DEFAULTS};function _getPageIdFromDOM(){if("undefined"==typeof document)return null;const e=document.querySelector("[data-page-id]")||document.body,t=e&&e.getAttribute&&e.getAttribute("data-page-id");if(t)return t;const n=document.querySelector('meta[name="page-id"]');if(n&&n.content)return n.content;const o=document.querySelector('meta[property="og:url"]');if(o&&o.content)try{return new URL(o.content).pathname}catch(e){return o.content}const r=document.querySelector('link[rel="canonical"]');if(r&&r.href)try{return new URL(r.href).pathname}catch(e){return r.href}return null}const comments={version:"@VERSION_PLACEHOLDER@",configure:(e={})=>(Object.assign(_configured,e||{}),_configured),getInstance:()=>_instance,createInstance(e={}){const t={apiUrl:_configured.apiUrl,container:e.container||_configured.containerSelector,form:e.formSelector||_configured.formSelector,pollInterval:null!=e.pollInterval?e.pollInterval:_configured.pollInterval,onLoad:e.onLoad||_configured.onLoad,onRender:e.onRender||_configured.onRender},n=e.pageId||_configured.pageId||_getPageIdFromDOM();return t.pageId=normalizePageId(n||window.location.pathname),_instance=new GitHubComments(t),_instance},async init(e={}){if("undefined"==typeof document)return null;if(_instance&&!e.recreate)return _instance;let t=e.container;if(!t){t=document.querySelector("[data-comments]")||document.querySelector(_configured.containerSelector)||_configured.containerSelector}const n=this.createInstance({...e,container:t});try{await n.load(),n.render()}catch(e){}try{n.attachFormHandler(e.formSelector||_configured.formSelector)}catch(e){}return n.pollInterval&&n.startPolling(),n},async load(){return _instance||await this.init(),_instance?_instance.load():[]},render(){if(_instance)return _instance.render();console.error("comments: not initialized")},attachFormHandler(e){if(_instance)return _instance.attachFormHandler(e);console.error("comments: not initialized")},submit:e=>_instance?_instance.submit(e):Promise.reject(new Error("comments: not initialized")),startPolling(){if(_instance)return _instance.startPolling();console.error("comments: not initialized")},stopPolling(){if(_instance)return _instance.stopPolling()},getPageId(){if(_instance&&_instance.pageId)return _instance.pageId;return normalizePageId(_configured.pageId||_getPageIdFromDOM()||("undefined"!=typeof window?window.location.pathname:"index"))}};function setupCommentsAndHTMX(){if(_configured.autoInit&&!_instance)try{comments.init().catch(()=>{})}catch(e){}document.body.addEventListener("htmx:afterSettle",function(e){if(document.querySelector("#comments, [data-comments]")){const e=comments.getInstance();e&&e.stopPolling(),comments.init({recreate:!0})}})}"undefined"!=typeof document&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",setupCommentsAndHTMX):setupCommentsAndHTMX());export default comments;"undefined"!=typeof window&&(window.comments=comments,window.GitHubComments=GitHubComments);import{initCopyButtons}from"./standard.copy-buttons.js";import{initScrollWrappers}from"./standard.scroll-wrappers.js";let currentTheme=null,scrollState={x:0,y:0};function initializeTheme(){"undefined"!=typeof document&&(currentTheme=document.documentElement.dataset.theme)}function supportsViewTransitions(){return"undefined"!=typeof window&&("startViewTransition"in document&&(!0===window.transitionEnabledOnThisPage||!("transitionEnabledOnThisPage"in window)))}export function setupAstroThemeSwitching(){"undefined"!=typeof window&&(document.addEventListener("astro:before-preparation",e=>{const t=document.documentElement.dataset.theme;t&&(currentTheme=t)}),document.addEventListener("astro:before-swap",e=>{if(e.newDocument){const t=e.newDocument.documentElement.dataset.theme;t&&(currentTheme=t,document.documentElement.dataset.theme=t)}}),document.addEventListener("astro:after-swap",()=>{currentTheme&&(document.documentElement.dataset.theme=currentTheme)}))}export function setupAstroScrollManagement(e={}){const{restoreScroll:t=!1}=e;"undefined"!=typeof window&&(document.addEventListener("astro:before-preparation",()=>{scrollState={x:window.scrollX||0,y:window.scrollY||0}}),document.addEventListener("astro:after-swap",()=>{t?window.scrollTo(scrollState.x,scrollState.y):window.scrollTo(0,0)}))}export function setupAstroReinitialization(){"undefined"!=typeof window&&document.addEventListener("astro:after-swap",()=>{window.imageZoom&&"function"==typeof window.imageZoom.rescan&&window.imageZoom.rescan(),"function"==typeof initScrollWrappers&&initScrollWrappers(document),"function"==typeof initCopyButtons&&initCopyButtons()})}export function setupAstroPageLoadReinitialization(){"undefined"!=typeof window&&document.addEventListener("astro:page-load",()=>{window.imageZoom&&"function"==typeof window.imageZoom.rescan&&window.imageZoom.rescan(),"function"==typeof initScrollWrappers&&initScrollWrappers(document),"function"==typeof initCopyButtons&&initCopyButtons()})}export function setupAstroDebugLogging(){if("undefined"==typeof window||"undefined"==typeof document)return;["astro:before-preparation","astro:after-preparation","astro:before-swap","astro:after-swap","astro:page-load"].forEach(e=>{document.addEventListener(e,t=>{console.log(`[Standard] ${e}`,{type:e,fromURL:t.from?.href||"N/A",toURL:t.to?.href||"N/A",direction:t.direction||"N/A"})})})}export function initAstro(e={}){const{usePageLoad:t=!1,debug:n=!1,restoreScroll:o=!1}=e;if("undefined"==typeof document)return console.warn("[Standard Astro] Document not available - running in non-browser environment"),{success:!1,reason:"non-browser-environment"};const r=supportsViewTransitions();return n&&console.log("[Standard Astro] Initializing...",{viewTransitionsEnabled:r,usePageLoad:t,restoreScroll:o}),initializeTheme(),setupAstroThemeSwitching(),setupAstroScrollManagement({restoreScroll:o}),t?(setupAstroPageLoadReinitialization(),n&&console.log("[Standard Astro] Using astro:page-load event")):(setupAstroReinitialization(),n&&console.log("[Standard Astro] Using astro:after-swap event")),n&&(setupAstroDebugLogging(),console.log("[Standard Astro] Debug logging enabled")),n&&console.log("[Standard Astro]  Initialization complete"),{success:!0,viewTransitionsEnabled:r,modules:["imageZoom","scrollWrappers","copyButtons"]}}export const astroHelpers={reinitialize(){window.imageZoom&&"function"==typeof window.imageZoom.rescan&&window.imageZoom.rescan(),"function"==typeof initScrollWrappers&&initScrollWrappers(document),"function"==typeof initCopyButtons&&initCopyButtons()},isSupported:()=>supportsViewTransitions(),getCurrentTheme:()=>currentTheme,setTheme(e){currentTheme=e,"undefined"!=typeof document&&(document.documentElement.dataset.theme=e)}};"undefined"!=typeof document&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{supportsViewTransitions()&&initAstro()}):supportsViewTransitions()&&initAstro());export default initAstro;import{initCopyButtons}from"./standard.copy-buttons.js";import{initScrollWrappers}from"./standard.scroll-wrappers.js";export function setupHTMXThemeSwitching(){document.body.addEventListener("htmx:beforeSwap",e=>{const t=(new DOMParser).parseFromString(e.detail.xhr.responseText,"text/html").documentElement.dataset.theme;t&&(document.documentElement.dataset.theme=t)})}export function setupHTMXReinitialization(){document.body.addEventListener("htmx:afterSettle",function(e){window.imageZoom&&window.imageZoom.rescan(),initScrollWrappers(e.detail.elt),initCopyButtons()})}export function initHTMX(){setupHTMXThemeSwitching(),setupHTMXReinitialization()}"undefined"!=typeof document&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",initHTMX):initHTMX());export default initHTMX;