<!DOCTYPE html><!-- Use Base layout and pass the markdown content through --><html class="rhythm" lang="en" data-theme="default"> <head><meta charset="utf-8"><!-- Standard Framework | https://standard.ffp.co --><title>Standard Framework</title><meta name="description" content="Standard is built on the belief that design systems should be rooted in centuries of typographic tradition, mathematical precision, and the timeless principles of Swiss International Style."><meta name="author" content="Francis Fontaine"><meta name="language" content="en"><meta name="referrer" content="strict-origin-when-cross-origin"><!-- Canonical URL --><link rel="canonical" href="https://standard.ffp.co/cloudflare/comments/COMMENTS-QUICK-START/"><!-- Feed & Sitemap --><link rel="alternate" type="application/atom+xml" title="Standard Framework" href="https://standard.ffp.co/feed.xml"><link rel="sitemap" type="application/xml" title="Sitemap" href="https://standard.ffp.co/sitemap.xml"><!-- Robots Meta --><meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"><!-- Open Graph --><meta property="og:title" content="Standard Framework"><meta property="og:type" content="article"><meta property="og:locale" content="en"><meta property="og:site_name" content="Standard Framework"><meta property="og:url" content="https://standard.ffp.co/cloudflare/comments/COMMENTS-QUICK-START/"><meta property="og:description" content="Standard is built on the belief that design systems should be rooted in centuries of typographic tradition, mathematical precision, and the timeless principles of Swiss International Style."><meta property="og:image" content="https://standard.ffp.co/assets/img/default.png"><meta property="og:image:alt" content="Standard Framework"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><!-- Twitter Cards --><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://standard.ffp.co/assets/img/default.png"><meta name="twitter:image:alt" content="Standard Framework"><meta name="twitter:site" content="@francisfontaine"><meta name="twitter:creator" content="@francisfontaine"><meta name="twitter:title" content="Standard Framework"><meta name="twitter:description" content="Standard is built on the belief that design systems should be rooted in centuries of typographic tradition, mathematical precision, and the timeless principles of Swiss International Style."><!-- Schema.org --><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","headline":"Standard Framework","description":"Standard is built on the belief that design systems should be rooted in centuries of typographic tradition, mathematical precision, and the timeless principles of Swiss International Style.","author":{"@type":"Person","name":"Francis Fontaine","url":"https://standard.ffp.co/now/"},"publisher":{"@type":"Person","name":"Francis Fontaine","url":"https://standard.ffp.co","logo":{"@type":"ImageObject","url":"https://standard.ffp.co/francis-fontaine-avatar.png"}},"image":{"@type":"ImageObject","url":"https://standard.ffp.co/assets/img/default.png","width":1200,"height":630},"mainEntityOfPage":{"@type":"WebPage","@id":"https://standard.ffp.co/cloudflare/comments/COMMENTS-QUICK-START/"}}</script><!-- Favicons --><link rel="apple-touch-icon" sizes="180x180" href="https://standard.ffp.co/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://standard.ffp.co/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://standard.ffp.co/favicons/favicon-16x16.png"><link rel="manifest" href="/site.webmanifest"><link rel="mask-icon" href="https://standard.ffp.co/favicons/safari-pinned-tab.svg" color="#000000"><link rel="shortcut icon" href="https://standard.ffp.co/favicons/favicon.ico"><!-- Mobile --><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)"><meta name="theme-color" content="#000000" media="(prefers-color-scheme: dark)"><!-- Windows Tiles --><meta name="msapplication-TileColor" content="#000000"><meta name="msapplication-config" content="https://standard.ffp.co/favicons/browserconfig.xml"><link rel="preconnect" href="https://rsms.me/"><link rel="stylesheet" href="https://rsms.me/inter/inter.css"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&family=Source+Serif+4:ital,opsz,wght@0,8..60,200..900;1,8..60,200..900&display=swap" rel="stylesheet"><!-- Standard Framework Lab Features --><script src="/assets/standard/standard.lab.js?v=1764047976403"></script><!-- Load HTMX library --><script type="module" src="/_astro/Base.astro_astro_type_script_index_0_lang.C1onTupY.js"></script><link rel="stylesheet" href="https://use.typekit.net/epz8pgr.css"><!-- âœ… FIX: Load scripts only on client side --><script type="module">
            import "/assets/js/standard.js";
            // import "/assets/js/standard.lab.js"; // Removed - Lab component handles this
            import "/assets/js/standard.toast.js";
            import "/assets/js/standard.comment.js";
        </script><link rel="stylesheet" href="/_astro/_slug_.dcmf1oDl.css"><script type="module" src="/_astro/page.DXhROYzO.js"></script></head> <body hx-boost="true" hx-ext="preload" hx-target="body" hx-swap="innerHTML scroll:window:top" class="prose"> <a href="#main" class="skip-link">Skip to content</a> <header class="flex font-interface" style="justify-content: space-between; max-width: 100%;"> <p> <a href="/" style="text-decoration: none;">Standard Framework</a> </p> <nav class="menu horizontal" aria-label="Navigation"> <ul class="menu"> <li class="menu__item"> <a class="menu__link" href="/docs/"> Docs </a> </li><li class="menu__item"> <a class="menu__link" href="/getting-started/"> Getting Started </a> </li><li class="menu__item"> <a class="menu__link" href="/cheat-sheet/"> Cheat Sheet </a> </li> </ul> </nav> </header> <main id="main" class="prose">  <h1 id="github-comments-system--quick-start">GitHub Comments System â€“ Quick Start</h1>
<p>Deploy aÂ fully-functional comments system inÂ 10Â minutes.</p>
<h2 id="files-included">Files Included</h2>
<p><strong>SourceÂ Code</strong> (<code>src/cloudflare/</code>):</p>
<ul>
<li><code>comments.js</code> â€” Server-side handler (coreÂ logic)</li>
<li><code>standard.comment.js</code> â€” Client-side libraryÂ (rendering)</li>
<li><code>comments-example.js</code> â€” Ready-to-deploy functionÂ handler</li>
<li><code>wrangler-comments.toml.template</code> â€” Cloudflare configÂ template</li>
<li><code>utils.js</code> â€” SharedÂ utilities</li>
</ul>
<p><strong>Templates</strong> (<code>src/layouts/</code>):</p>
<ul>
<li><code>comments.njk</code> â€” Ready-to-use Nunjucks layoutÂ template</li>
</ul>
<p><strong>Documentation</strong> (<code>content/cloudflare/comments/</code>):</p>
<ul>
<li><code>COMMENTS-GUIDE.md</code> â€” FullÂ documentation</li>
<li><code>COMMENTS-QUICK-START.md</code> â€” ThisÂ file</li>
<li><code>COMMENTS-FILES.md</code> â€” FileÂ reference</li>
<li><code>index.md</code> â€”Â Overview</li>
</ul>
<h2 id="setup-10-minutes">Setup (10 minutes)</h2>
<h3 id="step-1-enable-cloudflare-instandard-plugin-1min">Step 1: Enable Cloudflare inÂ Standard Plugin (1Â min)</h3>
<p>Update your <code>eleventy.config.js</code>:</p>
<pre class="language-javascript" data-language="javascript"><code is:raw="" class="language-javascript"><span class="token keyword">import</span> Standard <span class="token keyword">from</span> <span class="token string">â€œ@zefish/standardâ€</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">eleventyConfig</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  eleventyConfig<span class="token punctuation">.</span><span class="token function">addPlugin</span><span class="token punctuation">(</span>Standard<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">cloudflare</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">enabled</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>ThisÂ automatically:</p>
<ul>
<li>âœ… Enables theÂ comments system (comments require Cloudflare FunctionsÂ backend)</li>
<li>âœ… Copies comments handler toÂ <code>functions/api/comments.js</code></li>
<li>âœ… Copies client library toÂ <code>assets/standard/standard.comment.js</code></li>
<li>âœ… Generates <code>wrangler.toml</code> fromÂ your <code>.env</code> file onÂ build</li>
</ul>
<h3 id="step-2-createenv-file-1min">Step 2: Create.env File (1Â min)</h3>
<p>Create aÂ <code>.env</code> file inÂ your projectÂ root:</p>
<pre class="language-bash" data-language="bash"><code is:raw="" class="language-bash"><span class="token comment">#.env</span>
<span class="token assign-left variable">PROJECT_NAME</span><span class="token operator">=</span>my-site
<span class="token assign-left variable">GITHUB_OWNER</span><span class="token operator">=</span>your-github-username
<span class="token assign-left variable">GITHUB_REPO</span><span class="token operator">=</span>your-repository-name
<span class="token assign-left variable">GITHUB_COMMENTS_PATH</span><span class="token operator">=</span>data/comments
<span class="token assign-left variable">GITHUB_TOKEN</span><span class="token operator">=</span>ghp_your_token_here
<span class="token assign-left variable">DOMAIN</span><span class="token operator">=</span>example.com
<span class="token assign-left variable">CLOUDFLARE_ZONE_ID</span><span class="token operator">=</span>your-zone-id
<span class="token assign-left variable">CLOUDFLARE_ACCOUNT_ID</span><span class="token operator">=</span>your-account-id
<span class="token assign-left variable">MODERATION_EMAIL</span><span class="token operator">=</span>admin@example.com
</code></pre>
<p><strong>AddÂ to.gitignore</strong> (toÂ keep secretsÂ safe):</p>
<pre class="language-bash" data-language="bash"><code is:raw="" class="language-bash"><span class="token builtin class-name">echo</span> <span class="token string">â€œ.envâ€</span> <span class="token operator">>></span> .gitignore
</code></pre>
<p>TheÂ plugin willÂ automatically read thisÂ file andÂ generate <code>wrangler.toml</code> during yourÂ build!</p>
<h3 id="step-25-github-setup-optional">Step 2.5: GitHub Setup (Optional)</h3>
<p>IfÂ you havenâ€™t already, create theÂ comments directory inÂ yourÂ repo:</p>
<pre class="language-bash" data-language="bash"><code is:raw="" class="language-bash"><span class="token function">mkdir</span> data/comments
<span class="token function">touch</span> data/comments/.gitkeep
<span class="token function">git</span> <span class="token function">add</span> data/comments/.gitkeep
<span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token string">â€œAdd commentsÂ directoryâ€</span>
<span class="token function">git</span> push
</code></pre>
<p>(GitHub willÂ auto-create itÂ onÂ first comment ifÂ you skipÂ this)</p>
<h3 id="step-3-get-your-cloudflare-credentials-2min">Step 3: Get Your Cloudflare Credentials (2Â min)</h3>
<pre class="language-bash" data-language="bash"><code is:raw="" class="language-bash"><span class="token comment"># Get your Cloudflare accountÂ ID</span>
wrangler <span class="token function">whoami</span>

<span class="token comment"># OrÂ get itÂ from:Â Â§Â§URLÂ§Â§39Â§Â§</span>
<span class="token comment"># Find your Account ID inÂ theÂ rightÂ sidebar</span>
</code></pre>
<p>Update your <code>.env</code> fileÂ with:</p>
<ul>
<li><code>CLOUDFLARE_ACCOUNT_ID</code> â€“ FromÂ above</li>
<li><code>CLOUDFLARE_ZONE_ID</code> â€“ FromÂ your domainâ€™s DNS settings (ifÂ using customÂ domain)</li>
<li><code>DOMAIN</code> â€“ Your actual domain (e.g.,Â example.com)</li>
</ul>
<h3 id="step-4-create-github-personal-access-token-1min">Step 4: Create GitHub Personal Access Token (1Â min)</h3>
<ol>
<li>GoÂ toÂ <a href="https://github.com/settings/tokens" class="external-link" target="_blank" rel="noopener noreferrer" hx-disable="">Â§Â§URLÂ§Â§40Â§Â§</a></li>
<li>Click â€œGenerate new tokenâ€ â†’ â€œGenerate new tokenÂ (classic)â€</li>
<li>Name it: <code>StandardÂ Comments</code></li>
<li><strong>Scopes:</strong> Check <code>repo</code> (full control ofÂ privateÂ repositories)</li>
<li>Click â€œGenerateÂ tokenâ€</li>
<li><strong>Copy theÂ token</strong> andÂ add toÂ your <code>.env</code>:
<pre class="language-bash" data-language="bash"><code is:raw="" class="language-bash"><span class="token assign-left variable">GITHUB_TOKEN</span><span class="token operator">=</span>ghp_your_token_here
</code></pre>
</li>
</ol>
<h3 id="step-5-deploy-tocloudflare-1min">Step 5: Deploy toÂ Cloudflare (1Â min)</h3>
<pre class="language-bash" data-language="bash"><code is:raw="" class="language-bash"><span class="token comment"># Set productionÂ secrets</span>
wrangler secret put GITHUB_TOKEN <span class="token parameter variable">â€“env</span> production
wrangler secret put MODERATION_EMAIL <span class="token parameter variable">â€“env</span> production
wrangler secret put GITHUB_WEBHOOK_SECRET <span class="token parameter variable">â€“env</span> production

<span class="token comment">#Â Deploy</span>
wrangler publish <span class="token parameter variable">â€“env</span> production
</code></pre>
<p>TheÂ <code>wrangler.toml</code> isÂ automatically generated fromÂ your <code>.env</code>Â file!</p>
<h3 id="step-6-add-comments-toyour-pages-1min">Step 6: Add Comments toÂ Your Pages (1Â min)</h3>
<p><strong>Option 1: Use Comments LayoutÂ (Easiest)</strong></p>
<p>InÂ your article/blogÂ template:</p>
<pre class="language-html" data-language="html"><code is:raw="" class="language-html">
.njk

# Your Article Content
</code></pre>
<p>ThisÂ automatically includes theÂ full comments section withÂ form andÂ styling. TheÂ page ID isÂ auto-generated fromÂ your fileÂ slug.</p>
<p><strong>Option 2: Use Comments Layout withÂ Options</strong></p>
<pre class="language-html" data-language="html"><code is:raw="" class="language-html">
.njk
commentApiUrl: /api/comments
showCommentForm: true
pollInterval: 30000

</code></pre>
<p><strong>Option 3: Use standardCommentÂ Shortcode</strong></p>
<p>Include theÂ <code>standardComment</code> shortcode inÂ your customÂ layout:</p>
<pre class="language-html" data-language="html"><code is:raw="" class="language-html">
.njk

</code></pre>
<p>TheÂ shortcode automatically creates theÂ comments container andÂ form!</p>
<p>TheÂ <code>standardComment</code> shortcodeÂ automatically:</p>
<ul>
<li>âœ… Renders semantic HTML withÂ fieldset, legend, properÂ labels</li>
<li>âœ… Auto-initializes whenÂ â€œ isÂ inÂ frontmatter</li>
<li>âœ… Loads andÂ displays existing comments (auto-generated page ID fromÂ fileÂ slug)</li>
<li>âœ… Handles formÂ submission</li>
<li>âœ… Integrates withÂ Standard designÂ tokens</li>
<li>âœ… Includes errorÂ handling</li>
</ul>
<p>Customize withÂ options:</p>
<pre class="language-html" data-language="html"><code is:raw="" class="language-html"><span class="token comment">&#x3C;!â€“ Hide reset buttonÂ â€“></span>
{% standardComment true, false %}

<span class="token comment">&#x3C;!â€“ Hide submit buttonÂ â€“></span>
{% standardComment false, true %}
</code></pre>
<p><strong>Option 4: Include asÂ Partial</strong></p>
<pre class="language-html" data-language="html"><code is:raw="" class="language-html">{% set commentPageId = page.fileSlug %}
{% include "comments.njk" %}
</code></pre>
<p><strong>Option 5: ManualÂ Setup</strong></p>
<pre class="language-html" data-language="html"><code is:raw="" class="language-html"><span class="token comment">&#x3C;!â€“ Add form toÂ your pageÂ â€“></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">â€œ</span>comments<span class="token punctuation">â€œ</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>form</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">â€œ</span>comment-form<span class="token punctuation">â€œ</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">â€œ</span>text<span class="token punctuation">â€œ</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">â€œ</span>author<span class="token punctuation">â€œ</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">â€œ</span>Name<span class="token punctuation">â€œ</span></span> <span class="token attr-name">required</span> <span class="token punctuation">/></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">â€œ</span>email<span class="token punctuation">â€œ</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">â€œ</span>email<span class="token punctuation">â€œ</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">â€œ</span>Email<span class="token punctuation">â€œ</span></span> <span class="token attr-name">required</span> <span class="token punctuation">/></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>textarea</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">â€œ</span>content<span class="token punctuation">â€œ</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">â€œ</span>Comment<span class="token punctuation">â€œ</span></span> <span class="token attr-name">required</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>textarea</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">â€œ</span>submit<span class="token punctuation">â€œ</span></span><span class="token punctuation">></span></span>Post<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>button</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>form</span><span class="token punctuation">></span></span>

<span class="token comment">&#x3C;!â€“ Include scriptsÂ â€“></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">â€œ</span>/assets/standard/standard.comment.js<span class="token punctuation">â€œ</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">const</span> comments <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GitHubComments</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">apiUrl</span><span class="token operator">:</span> <span class="token string">'/api/commentsâ€™</span><span class="token punctuation">,</span>
    <span class="token literal-property property">pageId</span><span class="token operator">:</span> <span class="token string">â€˜blog/my-postâ€™</span><span class="token punctuation">,</span>
    <span class="token literal-property property">container</span><span class="token operator">:</span> <span class="token string">'#commentsâ€™</span><span class="token punctuation">,</span>
    <span class="token literal-property property">form</span><span class="token operator">:</span> <span class="token string">'#comment-form'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> comments<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> comments<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> comments<span class="token punctuation">.</span><span class="token function">attachFormHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>script</span><span class="token punctuation">></span></span>
</code></pre>
<h3 id="step-7-test--deploy-2min">Step 7: Test &#x26; Deploy (2Â min)</h3>
<ol>
<li>Build andÂ run locally: <code>npm run build &#x26;&#x26; npmÂ start</code></li>
<li>Submit aÂ test comment onÂ yourÂ site</li>
<li>Check GitHub repo: <code>data/comments/blog/my-post/</code></li>
<li>ShouldÂ see aÂ <code>.json</code> file withÂ yourÂ comment</li>
<li>Comment appears onÂ page afterÂ refresh</li>
<li>Deploy: <code>wrangler publish â€“envÂ production</code></li>
</ol>
<h2 id="minimal-example">Minimal Example</h2>
<pre class="language-html" data-language="html"><code is:raw="" class="language-html">
.njk

# Your Article Content Here
</code></pre>
<p>Thatâ€™s it! JustÂ set â€œ inÂ your frontmatter andÂ use theÂ <code>comments.njk</code> layout. Everything worksÂ automatically:</p>
<ul>
<li>âœ… Semantic form withÂ fieldset, legend,Â labels</li>
<li>âœ… CommentsÂ container</li>
<li>âœ… Auto-initialized comments loading (page ID fromÂ fileÂ slug)</li>
<li>âœ… Form submissionÂ handling</li>
<li>âœ… ErrorÂ handling</li>
</ul>
<p>OrÂ ifÂ you prefer toÂ build your ownÂ layout:</p>
<pre class="language-html" data-language="html"><code is:raw="" class="language-html">
.njk

<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">â€œ</span>comments<span class="token punctuation">â€œ</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>div</span><span class="token punctuation">></span></span>

</code></pre>
<p>JustÂ set â€œ inÂ your frontmatter andÂ theÂ shortcode handles theÂ rest!</p>
<h2 id="shortcodes-reference">Shortcodes Reference</h2>
<p>Standard provides aÂ powerful shortcode forÂ comments thatÂ handlesÂ everything:</p>
<h3 id="">â€œ</h3>
<p>Renders aÂ semantic HTML comment form ANDÂ automatically initializes theÂ commentsÂ system.</p>
<p><strong>Usage:</strong></p>
<pre class="language-html" data-language="html"><code is:raw="" class="language-html"></code></pre>
<p>TheÂ shortcode automatically detects â€œ fromÂ your frontmatter andÂ initializes comments. NoÂ separate initializationÂ needed!</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>showSubmit</code> (boolean, default: <code>true</code>) â€“ Show submitÂ button</li>
<li><code>showReset</code> (boolean, default: <code>true</code>) â€“ Show resetÂ button</li>
</ul>
<p><strong>Example:</strong></p>
<pre class="language-html" data-language="html"><code is:raw="" class="language-html"><span class="token comment">&#x3C;!â€“ Hide reset buttonÂ â€“></span>
{% standardComment true, false %}

<span class="token comment">&#x3C;!â€“ Hide submit buttonÂ â€“></span>
{% standardComment false, true %}
</code></pre>
<p><strong>Auto-initializationÂ (Frontmatter):</strong> TheÂ shortcode reads fromÂ yourÂ frontmatter:</p>
<ul>
<li>â€œ â€“ Enable comments (page ID auto-generated fromÂ fileÂ slug)</li>
<li><code>commentApiUrl</code> â€“ API endpoint (default: <code>/api/comments</code>)</li>
<li><code>pollInterval</code> â€“ Auto-refresh interval inÂ ms</li>
</ul>
<p><strong>Features:</strong></p>
<ul>
<li>âœ… Semantic HTML: <code>&#x3C;fieldset></code>, <code>&#x3C;legend></code>, proper <code>&#x3C;label></code>Â associations</li>
<li>âœ… Accessible: ARIA labels forÂ requiredÂ fields</li>
<li>âœ… Design tokens: Uses Standard CSS variables forÂ consistentÂ styling</li>
<li>âœ… Auto-initializes: NoÂ separate initialization shortcodeÂ needed</li>
<li>âœ… Loads fetches fromÂ GitHub</li>
<li>âœ… Handles submission: Form submission isÂ automatic</li>
<li>âœ… Error handling: User-friendly errorÂ messages</li>
<li>âœ… Privacy notice: Linked toÂ your privacy andÂ termsÂ pages</li>
<li>âœ… Responsive: Works onÂ mobile andÂ desktop</li>
</ul>
<h3 id="-optional">â€œ (Optional)</h3>
<p>ForÂ advanced use cases whereÂ you need manual initialization withÂ customÂ options.</p>
<p><strong>Usage:</strong></p>
<pre class="language-html" data-language="html"><code is:raw="" class="language-html">{% initComments "blog/my-post" %}
</code></pre>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>pageId</code> (string, required) â€“ Unique identifier forÂ theÂ page</li>
<li><code>apiUrl</code> (string, default: <code>/api/comments</code>) â€“ APIÂ endpoint</li>
<li><code>container</code> (string, default: <code>#comments</code>) â€“ Comments containerÂ selector</li>
<li><code>form</code> (string, default: <code>#comment-form</code>) â€“ Form elementÂ selector</li>
<li><code>pollInterval</code> (number, default: <code>null</code>) â€“ Auto-refresh interval inÂ ms</li>
</ul>
<p><strong>Note:</strong> You onlyÂ need thisÂ ifÂ youâ€™re NOT using <code>commentForm</code>, orÂ ifÂ you need custom containerÂ selectors.</p>
<h2 id="environment-variables">Environment Variables</h2>
<pre class="language-toml" data-language="toml"><code is:raw="" class="language-toml"><span class="token comment">#Â Required</span>
<span class="token key property">GITHUB_TOKEN</span> <span class="token punctuation">=</span> <span class="token string">â€œghp_xxxxxâ€¦â€</span>           <span class="token comment"># Personal accessÂ token</span>
<span class="token key property">GITHUB_OWNER</span> <span class="token punctuation">=</span> <span class="token string">â€œyour-usernameâ€</span>           <span class="token comment"># GitHub username orÂ org</span>
<span class="token key property">GITHUB_REPO</span> <span class="token punctuation">=</span> <span class="token string">â€œyour-repo-nameâ€</span>           <span class="token comment"># Repo name whereÂ commentsÂ go</span>
<span class="token key property">GITHUB_COMMENTS_PATH</span> <span class="token punctuation">=</span> <span class="token string">â€œdata/commentsâ€</span>   <span class="token comment"># Path inÂ repo forÂ comments</span>

<span class="token comment">#Â Optional</span>
<span class="token key property">MODERATION_EMAIL</span> <span class="token punctuation">=</span> <span class="token string">â€œÂ§Â§EMAILÂ§Â§41Â§Â§â€</span>     <span class="token comment"># Email forÂ moderationÂ alerts</span>
<span class="token key property">SPAM_CHECK_ENABLED</span> <span class="token punctuation">=</span> <span class="token string">â€œtrueâ€</span>              <span class="token comment"># Enable spam detection (default:Â true)</span>
</code></pre>
<h2 id="key-features">Key Features</h2>
<p>âœ… <strong>Comments asÂ Files</strong> â€” EachÂ comment = JSON file inÂ GitHub âœ… <strong>SpamÂ Detection</strong> â€” Automatic flagging ofÂ suspicious comments âœ… <strong>Moderation</strong> â€” Email alerts forÂ flagged comments âœ… <strong>Threading</strong> â€” Nested/reply comments withÂ visual hierarchy âœ… <strong>Markdown</strong> â€” Support forÂ <strong>bold</strong>, <em>italic</em>, <code>code</code>, <a href="url" preload="" hx-boost="true">links</a> âœ… <strong>Responsive</strong> â€” Works onÂ mobile andÂ desktop âœ… <strong>Caching</strong> â€” Efficient comment storage andÂ retrieval âœ… <strong>CORS</strong> â€” Ready forÂ cross-domainÂ requests</p>
<h2 id="file-structure-after-setup">File Structure After Setup</h2>
<pre class="language-plaintext" data-language="plaintext"><code is:raw="" class="language-plaintext">your-repo/
â”œâ”€â”€ data/
â”‚   â””â”€â”€ comments/
â”‚       â””â”€â”€ blog/
â”‚           â””â”€â”€ my-post/
â”‚               â”œâ”€â”€ 1729609945000-a7x9k2m1.json
â”‚               â”œâ”€â”€ 1729609967000-b4z2k9p3.json
â”‚               â””â”€â”€ 1729610005000-c8m5l1q7.json
â”œâ”€â”€ functions/
â”‚   â””â”€â”€ api/
â”‚       â””â”€â”€ comments.js
â””â”€â”€ wrangler.toml
</code></pre>
<h2 id="comment-json-format">Comment JSON Format</h2>
<pre class="language-json" data-language="json"><code is:raw="" class="language-json"><span class="token punctuation">{</span>
  <span class="token property">â€œidâ€</span><span class="token operator">:</span> <span class="token string">â€œ1,729,609,945,000-a7x9k2m1â€</span><span class="token punctuation">,</span>
  <span class="token property">â€œpageIdâ€</span><span class="token operator">:</span> <span class="token string">â€œblog/my-postâ€</span><span class="token punctuation">,</span>
  <span class="token property">â€œauthorâ€</span><span class="token operator">:</span> <span class="token string">â€œJohnÂ Doeâ€</span><span class="token punctuation">,</span>
  <span class="token property">â€œemailâ€</span><span class="token operator">:</span> <span class="token string">â€œÂ§Â§EMAILÂ§Â§42Â§Â§â€</span><span class="token punctuation">,</span>
  <span class="token property">â€œcontentâ€</span><span class="token operator">:</span> <span class="token string">â€œGreatÂ post!â€</span><span class="token punctuation">,</span>
  <span class="token property">â€œparentIdâ€</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
  <span class="token property">â€œcreatedAtâ€</span><span class="token operator">:</span> <span class="token string">â€œ2024-10-22T15:32:25.000Zâ€</span><span class="token punctuation">,</span>
  <span class="token property">â€œapprovedâ€</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">â€œspamâ€</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">â€œspamReasonsâ€</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">â€œspamConfidenceâ€</span><span class="token operator">:</span> <span class="token number">0.1</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="common-issues">Common Issues</h2>
<h3 id="github-401-unauthorized">GitHub 401 Unauthorized</h3>
<ul>
<li>Token expired orÂ incorrect</li>
<li>Token doesnâ€™t have <code>repo</code>Â scope</li>
<li><strong>Fix</strong>: Generate new token withÂ properÂ scope</li>
</ul>
<h3 id="github-404-not-found">GitHub 404 Not Found</h3>
<ul>
<li><code>GITHUB_OWNER</code> orÂ <code>GITHUB_REPO</code>Â incorrect</li>
<li><code>data/comments</code> directory doesnâ€™tÂ exist</li>
<li><strong>Fix</strong>: Verify settings andÂ createÂ directory</li>
</ul>
<h3 id="comments-not-appearing">Comments not appearing</h3>
<ul>
<li>Check function logs: <code>wrangler tail â€“envÂ production</code></li>
<li>Verify CORS headers inÂ response</li>
<li>Check browser console forÂ errors</li>
<li><strong>Fix</strong>: Review logs andÂ test API endpointÂ directly</li>
</ul>
<h3 id="spam-detection-tooaggressive">Spam detection tooÂ aggressive</h3>
<ul>
<li>Adjust <code>spamKeywords</code> inÂ <code>comments.js</code></li>
<li>Lower spam confidenceÂ threshold</li>
<li>Disable spam check: <code>SPAM_CHECK_ENABLED =Â â€œfalseâ€</code></li>
</ul>
<h2 id="api-endpoints">API Endpoints</h2>
<h3 id="post-apicomments">POST /api/comments</h3>
<p>Submit aÂ comment</p>
<pre class="language-bash" data-language="bash"><code is:raw="" class="language-bash"><span class="token function">curl</span> <span class="token parameter variable">-X</span> POST https://your-domain/api/comments <span class="token punctuation">\</span>
  <span class="token parameter variable">-H</span> <span class="token string">â€œContent-Type:Â application/jsonâ€</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-d</span> <span class="token string">'{ â€œpageIdâ€: â€œblog/my-postâ€, â€œauthorâ€: â€œJohnâ€, â€œemailâ€: â€œÂ§Â§EMAILÂ§Â§43Â§Â§â€, â€œcontentâ€: â€œGreat post!â€, â€œparentIdâ€: nullÂ }'</span>
</code></pre>
<h3 id="get-apicommentspageid">GET /api/comments?pageId=â€¦</h3>
<p>Fetch comments forÂ aÂ page</p>
<pre class="language-bash" data-language="bash"><code is:raw="" class="language-bash"><span class="token function">curl</span> https://your-domain/api/comments?pageId<span class="token operator">=</span>blog/my-post
</code></pre>
<h2 id="moderation">Moderation</h2>
<ol>
<li><strong>Monitor</strong>: Check email forÂ moderationÂ alerts</li>
<li><strong>Review</strong>: GoÂ toÂ GitHub repo, find comment JSONÂ file</li>
<li><strong>Approve</strong>:
<ul>
<li>Edit JSONÂ file</li>
<li>Change <code>â€œapprovedâ€:Â false</code> toÂ <code>â€œapprovedâ€:Â true</code></li>
<li>SaveÂ commit</li>
</ul>
</li>
<li><strong>Delete</strong>:
<ul>
<li>Delete JSONÂ file</li>
<li>CommitÂ deletion</li>
</ul>
</li>
</ol>
<h2 id="advanced-features">Advanced Features</h2>
<h3 id="enable-real-time-updates">Enable Real-time Updates</h3>
<pre class="language-javascript" data-language="javascript"><code is:raw="" class="language-javascript"><span class="token keyword">const</span> comments <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GitHubComments</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">pollInterval</span><span class="token operator">:</span> <span class="token number">30,000</span><span class="token punctuation">,</span> <span class="token comment">// Check every 30Â seconds</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
comments<span class="token punctuation">.</span><span class="token function">startPolling</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="custom-spam-keywords">Custom Spam Keywords</h3>
<p>Edit <code>detectSpam()</code> inÂ <code>comments.js</code>:</p>
<pre class="language-javascript" data-language="javascript"><code is:raw="" class="language-javascript"><span class="token keyword">const</span> spamKeywords <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token string">â€œviagraâ€</span><span class="token punctuation">,</span> <span class="token string">â€œcasinoâ€</span><span class="token punctuation">,</span> <span class="token string">â€œcustom-wordâ€</span><span class="token punctuation">,</span> <span class="token comment">// AddÂ yours</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="rate-limiting">Rate Limiting</h3>
<p>Add Cloudflare rate limiting toÂ <code>wrangler.toml</code>:</p>
<pre class="language-toml" data-language="toml"><code is:raw="" class="language-toml"><span class="token punctuation">[</span><span class="token table class-name">env.production</span><span class="token punctuation">]</span>
<span class="token key property">routes</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> <span class="token key property">pattern</span> <span class="token punctuation">=</span> <span class="token string">â€œexample.com/api/commentsâ€</span><span class="token punctuation">,</span> <span class="token key property">zone_name</span> <span class="token punctuation">=</span> <span class="token string">â€œexample.comâ€</span><span class="token punctuation">,</span> <span class="token key property">custom_domain</span> <span class="token punctuation">=</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre>
<h3 id="email-notifications">Email Notifications</h3>
<p>Integrate SendGrid orÂ Mailgun inÂ <code>sendModerationEmail()</code>:</p>
<pre class="language-javascript" data-language="javascript"><code is:raw="" class="language-javascript"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">sendModerationEmail</span><span class="token punctuation">(</span><span class="token parameter">comment<span class="token punctuation">,</span> spamDetection<span class="token punctuation">,</span>Â env</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">â€œÂ§Â§URLÂ§Â§44Â§Â§</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token comment">// â€¦ SendGridÂ config</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="full-documentation">Full Documentation</h2>
<p>ForÂ complete docs, examples, andÂ advanced features: â†’ See <code>COMMENTS-GUIDE.md</code></p>
<h2 id="next-steps">Next Steps</h2>
<ol>
<li>âœ… Deploy commentsÂ system</li>
<li>âœ… Test commentÂ submission</li>
<li>â­ Add toÂ multipleÂ pages</li>
<li>ğŸ“§ Configure moderationÂ emails</li>
<li>ğŸ”§ Customize spamÂ detection</li>
<li>ğŸ¨ Style commentsÂ section</li>
</ol>
<h2 id="support">Support</h2>
<ul>
<li>GitHub Issues: ReportÂ bugs</li>
<li>Pull Requests: ContributeÂ improvements</li>
<li>Discussions: AskÂ questions</li>
</ul>
<h2 id="files-reference">Files Reference</h2>
<p>| File | Purpose | ||â€”| | <code>comments.js</code> | Server handler, validation, GitHub API | | <code>standard.comment.js</code> | Browser library, rendering, form | | <code>comments-example.js</code> | Ready-to-deploy endpoint | | <code>comments-template.html</code> | HTML + CSS template | | <code>wrangler-comments.toml.template</code> | Cloudflare config | | <code>COMMENTS-GUIDE.md</code> | Complete documentation | | <code>COMMENTS-QUICK-START.md</code> | ThisÂ fileÂ |</p>
<p>Happy commenting!Â ğŸ‰</p>  <article class="comments-system"> <div id="comments"></div> <button id="show-comment-form-btn" type="button" class="button" onclick="document.getElementById('comment-form-wrapper').style.display='block'; this.style.display='none';">
Write a Comment
</button> <div id="comment-form-wrapper" style="display: none;"> <form id="comment-form" method="post" action="/api/comments" novalidate> <fieldset> <legend>Leave a Comment</legend> <label for="author">Your Name <span aria-label="required">*</span></label> <input type="text" id="author" name="author" placeholder="Your name will be displayed with your comment." required maxlength="100"> <label for="email">Email Address <span aria-label="required">*</span></label> <input type="email" id="email" name="email" placeholder="Your email will not be displayed publicly." required> <label for="content">Comment <span aria-label="required">*</span></label> <textarea id="content" name="content" placeholder="Share your thoughts... Supports **bold**, *italic*, `code`, and [links](url)" required minlength="3" maxlength="10000" rows="6"></textarea> <!-- Hidden fields --> <input type="hidden" id="pageId" name="pageId" value="cloudflare_comments_COMMENTS-QUICK-START"> <input type="hidden" id="parentId" name="parentId" value=""> <!-- Status indicator --> <div id="form-status" role="status" aria-live="polite"></div> <!-- Submit buttons --> <div class="form-actions"> <button type="submit" class="button">Post Comment</button>   </div> </fieldset> </form> </div> </article> <script defer>(function(){const initOptions = {"apiUrl":"/api/comments","pageId":"cloudflare_comments_COMMENTS-QUICK-START","container":"#comments","form":"#comment-form","pollInterval":null};

  document.addEventListener("DOMContentLoaded", async () => {
    // Assuming GitHubComments is loaded globally or imported. 
    // Since the original used a global script, we might need to import it here or assume it's available.
    // For now, we'll assume the user includes the standard.comment.js script separately or we should import it.
    // But standard.comment.js is in dist/.
    
    if (typeof GitHubComments !== 'undefined') {
      const comments = new GitHubComments(initOptions);
      try {
        await comments.load();
        comments.render();
      } catch (error) {
        console.error("Error loading comments:", error);
        const container = document.querySelector("#comments");
        if (container) container.innerHTML = '<p class="error">Failed to load comments. Please try again later.</p>';
      }
      comments.attachFormHandler();
    }
  });
})();</script> </main> <hr> <footer class="smaller font-interface"> <p>
Â© 2025 Francis Fontaine Â·
<a href="/">Standard Framework</a> Â·
<a href="https://github.com/ZeFish/Standard/blob/main/LICENSE" class="external-link">MIT License</a> </p> </footer> </body></html>