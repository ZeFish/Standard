/**
 * Image Zoom - Standalone
 *
 * A lightweight image zoom library with keyboard navigation.
 * Click any image to zoom, use arrow keys to navigate, ESC to close.
 *
 * Features:
 * - Click to zoom in/out
 * - Keyboard navigation (←/→ arrows)
 * - ESC to close
 * - Wraps around image gallery
 * - Auto-injects required CSS
 * - Custom events for extensibility
 * - Configurable selectors
 *
 * @version 1.0.0
 * @license MIT
 * @author Your Name
 */
class ImageZoom{constructor(t={}){this.options={selector:"img:not([data-no-zoom])",zoomedClass:"zoomed",enableKeyboardNav:!0,enableCustomEvents:!0,backdropOpacity:.85,...t},this.currentZoomedImage=null,this.images=[],this.init()}init(){this.injectStyles(),this.bindClickEvents(),this.options.enableKeyboardNav&&this.bindKeyboardEvents(),this.dispatchEvent("initialized",{})}injectStyles(){const t="image-zoom-styles";if(document.getElementById(t))return;const e=document.createElement("style");e.id=t,e.textContent=`\n      /* Image Zoom Styles */\n      img.${this.options.zoomedClass} {\n        position: fixed !important;\n        top: 50% !important;\n        left: 50% !important;\n        transform: translate(-50%, -50%) !important;\n        max-width: 95vw !important;\n        max-height: 95vh !important;\n        width: auto !important;\n        height: auto !important;\n        z-index: 9999 !important;\n        cursor: zoom-out !important;\n        object-fit: contain !important;\n        box-shadow: 0 0 0 100vmax rgba(0, 0, 0, ${this.options.backdropOpacity}) !important;\n        margin: 0 !important;\n        padding: 0 !important;\n        transition: none !important;\n      }\n\n      /* Cursor hint for zoomable images */\n      ${this.options.selector} {\n        cursor: zoom-in;\n        transition: opacity 0.2s ease;\n      }\n\n      ${this.options.selector}:hover {\n        opacity: 0.9;\n      }\n\n      /* Prevent body scroll when zoomed */\n      body.image-zoomed {\n        overflow: hidden !important;\n      }\n\n      /* Smooth transitions */\n      img {\n        transition: opacity 0.2s ease;\n      }\n    `,document.head.appendChild(e)}refreshImages(){return this.images=Array.from(document.querySelectorAll(this.options.selector)),this.images.length}bindClickEvents(){document.addEventListener("click",t=>{const e=t.target.closest(this.options.selector);e?(t.preventDefault(),t.stopPropagation(),this.toggle(e)):this.currentZoomedImage&&this.close()})}bindKeyboardEvents(){document.addEventListener("keydown",t=>{if(this.currentZoomedImage)switch(t.key){case"Escape":t.preventDefault(),this.close();break;case"ArrowLeft":case"ArrowUp":t.preventDefault(),this.navigate(-1);break;case"ArrowRight":case"ArrowDown":t.preventDefault(),this.navigate(1)}})}toggle(t){this.currentZoomedImage===t?this.close():this.open(t)}open(t){this.currentZoomedImage&&this.close(),t.classList.add(this.options.zoomedClass),this.currentZoomedImage=t,document.body.classList.add("image-zoomed"),this.dispatchEvent("open",{image:t})}close(){if(!this.currentZoomedImage)return;const t=this.currentZoomedImage;t.classList.remove(this.options.zoomedClass),this.currentZoomedImage=null,document.body.classList.remove("image-zoomed"),this.dispatchEvent("close",{image:t})}navigate(t){if(!this.currentZoomedImage)return;this.refreshImages();const e=this.images.indexOf(this.currentZoomedImage);if(-1===e)return;const o=(e+t+this.images.length)%this.images.length,n=this.images[o];n&&this.open(n)}dispatchEvent(t,e){this.options.enableCustomEvents&&"undefined"!=typeof CustomEvent&&document.dispatchEvent(new CustomEvent(`imagezoom:${t}`,{detail:{...e,timestamp:Date.now(),instance:this},bubbles:!0,cancelable:!0}))}updateOptions(t){if(this.options={...this.options,...t},void 0!==t.backdropOpacity){const t=document.getElementById("image-zoom-styles");t&&t.remove(),this.injectStyles()}this.dispatchEvent("optionsUpdated",{options:this.options})}getState(){return{isZoomed:!!this.currentZoomedImage,currentImage:this.currentZoomedImage,totalImages:this.refreshImages(),currentIndex:this.currentZoomedImage?this.images.indexOf(this.currentZoomedImage):-1}}destroy(){this.currentZoomedImage&&this.close();const t=document.getElementById("image-zoom-styles");t&&t.remove(),this.dispatchEvent("destroyed",{}),this.currentZoomedImage=null,this.images=[]}}if("undefined"!=typeof window){window.ImageZoom=ImageZoom;const t=()=>{window.imageZoom=new ImageZoom};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):t()}"undefined"!=typeof module&&module.exports&&(module.exports={ImageZoom:ImageZoom}),"undefined"!=typeof exports&&(exports.ImageZoom=ImageZoom);