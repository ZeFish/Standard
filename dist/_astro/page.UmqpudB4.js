var $=(d,o)=>()=>(o||d((o={exports:{}}).exports,o),o.exports);var z=$((R,y)=>{(function(){const d={duration:4e3,position:"top-center",pauseOnHover:!0,showProgress:!0,closeButton:!1,maxToasts:5,animation:"slide",role:"status"},o={};let c=[],a=0;function m(e){if(o[e])return o[e];const n=document.createElement("div");return n.className=`toast-container toast-container-${e}`,n.setAttribute("aria-live","polite"),n.setAttribute("aria-atomic","false"),document.body.appendChild(n),o[e]=n,n}function h(e,n,r){const i=document.createElement("div");i.className=`toast toast-${n}`,i.setAttribute("role",r.role);const w=document.createElement("div");w.className="toast-content";const l=document.createElement("span");l.className="toast-icon",l.setAttribute("aria-hidden","true"),l.textContent=p(n);const f=document.createElement("div");if(f.className="toast-message",f.textContent=e,w.appendChild(l),w.appendChild(f),r.closeButton){const u=document.createElement("button");u.className="toast-close",u.setAttribute("aria-label","Close notification"),u.innerHTML="×",u.addEventListener("click",()=>s(i)),w.appendChild(u)}if(i.appendChild(w),r.showProgress&&r.duration>0){const u=document.createElement("div");u.className="toast-progress",i.appendChild(u),i._progressBar=u}return i}function p(e){return{success:"✓",error:"✕",warning:"⚠",info:"ℹ"}[e]||"ℹ"}function g(e,n="info",r={}){const i={...d,...r};if(a>=i.maxToasts){c.push({message:e,type:n,options:i});return}const w=m(i.position),l=h(e,n,i);w.appendChild(l),a++,l.offsetHeight,requestAnimationFrame(()=>{l.classList.add("toast-visible")});let f,u,L=i.duration;function S(){i.duration<=0||(u=Date.now(),f=setTimeout(()=>{s(l)},L),l._progressBar&&(l._progressBar.style.transition=`width ${L}ms linear`,l._progressBar.style.width="0%"))}function H(){if(!(i.duration<=0)&&(clearTimeout(f),L-=Date.now()-u,l._progressBar)){const E=window.getComputedStyle(l._progressBar);l._progressBar.style.width=E.width,l._progressBar.style.transition="none"}}i.pauseOnHover&&(l.addEventListener("mouseenter",H),l.addEventListener("mouseleave",S)),S();const C=E=>{E.key==="Escape"&&s(l)};return document.addEventListener("keydown",C),l._escapeHandler=C,l}function s(e){e.classList.remove("toast-visible"),e.classList.add("toast-dismissing"),setTimeout(()=>{if(e.parentNode&&e.parentNode.removeChild(e),e._escapeHandler&&document.removeEventListener("keydown",e._escapeHandler),a--,c.length>0){const n=c.shift();g(n.message,n.type,n.options)}},300)}const t={success(e,n={}){return g(e,"success",n)},error(e,n={}){return g(e,"error",{...n,role:"alert"})},warning(e,n={}){return g(e,"warning",n)},info(e,n={}){return g(e,"info",n)},show(e,n="info",r={}){return g(e,n,r)},dismissAll(){Object.values(o).forEach(e=>{e.querySelectorAll(".toast").forEach(s)}),c=[]},configure(e){Object.assign(d,e)}};typeof window<"u"&&(window.toast=t),typeof y<"u"&&y.exports&&(y.exports=t)})();(function(){class d{constructor(t={}){this.apiUrl=t.apiUrl||"/api/comments",this.pageId=t.pageId,this.container=typeof t.container=="string"?document.querySelector(t.container):t.container||document.querySelector("#comments"),this.formSelector=t.form||"#comment-form",this.comments=[],this.loading=!1,this.pollInterval=t.pollInterval||null,this.pollTimer=null,this.onLoad=t.onLoad||null,this.onRender=t.onRender||null}async load(){if(!this.pageId)return console.error("GitHubComments: pageId is required"),this.error="Configuration error: pageId is required",[];this.loading=!0,this.error=null;try{const t=await fetch(`${this.apiUrl}?pageId=${encodeURIComponent(this.pageId)}`);if(!t.ok)throw new Error(`API error: ${t.status}`);const e=await t.json();if(this.comments=e.comments||[],this.loading=!1,typeof this.onLoad=="function")try{this.onLoad(this.comments)}catch{}return this.comments}catch(t){return console.error("Error loading comments:",t),this.loading=!1,this.error=t.message||"Failed to load comments. Please try again later.",[]}}async submit(t){try{const e=await fetch(this.apiUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pageId:this.pageId,...t})});if(!e.ok){let r=`API error: ${e.status}`;try{r=(await e.json()).message||r}catch{r=`API endpoint not available (${e.status})`}throw new Error(r)}const n=await e.json();return n.comment&&(this.comments.push(n.comment),this.comments.sort((r,i)=>new Date(i.createdAt)-new Date(r.createdAt))),n}catch(e){throw console.error("Error submitting comment:",e),e}}formatTime(t){const e=new Date(t),r=Math.floor((new Date-e)/1e3);return r<60?"just now":r<3600?`${Math.floor(r/60)}m ago`:r<86400?`${Math.floor(r/3600)}h ago`:r<604800?`${Math.floor(r/86400)}d ago`:e.toLocaleDateString()}escapeHTML(t){const e=document.createElement("div");return e.textContent=t,e.innerHTML}formatContent(t){let e=this.escapeHTML(t);return e=e.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>"),e=e.replace(/\*(.+?)\*/g,"<em>$1</em>"),e=e.replace(/_(.+?)_/g,"<em>$1</em>"),e=e.replace(/```(.*?)```/gs,"<pre><code>$1</code></pre>"),e=e.replace(/`(.+?)`/g,"<code>$1</code>"),e=e.replace(/\[(.+?)\]\((.+?)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer">$1</a>'),e=e.replace(/\n/g,"<br>"),e}renderComment(t,e=0){const n=t.approved!==!1?"":' data-pending="true"',r=t.spam?' data-spam="true"':"";return`
      <div class="comment" data-id="${this.escapeHTML(String(t.id))}" data-level="${e}"${n}${r}>
        <div class="comment-header">
          <span class="comment-author">${this.escapeHTML(t.author||"Anonymous")}</span>
          <span class="comment-date">${this.formatTime(t.createdAt)}</span>
          ${t.spam?'<span class="comment-flag">Flagged as spam</span>':""}
          ${t.approved?"":'<span class="comment-pending">Awaiting moderation</span>'}
        </div>
        <div class="comment-content">${this.formatContent(t.content||"")}</div>
      </div>
    `}buildCommentTree(){const t={},e=[];for(const n of this.comments)t[n.id]={...n,replies:[]};for(const n of this.comments)n.parentId&&t[n.parentId]?t[n.parentId].replies.push(t[n.id]):e.push(t[n.id]);return e}renderTree(t,e=0){return t.map(n=>{let r=this.renderComment(n,e);return n.replies&&n.replies.length>0&&(r+=`<div class="comment-replies">${this.renderTree(n.replies,e+1)}</div>`),r}).join("")}updateFormVisibility(){const t=document.getElementById("show-comment-form-btn");t&&(this.error?t.style.display="none":t.style.display="")}render(){if(!this.container){console.error("GitHubComments: container not found");return}if(this.error){this.container.innerHTML=`
        <aside class="comments debug" role="alert">
          Error loading comments: ${this.escapeHTML(this.error)}
        </aside>
      `,this.updateFormVisibility();return}if(this.comments.length===0){this.container.innerHTML='<p class="comments-empty">No comments yet. Be the first to comment!</p>',this.updateFormVisibility();return}const t=this.buildCommentTree();if(this.container.innerHTML=this.renderTree(t),this.attachReplyHandlers(),this.updateFormVisibility(),typeof this.onRender=="function")try{this.onRender(this.container)}catch{}}attachReplyHandlers(){this.container&&this.container.querySelectorAll(".comment-reply").forEach(t=>{t.addEventListener("click",e=>{const n=e.target.dataset.parentId,r=document.querySelector(this.formSelector);if(r){const i=r.querySelector('[name="parentId"]');i&&(i.value=n),r.scrollIntoView({behavior:"smooth"})}})})}attachFormHandler(t=null){const e=document.querySelector(t||this.formSelector);if(e){if(e.removeAttribute("hx-boost"),e.setAttribute("hx-disable","true"),window.htmx){const n=e.cloneNode(!0);e.parentNode.replaceChild(n,e),document.querySelector(t||this.formSelector).addEventListener("submit",this._handleFormSubmit.bind(this));return}e.addEventListener("submit",this._handleFormSubmit.bind(this))}}async _handleFormSubmit(t){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation();const e=t.target,n=new FormData(e),r={author:n.get("author"),email:n.get("email"),content:n.get("content"),parentId:n.get("parentId")||null},i=e.querySelector("button[type=submit]"),w=i?i.textContent:"",l=e.querySelector("#form-status");try{i&&(i.disabled=!0,i.textContent="Submitting...",i.style.opacity="0.7"),l&&(l.style.display="block",l.textContent="Sending your comment...",l.style.color="var(--color-foreground, #000)");const f=await this.submit(r);l&&(l.textContent="Comment submitted successfully! It will appear after moderation.",l.style.color="var(--color-green, green)",setTimeout(()=>{l.style.display="none",l.textContent=""},6e3)),e.reset();const u=e.querySelector('[name="parentId"]');return u&&(u.value=""),this.render(),f}catch(f){throw l&&(l.textContent=`Error: ${f.message}`,l.style.color="var(--color-red, red)",l.style.display="block"),f}finally{i&&(i.disabled=!1,i.textContent=w,i.style.opacity="1")}}startPolling(){this.pollInterval&&(this.stopPolling(),this.pollTimer=setInterval(async()=>{const t=this.comments.length;await this.load(),this.comments.length>t&&this.render()},this.pollInterval))}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}}function o(s){if(!s||typeof s!="string")return"index";let t=s.trim();try{t=new URL(t,window.location.origin).pathname}catch{}return t=t.replace(/^\/|\/$/g,""),t===""?"index":(t=t.replace(/[\/]+/g,"_"),t=t.replace(/[^A-Za-z0-9_-]/g,"_"),t)}const c={apiUrl:"/api/comments",containerSelector:"#comments",formSelector:"#comment-form",pollInterval:null,autoInit:!0,pageId:null,onLoad:null,onRender:null};let a=null,m={...c};function h(){if(typeof document>"u")return null;const s=document.querySelector("[data-page-id]")||document.body,t=s&&s.getAttribute&&s.getAttribute("data-page-id");if(t)return t;const e=document.querySelector('meta[name="page-id"]');if(e&&e.content)return e.content;const n=document.querySelector('meta[property="og:url"]');if(n&&n.content)try{return new URL(n.content).pathname}catch{return n.content}const r=document.querySelector('link[rel="canonical"]');if(r&&r.href)try{return new URL(r.href).pathname}catch{return r.href}return null}const p={version:"@VERSION_PLACEHOLDER@",configure(s={}){return Object.assign(m,s||{}),m},getInstance(){return a},createInstance(s={}){const t={apiUrl:m.apiUrl,container:s.container||m.containerSelector,form:s.formSelector||m.formSelector,pollInterval:s.pollInterval!=null?s.pollInterval:m.pollInterval,onLoad:s.onLoad||m.onLoad,onRender:s.onRender||m.onRender},e=s.pageId||m.pageId||h();return t.pageId=o(e||window.location.pathname),a=new d(t),a},async init(s={}){if(typeof document>"u")return null;if(a&&!s.recreate)return a;let t=s.container;t||(t=document.querySelector("[data-comments]")||document.querySelector(m.containerSelector)||m.containerSelector);const e=this.createInstance({...s,container:t});try{await e.load(),e.render()}catch{}try{e.attachFormHandler(s.formSelector||m.formSelector)}catch{}return e.pollInterval&&e.startPolling(),e},async load(){return a||await this.init(),a?a.load():[]},render(){if(!a){console.error("comments: not initialized");return}return a.render()},attachFormHandler(s){if(!a){console.error("comments: not initialized");return}return a.attachFormHandler(s)},submit(s){return a?a.submit(s):Promise.reject(new Error("comments: not initialized"))},startPolling(){if(!a){console.error("comments: not initialized");return}return a.startPolling()},stopPolling(){if(a)return a.stopPolling()},getPageId(){if(a&&a.pageId)return a.pageId;const s=m.pageId||h();return o(s||(typeof window<"u"?window.location.pathname:"index"))}};function g(){if(m.autoInit&&!a)try{p.init().catch(()=>{})}catch{}document.body.addEventListener("htmx:afterSettle",function(s){if(document.querySelector("#comments, [data-comments]")){const e=p.getInstance();e&&e.stopPolling(),p.init({recreate:!0})}})}typeof document<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",g):g()),typeof window<"u"&&(window.comments=p,window.GitHubComments=d),typeof y<"u"&&y.exports&&(y.exports=p)})();/**
 * Image Zoom - Standalone lightbox with keyboard navigation
 *
 * A lightweight image zoom library with full featured lightbox experience.
 * Click any image to zoom, use arrow keys to navigate, ESC to close.
 *
 * Features:
 * - Click to zoom in/out
 * - Keyboard navigation (←/→ arrows, ESC to close)
 * - Click backdrop to close
 * - Auto-closes on scroll
 * - Wraps around image gallery
 * - Custom events for extensibility
 * - Configurable selectors
 * - Graceful degradation (CSS fallback without JS)
 * - HTMX compatible via rescan() method
 *
 * @version @VERSION_PLACEHOLDER@
 * @license MIT
 */class T{constructor(o={}){this.options={selector:"img:not([data-no-zoom])",enableKeyboardNav:!0,...o},this.overlay=null,this.originalImage=null,this.images=[],this.boundKeydownHandler=this.handleKeydown.bind(this),this.boundCloseHandler=this.close.bind(this),this.init()}init(){document.documentElement.classList.add("js-image-zoom-enabled"),document.addEventListener("click",this.handleClick.bind(this))}rescan(){return this.refreshImages(),console.log(`ImageZoom rescanned. Found ${this.images.length} images.`),this.images.length}refreshImages(){return this.images=Array.from(document.querySelectorAll(this.options.selector)),this.images.length}handleClick(o){const c=o.target.closest(this.options.selector);c&&!this.overlay?(o.preventDefault(),o.stopPropagation(),this.open(c)):this.overlay&&(o.preventDefault(),this.close())}handleKeydown(o){if(this.overlay)switch(o.key){case"Escape":o.preventDefault(),this.close();break;case"ArrowLeft":case"ArrowUp":o.preventDefault(),this.navigate(-1);break;case"ArrowRight":case"ArrowDown":o.preventDefault(),this.navigate(1);break}}open(o){if(this.overlay)return;this.originalImage=o,this.overlay=document.createElement("div"),this.overlay.className="image-zoom-overlay";const c=new Image;c.src=this.originalImage.src,c.alt=this.originalImage.alt,this.overlay.appendChild(c),document.body.appendChild(this.overlay),document.documentElement.classList.add("image-zoomed-active"),this.options.enableKeyboardNav&&document.addEventListener("keydown",this.boundKeydownHandler),window.addEventListener("scroll",this.boundCloseHandler),requestAnimationFrame(()=>{this.overlay.classList.add("is-visible")})}close(){this.overlay&&(window.removeEventListener("scroll",this.boundCloseHandler),this.overlay.classList.remove("is-visible"),this.overlay.addEventListener("transitionend",()=>{this.overlay&&(this.overlay.remove(),this.overlay=null)},{once:!0}),document.documentElement.classList.remove("image-zoomed-active"),this.originalImage=null,this.options.enableKeyboardNav&&document.removeEventListener("keydown",this.boundKeydownHandler))}navigate(o){if(!this.originalImage)return;this.images=Array.from(document.querySelectorAll(this.options.selector));const c=this.images.indexOf(this.originalImage);if(c===-1)return;const a=(c+o+this.images.length)%this.images.length,m=this.images[a];if(m){const h=this.overlay.querySelector("img");h.src=m.src,h.alt=m.alt,this.originalImage=m}}destroy(){this.overlay&&this.close(),document.removeEventListener("click",this.handleClick.bind(this))}}if(typeof window<"u"){window.ImageZoom=T;const d=()=>{window.imageZoom=new T};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",d):d()}function v(){if(!navigator.clipboard){console.warn("Clipboard API not available (requires HTTPS)");return}document.querySelectorAll("pre > code").forEach(d=>{if(d.parentNode.querySelector(".copy-button"))return;const o=document.createElement("button");o.className="copy-button",o.textContent="Copy",o.setAttribute("aria-label","Copy code to clipboard"),o.onclick=async()=>{try{await navigator.clipboard.writeText(d.innerText),o.textContent="Copied!",o.classList.add("copied"),setTimeout(()=>{o.textContent="Copy",o.classList.remove("copied")},2e3)}catch(c){console.error("Failed to copy:",c),o.textContent="Failed",setTimeout(()=>{o.textContent="Copy"},2e3)}},d.parentNode.append(o)})}typeof document<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",v):v());typeof window<"u"&&(window.initCopyButtons=v);function b(d=document){d.querySelectorAll(".scroll:not([data-scroll-initialized])").forEach(c=>{const a=()=>{if(!(c.scrollWidth>c.clientWidth)){c.classList.remove("show-left-shadow","show-right-shadow");return}const h=c.scrollLeft,p=c.scrollWidth-c.clientWidth;c.classList.toggle("show-right-shadow",h===0),c.classList.toggle("show-left-shadow",h>=p-1)};a(),c.addEventListener("scroll",a,{passive:!0}),window.addEventListener("resize",a),c.dataset.scrollInitialized="true"})}typeof document<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{b(document)}):b(document));typeof window<"u"&&(window.initializeScrollWrappers=b);function F(){document.body.addEventListener("htmx:beforeSwap",d=>{const a=new DOMParser().parseFromString(d.detail.xhr.responseText,"text/html").documentElement.dataset.theme;a&&(document.documentElement.dataset.theme=a)})}function k(){document.body.addEventListener("htmx:afterSettle",function(d){window.imageZoom&&window.imageZoom.rescan(),b(d.detail.elt),v()})}function x(){F(),k()}typeof document<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",x):x());let I=null;function D(){typeof document<"u"&&(I=document.documentElement.dataset.theme)}function P(){typeof window>"u"||(document.addEventListener("astro:before-preparation",d=>{const o=document.documentElement.dataset.theme;o&&(I=o)}),document.addEventListener("astro:after-swap",()=>{I&&(document.documentElement.dataset.theme=I)}))}function M(){typeof window>"u"||document.addEventListener("astro:after-swap",()=>{window.imageZoom&&window.imageZoom.rescan(),b(document),v()})}function q(){typeof window>"u"||document.addEventListener("astro:page-load",()=>{window.imageZoom&&window.imageZoom.rescan(),b(document),v()})}function A(d={}){const{usePageLoad:o=!1}=d;D(),P(),o?q():M()}typeof document<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{A()}):A());const _={version:"@VERSION_PLACEHOLDER@",getInstance(d){if(typeof window>"u")return null;switch(d){case"toast":return window.toast||null;case"comments":return window.comments||null;case"imageZoom":return window.imageZoom||null;default:return console.warn(`Unknown module: ${d}. Available: toast, comments, imageZoom`),null}},getInstances(){return typeof window>"u"?{toast:null,comments:null,imageZoom:null}:{toast:window.toast||null,comments:window.comments||null,imageZoom:window.imageZoom||null}},detectFramework(){return typeof window>"u"?"none":window.astro?"astro":window.htmx?"htmx":"none"},info(){const d=this.detectFramework();console.log(`Standard Framework v${this.version}`),console.log(`Framework detected: ${d}`),console.log("Modules:",["toast - Notification system","comments - GitHub-backed comments","imageZoom - Click-to-zoom lightbox","initCopyButtons() - Copy buttons for code blocks","initializeScrollWrappers() - Scroll shadows"]),console.log("Integrations:",["initHTMX() - For HTMX navigation","initAstro() - For Astro View Transitions"])}};typeof window<"u"&&(window.standard=_,console.log("Standard Framework loaded. Type window.standard.info() for help."))});export default z();
