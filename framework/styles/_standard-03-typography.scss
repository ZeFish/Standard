@use "standard-00-variables" as *;

/**
 * @component Typography System
 * @category Typography
 * @description Fine-art typography system using variable fonts, OpenType features,
 * and mathematical scaling. Implements classical typography rules with modern web capabilities.
 * Supports multiple font families, optical sizing, and locale-specific rules.
 *
 * @prop {string} --font-text Font family for body text (default: InterVariable)
 * @prop {string} --font-header Font family for headings (default: InterVariable)
 * @prop {string} --font-monospace Monospace font for code (default: IBM Plex Mono)
 * @prop {number} --font-weight Body text weight (default: 400)
 * @prop {number} --font-weight-bold Bold text weight (default: 600)
 * @prop {string} --font-feature OpenType features to enable
 * @prop {string} --font-variation Variable font axis settings
 *
 * @example
 * html {
 *   font-family: var(--font-text);
 *   font-size: var(--scale);
 *   font-feature-settings: var(--font-feature);
 *   line-height: var(--line-height);
 *   text-wrap: pretty;
 * }
 *
 * @since 0.1.0
 * @see standard-01-token.scss
 */

/* Typography Design Tokens - Using logical properties */
:root {
  /* Font stacks */
  --font-sans:
    "Instrument Sans Variable", system-ui, -apple-system, "Segoe UI", Roboto,
    "Helvetica Neue", Arial, "Noto Sans", sans-serif;
  --font-serif:
    "Newsreader", "Instrument Serif", "Garamond Premiere Pro", "Source Serif 4",
    serif;
  --font-monospace:
    "IBM Plex Mono", ui-monospace, "SF Mono", "Courier New", monospace;

  --font-text: var(--font-sans);
  --font-header: "Inter Variable";
  --font-interface: var(--font-sans);

  --inter-feature: "calt", "cv05", "cv11", "ss03";
  --instrument-feature: "figa", "ss01", "ss02", "ss05";

  /* Font features & variations */
  --font-feature: "";
  --font-variation: "wdth" 95;
  --font-header-feature: "";
  --font-header-variation: "";
  --font-monospace-feature: "";
  --font-monospace-variation: "";

  /* Font properties */
  --font-weight: 450;
  --font-weight-bold: 600;
  --font-letter-spacing: normal;
  --font-header-letter-spacing: -0.065em;
  --font-header-line-height: 1;
  --font-header-weight: 700;

  /* Interface font tokens */
  --font-interface-feature: "dlig", "zero";
  --font-interface-variation: "";
  --font-list-feature: "dlig", "tnum", "zero";
  --font-list-variation: "";

  /* Heading weight scale */
  --font-weight-h1: var(--font-header-weight);
  --font-weight-h2: max(
    calc(var(--font-header-weight) * 0.85),
    var(--font-weight)
  );
  --font-weight-h3: max(
    calc(var(--font-header-weight) * 0.85),
    var(--font-weight)
  );
  --font-weight-h4: var(--font-weight);
  --font-weight-h5: var(--font-weight);
  --font-weight-h6: var(--font-weight);

  /* List styling */
  --list-indentation: var(--space);
}

/* =========================== */
/* TYPOGRAPHY                  */
/* =========================== */

/* Bold normalization */
b,
strong,
.bold {
  font-weight: var(--font-weight-bold, 600);
}

:is(h1, h2, h3, h4, h5, h6) :is(b, strong, .bold) {
  font-weight: inherit;
}

/* Headings */
h1,
h2,
h3,
h4,
h5,
h6 {
  font-family: var(--font-header), system-ui, sans-serif;
  color: var(--color-header);
  text-wrap: balance;
  font-variant-ligatures: normal;
  font-feature-settings: var(--font-header-feature);
  font-variation-settings: var(--font-header-variation);
  font-style: var(--font-header-style, normal);
  letter-spacing: var(--font-header-letter-spacing);
  white-space: normal;
  overflow-wrap: normal;
  word-break: normal;
  hyphens: none;
  max-width: 100%;
  box-sizing: border-box;
}

h1 {
  font-weight: var(--font-weight-h1);
  font-size: clamp(var(--scale-3), 10vw, var(--scale-4));
  line-height: var(--font-header-line-height, 1);
}

h2 {
  font-weight: var(--font-weight-h2);
  font-size: clamp(var(--scale-2), 7vw, var(--scale-3));
  line-height: var(--font-header-line-height, 1);
}

h3 {
  font-weight: var(--font-weight-h3);
  font-size: clamp(var(--scale), 7vw, var(--scale-3));
  line-height: var(--font-header-line-height, 1);
}

h4 {
  font-weight: var(--font-weight);
  font-size: var(--scale);
  line-height: var(--line-height);
  text-transform: uppercase;
  letter-spacing: 0.06em;
}

h5 {
  /* Overline */
}

h6 {
  /* run-in */
  display: inline;
  margin: 0;
  font-size: var(--scale);
  font-weight: 600;
}

h6 + p {
  display: inline;
}

.overline {
  font-variant-caps: small-caps;
  letter-spacing: 0.04em;
  font-size: var(--scale-d2);
  border-top: var(--rule-hairline) solid var(--color-border);
  padding-block-start: calc(var(--space) / 2);
  margin-block-end: var(--space);
}

/* Links */
a,
a:visited {
  color: inherit;
  text-decoration: underline;
  text-decoration-thickness: var(--stroke-width);
  text-underline-offset: auto;
  text-decoration-color: var(--color-subtle);
  transition:
    color var(--transition),
    text-decoration-color var(--transition);
}

a:visited:hover,
a:hover,
a:focus {
  color: var(--color-accent);
  text-decoration-color: var(--color-accent);
}

a:focus-visible {
  outline: 1px solid color-mix(in srgb, var(--color-accent) 0%, transparent);
  border-radius: 2px;
}

a.external-link::after {
  content: "â†—";
  text-decoration: none;
  font-size: var(--scale-d3);
  color: var(--color-subtle);
}

:is(h1, h2, h3, h4, h5, h6) a {
  text-decoration: none;
}

// ========== Typography ==========

.menu,
.ui,
.interface {
  font-family: var(--font-interface), system-ui, sans-serif;
  font-variation-settings: var(--font-interface-variation);
  font-feature-settings: var(--font-interface-feature);
  font-weight: var(--font-interface-weight, var(--font-weight), 400);
}

/* Code */
code,
pre,
tt,
.code,
.mono,
.monospace,
.font-mono {
  font-family: var(--font-monospace), Inconsolata, Menlo, monospace;
  font-feature-settings: var(--font-monospace-feature);
  font-variation-settings: var(--font-monospace-variation);
  font-weight: var(--font-monospace-weight, 400);
}

pre {
  position: relative;
  background: var(--color-surface);
  color: var(--color-foreground);
  border: var(--border);
  overflow-x: auto;
  box-shadow: inset var(--shadow);
  line-height: var(--line-height-compact);
  padding: var(--space-half);

  code {
    background: transparent;
    border: none;
    outline: none;
    padding: 0;
    opacity: 0.75;
    transition: opacity var(--transition);
  }

  &:hover code {
    opacity: 1;
  }

  .copy-button {
    position: absolute;
    top: var(--space-half);
    right: var(--space-half);
    opacity: 0;
    transition: opacity 0.5s;
    font-family: var(--font-interface);
  }

  &:hover .copy-button {
    opacity: 0.5;
    transition: opacity 0.5s;
  }

  .copy-button:hover {
    opacity: 1;
  }
}

/* Blockquotes */
blockquote {
  font-style: italic;
  color: var(--color-muted);
  padding: var(--space);
  border-left: var(--stroke-width-l) solid var(--color-border);
}

/* Utilities */
small {
  font-size: var(--scale-d2);
}

sub,
sup {
  font-size: var(--scale-d3);
  line-height: 0;
}

sub {
  vertical-align: sub;
}

sup {
  vertical-align: super;
}

em {
  color: var(--color-italic);
  font-style: italic;
}

.font-interface {
  font-family: var(--font-interface), system-ui, sans-serif;
  font-variation-settings: var(--font-interface-variation);
  font-feature-settings: var(--font-interface-feature);
  font-size: 12px;
}
