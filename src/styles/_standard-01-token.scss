@use "standard-00-variables" as *;

/**
 * @component Design Tokens
 * @category Foundation
 * @description Primitive design tokens forming the foundation of the design system.
 * Includes mathematical ratios, modular scales, spacing system, and animation curves.
 * All tokens use CSS custom properties for runtime customization.
 *
 * @example
 * :root {
 *   --optical-ratio: var(--optical-ratio-silver);
 *   --base: 1rlh;
 *   --scale-2: calc(1rem * 1.414);
 * }
 *
 * @since 0.1.0
 * @see standard-00-variables.scss
 */

/* Primitive Design Tokens - Foundation layer with logical properties */

:root {
    /* Golden Ratio & Mathematical Precision */
    --ratio-golden: 1.618;
    --ratio-wholestep: 1.618;
    --ratio-silver: 1.414;
    --ratio-halfstep: 1.272; /* sqrt of golden ratio */
    --ratio-quarterstep: 1.128;
    --ratio-eighthstep: 1.062;

    /* Optical Harmony ratio (font size) */
    --optical-ratio: 1.5;

    /* The actual line-height of html */
    --line-height: 1.5;

    /* Space between standard block like paragraph */
    --base-gap: var(--base);

    --newbase: calc((1rem / var(--line-height)) / 2);

    /* Space between special block like image blockquote and code block */
    /* Vertical different than horizontal */
    --base-block-gap: var(--base-2);

    /* Padding around the body, can be negated by .body-p-neg, .body-p-neg-header, .body-p-neg-footer */
    --body-padding: var(--base-2);

    /* Ui Guide */
    --blur: blur(7px);
    --hr-thickness: 1px;
    --transition: 0.5s ease;
    --radius: var(--base-d8);
    --modal-background: color-mix(
        in srgb,
        var(--color-background-secondary) 85%,
        transparent
    );

    /* Mobile */
    --mobile-font-size: 1.1rem;
    --mobile-optical-ratio: var(--ratio-silver);
    --mobile-line-height: 1.3;
    --mobile-body-padding: var(--base);

    /* Content area tokens */
    --line-width-xs: 32rem; /* ~384px - narrow sidebar content */
    --line-width-s: 38rem; /* ~512px - short form content */
    --line-width-m: 42rem; /* ~672px - optimal reading (60-75 chars) - DEFAULT */
    --line-width-l: 50rem; /* ~800px - wider articles */
    --line-width-xl: 60rem; /* ~960px - documentation/wide content */
    --line-width-full: calc(
        100vw - (var(--base) * 2)
    ); /* responsive full width with margins */
    --line-width: var(--line-width-m);

    /* Grid system tokens */
    --grid-gap: var(--base);
    --grid-row-gap: var(--grid-gap); /* Separate control for row spacing */

    /* Compact variation */
    --line-height-s: max(calc(var(--line-height) / 2), 1);

    /* Base measurements & ratios - the foundation of everything else */
    --font-size: 1rem;
    --base: calc(1rem * 0.7);
    /* Name use for actual spacing in the framework  */
    --base-d8: calc(var(--base) / 8);
    --base-d4: calc(var(--base) / 4);
    --base-d2: calc(var(--base) / 2);
    --base: calc(1rlh);
    --base-2: calc(var(--base) * 2);
    --base-4: calc(var(--base) * 4);
    --base-8: calc(var(--base) * 8);

    /* Optical Harmony Scale */
    --scale-d5: calc(var(--font-size) * pow(var(--optical-ratio), -3));
    --scale-d4: calc(var(--font-size) * pow(var(--optical-ratio), -2));
    --scale-d3: calc(var(--font-size) * pow(var(--optical-ratio), -1));
    --scale-d2: calc(var(--font-size) * pow(var(--optical-ratio), -0.5));
    --scale: var(--font-size);
    --scale-2: calc(var(--font-size) * pow(var(--optical-ratio), 0.5));
    --scale-3: calc(var(--font-size) * pow(var(--optical-ratio), 1));
    --scale-4: calc(var(--font-size) * pow(var(--optical-ratio), 2));
    --scale-5: calc(var(--font-size) * pow(var(--optical-ratio), 3));
    --scale-6: calc(var(--font-size) * pow(var(--optical-ratio), 4));
    --scale-7: calc(var(--font-size) * pow(var(--optical-ratio), 5));
    --scale-8: calc(var(--font-size) * pow(var(--optical-ratio), 6));
    --scale-9: calc(var(--font-size) * pow(var(--optical-ratio), 7));
    --scale-10: calc(var(--font-size) * pow(var(--optical-ratio), 8));

    /* Z-index scale */
    --z-base: 1;
    --z-dropdown: 1000;
    --z-sticky: 1020;
    --z-fixed: 1030;
    --z-modal-backdrop: 1040;
    --z-offcanvas: 1050;
    --z-modal: 1060;
    --z-popover: 1070;
    --z-tooltip: 1080;
    --z-toast: 1090;
    --z-image-zoom: 9999;

    /* Callout only animation, to test */
    --duration-superfast: 0.15s;

    /**
     * Flow Space Unit
     *
     * @group tokens-spacing
     * @author Francis Fontaine
     * @since 0.1.0
     *
     * In 1455, Johannes Gutenberg printed his 42-line Bible with something
     * remarkable: every line of text sat on an invisible grid, spaced with
     * mathematical precision. He didn't just invent movable type—he invented
     * the baseline grid.
     *
     * Fast forward to 1501, and Aldus Manutius in Venice discovered that
     * 120% line-height made text sing. Not 100%, not 150%—exactly 120%.
     * At 16px base font, that's 1.5rem, or 24 pixels. This single number
     * became the foundation of readable typography for the next 500 years.
     *
     * This variable holds that magic number. It's the fundamental spacing unit
     * that everything else derives from—the heartbeat of your vertical rhythm.
     * Change it, and you change the entire breathing pattern of your design.
     *
     * ### Future Improvements
     *
     * - Make responsive (smaller on mobile)
     * - Add clamp() for fluid scaling
     *
     * @see {variable} --flow-scale-* - Multipliers based on this unit
     * @see {mixin} rhythm - Vertical rhythm system
     * @see {class} .flow - Flow spacing utility
     *
     * @link https://en.wikipedia.org/wiki/Aldus_Manutius History of the Aldine Press
     *
     * @example scss
     *   .card {
     *     padding: var(--flow-space);
     *     gap: calc(var(--flow-space) / 2);
     *   }
     */
    --flow-space: 1.5rem;

    /* Optional: Scale multipliers for consistent spacing */
    --flow-scale-xs: calc(var(--flow-space) * 0.5); /* 0.75rem */
    --flow-scale-s: calc(var(--flow-space) * 0.75); /* 1.125rem */
    --flow-scale-m: var(--flow-space); /* 1.5rem */
    --flow-scale-l: calc(var(--flow-space) * 1.5); /* 2.25rem */
    --flow-scale-xl: calc(var(--flow-space) * 2); /* 3rem */
    --flow-scale-xxl: calc(var(--flow-space) * 3); /* 4.5rem */
}

/* Responsive adjustments - collapse gutters on small screens */
@media only screen and (max-width: #{$small}) {
    :root {
        --font-size: var(--mobile-font-size) !important;
        --optical-ratio: var(--mobile-optical-ratio) !important;
        --line-height: var(--mobile-line-height);
        --base-gap: var(--base);
        --base-block-gap: var(--base);
        --body-padding: var(--mobile-body-padding) !important;
    }
}

body::after {
    content: "";
    position: fixed;
    inset: 0;
    opacity: 0.1;
    z-index: 99999;
    pointer-events: none;
    mix-blend-mode: multiply;
    background-size: 100px;
    background-repeat: repeat;

    background-image: url("/assets/img/paper.png");
}
body.theme-dark::after {
    opacity: 0.5;
    mix-blend-mode: multiply;
}

body::before {
    content: "";
    position: fixed;
    inset: 0;
    opacity: 0.04;
    z-index: 999;
    pointer-events: none;
    background-size: 256px;
    background-repeat: repeat;
    mix-blend-mode: multiply;
    /* noise */
    background-image: url("/assets/img/noise.png");
}
