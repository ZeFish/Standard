/**
 * Toast Notification Styling
 *
 * @group components-feedback
 * @author Francis Fontaine
 * @since 0.11.0
 *
 * Gmail didn't invent transient notifications—they borrowed from desktop
 * operating systems. Windows 95 had balloon tips. Mac OS X had Growl. But
 * Gmail made them web-native in 2004, and the pattern exploded. Within
 * months, every webapp copied the corner notification—"Email sent," three
 * seconds, gone. No confirmation needed.
 *
 * The psychology is brilliant: humans don't need permanent confirmation for
 * routine actions. A quick "yep, got it" is enough. Toasts respect attention—
 * they appear, deliver their message, and vanish without demanding interaction.
 * Compare that to modal dialogs that block your entire workflow just to say
 * "Saved." Toasts are polite. Modals are rude.
 *
 * This implementation provides the visual layer for toast notifications: slide-in
 * animations, stacking, progress bars, position variants, and semantic color
 * coding. Works with `standard.toast.js` for a complete notification system.
 *
 * ### Future Improvements
 *
 * - Sound effects on important toasts (error, success)
 * - Rich content support (images, buttons, links)
 * - Swipe-to-dismiss on mobile
 * - Undo action support (Gmail-style "Undo send")
 * - Dark mode color adjustments
 * - Custom animation variants (bounce, scale)
 *
 * @see {file} standard.toast.js - JavaScript toast system
 * @see {class} .toast - Individual toast notification
 * @see {class} .toast-container - Positioned container for toasts
 *
 * @link https://material.io/components/snackbars Material Design Snackbars
 * @link https://www.nngroup.com/articles/toast/ NN/g Toast Guidelines
 *
 * @example html - Toast structure (generated by JS)
 *   <div class="toast-container toast-container-top-right">
 *     <div class="toast toast-success toast-visible" role="status">
 *       <div class="toast-content">
 *         <span class="toast-icon">✓</span>
 *         <div class="toast-message">Saved successfully!</div>
 *         <button class="toast-close">×</button>
 *       </div>
 *       <div class="toast-progress"></div>
 *     </div>
 *   </div>
 *
 * @example javascript - Usage
 *   toast.success('Changes saved!');
 *   toast.error('Unable to connect to server');
 *   toast.info('You have 3 new messages', { duration: 5000 });
 */

/* =========================== */
/* TOAST CONTAINER POSITIONING */
/* =========================== */

.toast-container {
    /* Define the spacing from viewport edges */
    --toast-spacing: var(--body-padding);

    /* Fixed positioning for all containers */
    position: fixed;
    z-index: var(--z-toast);
    display: flex;
    flex-direction: column;
    gap: var(--gap-tight);
    pointer-events: none;
    max-width: 400px;
    margin-block-end: 0;
}

/* Re-enable pointer events on toasts */
.toast {
    pointer-events: auto;
}

/* Top-right (default) */
.toast-container-top-right {
    position: fixed;
    top: var(--gap-body);
    right: var(--gap-body);

    display: flex;
    flex-direction: column;
}

/* Top-left */
.toast-container-top-left {
    top: var(--gap-body);
    left: var(--gap-body);
    transform: translateX(100%);
}

/* Top-center */
.toast-container-top-center {
    top: var(--gap-body);
    left: 50%;
    transform: translateX(-50%);
}

/* Bottom-right */
.toast-container-bottom-right {
    bottom: var(--gap-body);
    right: var(--toast-spacing);
    flex-direction: column-reverse;
}

/* Bottom-left */
.toast-container-bottom-left {
    bottom: var(--gap-body);
    left: var(--toast-spacing);
    flex-direction: column-reverse;
}

/* Mobile: always full width at bottom */
@media (max-width: 768px) {
    .toast-container {
        display: inline-block;
        left: 0 !important;
        right: 0 !important;
        bottom: 0 !important;
        top: auto !important;
        transform: none !important;
        max-width: 100%;
        min-width: 1%;
        margin-inline: 25%;
        padding: var(--gap);
        flex-direction: column-reverse;
        text-align: center;
    }
}

/* =========================== */
/* TOAST BASE STYLING          */
/* =========================== */

.toast {
    /* Layout */
    display: flex;
    flex-direction: column;
    min-width: 100px;
    max-width: 100%;

    font-size: var(--scale-d2);
    font-size: 12px;
    font-family: var(--font-interface);

    /* Appearance */
    background: var(--modal-background);
    backdrop-filter: var(--blur);
    border: var(--border);
    /*border-left-width: 4px;  Accent border */
    border-radius: var(--radius);
    box-shadow: var(--shadow);

    margin-block-end: 0;

    /* Animation setup */
    opacity: 0;
    transition:
        opacity var(--transition),
        transform var(--transition);

    /* Cursor */
    cursor: default;
}

/* Visible state (slide in) */
.toast-visible {
    opacity: 1;
    transform: translate(0, 0);
}

/* Dismissing state (slide out) */
.toast-dismissing {
    opacity: 0;
    transform: scale(0.95);
    transition:
        opacity var(--transition),
        transform var(--transition);
}

/* Mobile: slide from bottom */
@media (max-width: 768px) {
    .toast {
        min-width: auto;
        width: 100%;
        transform: translateY(100%);
    }

    .toast-visible {
        transform: translateY(0);
    }
}

/* =========================== */
/* TOAST CONTENT               */
/* =========================== */

.toast-content {
    display: flex;
    align-items: baseline;
    gap: var(--gap-tight);
    padding: var(--gap-tight) var(--gap-compact);
    transition: transform var(--transition);
    margin-block-end: 0;
}

/* Toast icon */
.toast-icon {
    flex-shrink: 0;
    font-size: var(--scale-d2);
    line-height: var(--line-height-compact);
    font-weight: bold;
    display: none;
}

/* Toast message */
.toast-message {
    flex: 1;
    font-size: var(--scale-d2);
    font-size: 12px;
    line-height: var(--line-height-compact);
    color: var(--color-foreground);
    word-break: break-word;
}

/* Toast close button */
.toast-close {
    flex-shrink: 0;
    appearance: none;
    background: transparent;
    border: none;
    font-size: var(--scale-3);
    line-height: 1;
    color: var(--color-muted);
    cursor: pointer;
    padding: 0;
    width: 1.5rem;
    height: 1.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--radius);
    transition:
        background-color var(--transition),
        color var(--transition);

    &:hover {
        background: var(--color-background-secondary);
        color: var(--color-foreground);
    }

    &:focus-visible {
        outline: 2px solid var(--color-accent);
        outline-offset: 2px;
    }
}

/* =========================== */
/* TOAST PROGRESS BAR          */
/* =========================== */

.toast-progress {
    position: relative;
    top: 1px;
    height: 1px;
    background: var(--toast-color);
    width: calc(100% - var(--radius));
    opacity: 0.2;
    margin-inline: calc(var(--radius) / 2);
    transform-origin: left;
    transition: width 0s linear; /* Duration set via JS */
}

/* =========================== */
/* TOAST TYPE VARIANTS         */
/* =========================== */

/* Success - Green */
.toast-success {
    --toast-color: var(--color-success);
    border-left-color: var(--color-success);

    .toast-icon {
        color: var(--color-success);
    }

    .toast-progress {
        background: var(--color-success);
    }
}

/* Error - Red */
.toast-error {
    --toast-color: var(--color-error);
    border-left-color: var(--color-error);

    .toast-icon {
        color: var(--color-error);
    }

    .toast-progress {
        background: var(--color-error);
    }
}

/* Warning - Yellow/Orange */
.toast-warning {
    --toast-color: var(--color-warning);
    border-left-color: var(--color-warning);

    .toast-icon {
        color: var(--color-warning);
    }

    .toast-progress {
        background: var(--color-warning);
    }
}

/* Info - Blue */
.toast-info {
    --toast-color: var(--color-accent);
    /*border-left-color: var(--color-info);*/

    .toast-icon {
        color: var(--color-accent);
    }

    .toast-progress {
        background: var(--color-accent);
    }
}

/* =========================== */
/* DARK MODE ADJUSTMENTS       */
/* =========================== */

@media (prefers-color-scheme: dark) {
    .toast {
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
    }
}

/* =========================== */
/* REDUCED MOTION SUPPORT      */
/* =========================== */

@media (prefers-reduced-motion: reduce) {
    .toast {
        transition: opacity 0.1s ease;
        transform: none !important;
    }

    .toast-progress {
        transition: none;
    }
}

/* =========================== */
/* PRINT STYLES                */
/* =========================== */

@media print {
    .toast-container,
    .toast {
        display: none !important;
    }
}
