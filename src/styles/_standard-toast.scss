/**
 * Toast Notification Styling
 *
 * @group components-feedback
 * @author Francis Fontaine
 * @since 0.11.0
 *
 * Gmail didn't invent transient notifications—they borrowed from desktop
 * operating systems. Windows 95 had balloon tips. Mac OS X had Growl. But
 * Gmail made them web-native in 2004, and the pattern exploded. Within
 * months, every webapp copied the corner notification—"Email sent," three
 * seconds, gone. No confirmation needed.
 *
 * The psychology is brilliant: humans don't need permanent confirmation for
 * routine actions. A quick "yep, got it" is enough. Toasts respect attention—
 * they appear, deliver their message, and vanish without demanding interaction.
 * Compare that to modal dialogs that block your entire workflow just to say
 * "Saved." Toasts are polite. Modals are rude.
 *
 * This implementation provides the visual layer for toast notifications: slide-in
 * animations, stacking, progress bars, position variants, and semantic color
 * coding. Works with `standard.toast.js` for a complete notification system.
 *
 * ### Future Improvements
 *
 * - Sound effects on important toasts (error, success)
 * - Rich content support (images, buttons, links)
 * - Swipe-to-dismiss on mobile
 * - Undo action support (Gmail-style "Undo send")
 * - Dark mode color adjustments
 * - Custom animation variants (bounce, scale)
 *
 * @see {file} standard.toast.js - JavaScript toast system
 * @see {class} .toast - Individual toast notification
 * @see {class} .toast-container - Positioned container for toasts
 *
 * @link https://material.io/components/snackbars Material Design Snackbars
 * @link https://www.nngroup.com/articles/toast/ NN/g Toast Guidelines
 *
 * @example html - Toast structure (generated by JS)
 *   <div class="toast-container toast-container-top-right">
 *     <div class="toast toast-success toast-visible" role="status">
 *       <div class="toast-content">
 *         <span class="toast-icon">✓</span>
 *         <div class="toast-message">Saved successfully!</div>
 *         <button class="toast-close">×</button>
 *       </div>
 *       <div class="toast-progress"></div>
 *     </div>
 *   </div>
 *
 * @example javascript - Usage
 *   toast.success('Changes saved!');
 *   toast.error('Unable to connect to server');
 *   toast.info('You have 3 new messages', { duration: 5000 });
 */

/* =========================== */
/* TOAST CONTAINER POSITIONING */
/* =========================== */

.toast-container {
    /* Define the spacing from viewport edges */
    --toast-spacing: var(--body-padding);

    /* Fixed positioning for all containers */
    position: fixed;
    z-index: var(--z-toast);
    display: flex;
    flex-direction: column;
    gap: var(--space-xs);
    pointer-events: none;
    max-width: 400px;
}

/* Re-enable pointer events on toasts */
.toast {
    pointer-events: auto;
}

/* Top-right (default) */
.toast-container-top-right {
    top: calc(var(--toast-spacing) * 1.8);
    right: var(--toast-spacing);
}

/* Top-left */
.toast-container-top-left {
    top: calc(var(--toast-spacing) * 1.8);
    left: var(--toast-spacing);
    transform: translateX(100%);
}

/* Top-center */
.toast-container-top-center {
    top: calc(var(--toast-spacing) * 2.25);
    left: 50%;
    transform: translateX(-50%);
}

/* Bottom-right */
.toast-container-bottom-right {
    bottom: calc(var(--toast-spacing) * 2.5);
    right: var(--toast-spacing);
    flex-direction: column-reverse;
}

/* Bottom-left */
.toast-container-bottom-left {
    bottom: calc(var(--toast-spacing) * 2.5);
    left: var(--toast-spacing);
    flex-direction: column-reverse;
}

/* Mobile: always full width at bottom */
@media (max-width: 768px) {
    .toast-container {
        left: 0 !important;
        right: 0 !important;
        bottom: 0 !important;
        top: auto !important;
        transform: none !important;
        max-width: 100%;
        padding: var(--space-xs);
        flex-direction: column-reverse;
    }
}

/* =========================== */
/* TOAST BASE STYLING          */
/* =========================== */

.toast {
    /* Layout */
    display: flex;
    flex-direction: column;
    min-width: 100px;
    max-width: 100%;

    font-size: var(--scale);
    font-family: var(--font-interface);

    /* Appearance */
    background: var(--modal-background);
    backdrop-filter: var(--blur);
    border: var(--border);
    /*border-left-width: 4px;  Accent border */
    border-radius: var(--border-radius);
    box-shadow: var(--shadow);

    /* Animation setup */
    opacity: 0;
    transform: translateX(100%); /* Start off-screen right */
    transition:
        opacity 0.5s ease,
        transform 0.5s ease;

    /* Cursor */
    cursor: default;
}

/* Top containers slide from top */
.toast-container-top-right .toast,
.toast-container-top-left .toast,
.toast-container-top-center .toast {
    transform: translateY(-100%);
}

/* Left containers slide from left */
.toast-container-top-left .toast,
.toast-container-bottom-left .toast {
    transform: translateX(-100%);
}

/* Bottom containers slide from bottom */
.toast-container-bottom-right .toast,
.toast-container-bottom-left .toast,
.toast-container-bottom-center .toast {
    transform: translateY(100%);
}

/* Visible state (slide in) */
.toast-visible {
    opacity: 1;
    transform: translate(0, 0);
}

/* Dismissing state (slide out) */
.toast-dismissing {
    opacity: 0;
    transform: scale(0.95);
    transition:
        opacity 0.5s ease,
        transform 0.5s ease;
}

/* Mobile: slide from bottom */
@media (max-width: 768px) {
    .toast {
        min-width: auto;
        width: 100%;
        transform: translateY(100%);
    }

    .toast-visible {
        transform: translateY(0);
    }
}

/* =========================== */
/* TOAST CONTENT               */
/* =========================== */

.toast-content {
    display: flex;
    align-items: flex-start;
    gap: var(--space-xs);
    padding: calc(var(--space-xs) / var(--font-density)) var(--space-s)
        var(--space-xs) var(--space-xs);
}

/* Toast icon */
.toast-icon {
    flex-shrink: 0;
    font-size: var(--scale-s);
    line-height: var(--font-density);
    font-weight: bold;
}

/* Toast message */
.toast-message {
    flex: 1;
    font-size: var(--scale-s);
    line-height: var(--font-density);
    color: var(--color-foreground);
    word-break: break-word;
}

/* Toast close button */
.toast-close {
    flex-shrink: 0;
    appearance: none;
    background: transparent;
    border: none;
    font-size: var(--scale-xl);
    line-height: 1;
    color: var(--color-muted);
    cursor: pointer;
    padding: 0;
    width: 1.5rem;
    height: 1.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--border-radius);
    transition:
        background-color 0.5s ease,
        color 0.5s ease;

    &:hover {
        background: var(--color-background-secondary);
        color: var(--color-foreground);
    }

    &:focus-visible {
        outline: 2px solid var(--color-accent);
        outline-offset: 2px;
    }
}

/* =========================== */
/* TOAST PROGRESS BAR          */
/* =========================== */

.toast-progress {
    height: 1px;
    background: color-mix(in srgb, var(--toast-color) 100%, transparent);
    width: 100%;
    opacity: 0.2;
    border-radius: 0 0 var(--border-radius) var(--border-radius);
    transform-origin: left;
    transition: width 0s linear; /* Duration set via JS */
}

/* =========================== */
/* TOAST TYPE VARIANTS         */
/* =========================== */

/* Success - Green */
.toast-success {
    --toast-color: var(--color-success);
    border-left-color: var(--color-success);

    .toast-icon {
        color: var(--color-success);
    }

    .toast-progress {
        background: var(--color-success);
    }
}

/* Error - Red */
.toast-error {
    --toast-color: var(--color-error);
    border-left-color: var(--color-error);

    .toast-icon {
        color: var(--color-error);
    }

    .toast-progress {
        background: var(--color-error);
    }
}

/* Warning - Yellow/Orange */
.toast-warning {
    --toast-color: var(--color-warning);
    border-left-color: var(--color-warning);

    .toast-icon {
        color: var(--color-warning);
    }

    .toast-progress {
        background: var(--color-warning);
    }
}

/* Info - Blue */
.toast-info {
    --toast-color: var(--color-info);
    /*border-left-color: var(--color-info);*/

    .toast-icon {
        color: var(--color-info);
    }

    .toast-progress {
        background: var(--color-info);
    }
}

/* =========================== */
/* DARK MODE ADJUSTMENTS       */
/* =========================== */

@media (prefers-color-scheme: dark) {
    .toast {
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
    }
}

/* =========================== */
/* REDUCED MOTION SUPPORT      */
/* =========================== */

@media (prefers-reduced-motion: reduce) {
    .toast {
        transition: opacity 0.1s ease;
        transform: none !important;
    }

    .toast-progress {
        transition: none;
    }
}

/* =========================== */
/* PRINT STYLES                */
/* =========================== */

@media print {
    .toast-container,
    .toast {
        display: none !important;
    }
}
