// Harmonized Markdown Styles
// Extracted from _local.scss

// ==========================
// General Element Styling
// ==========================

article .callout,
article .code-wrapper,
article blockquote,
article img,
article iframe {
    background: var(--color-background-secondary);
    border-radius: var(--border-radius);
    border: var(--border);
    box-shadow: var(--shadow);
}

// ==========================
// BLOCKQUOTE
// ==========================

article blockquote {
    font-size: var(--scale-s);
    line-height: var(--font-density-s);
    padding: var(--space);
    font-style: italic;
}

// ==========================
// CALLOUT
// ==========================

article .callout {
    line-height: var(--font-density-s);
    transition: var(--duration-superfast) var(--motion-smooth);
    padding: var(--space-xxs);
    --callout-color: var(--color-background-secondary);
    background: color-mix(
        in srgb,
        var(--callout-color) 5%,
        var(--color-background-secondary)
    );
    border-color: color-mix(
        in srgb,
        var(--callout-color) 10%,
        var(--color-border)
    );

    .callout-title {
        color: color-mix(
            in srgb,
            var(--callout-color) 50%,
            var(--color-foreground)
        );
        font-weight: bold;
        font-size: var(--scale-s);
        user-select: none;
        padding: var(--space-xxxs) calc(var(--space) - var(--space-xs))
            var(--space-xxxs) calc(var(--space) - var(--space-xs));
    }

    .callout-content {
        color: var(--color-foreground);
        background: color-mix(
            in srgb,
            var(--callout-color) 2.5%,
            var(--color-background)
        );
        border-color: color-mix(
            in srgb,
            var(--callout-color) 10%,
            var(--color-border)
        );
        box-shadow: inset var(--shadow);
        font-size: var(--scale-s);
        overflow: hidden;
        border-radius: var(--border-radius);
        padding: var(--space-s) calc(var(--space) - var(--space-xs));
        margin-top: var(--space-xxs);
        margin-left: 0;
        border: var(--border);
        text-align: left;

        p:first-child {
            margin-top: 0;
        }

        ul,
        ol {
            padding: 0 calc(var(--space) * 0.75);
        }

        .code-wrapper {
            margin: var(--space) 0;
        }

        > .callout {
            margin: calc(var(--space-xs) * -1);

            .callout-content {
                padding: var(--space-s);
            }

            .callout-title {
                padding-left: var(--space-s);
                padding-right: var(--space-s);
            }
        }
    }

    .callout-title-icon {
        display: none;
    }

    img {
        margin-left: 0;
        margin-right: 0;
    }
}

// Callout Color Variants
article .callout[data-callout="warning" i] {
    --callout-color: var(--color-red);
}
article .callout[data-callout="important" i] {
    --callout-color: var(--color-orange);
}

// Details/Summary specific callout styles
article details > summary {
    list-style: none; /* removes marker in Firefox */
}

article details .callout-title::before {
    content: "â–¸";
    display: inline-block;
    transform: rotate(0deg);
    transition: transform 0.2s ease;
}

article details[open] .callout-title::before {
    transform: rotate(90deg);
}

article details .callout-title-inner {
    display: inline;
}

// Caption Callout (after an image)
article p:has(img) + .callout[data-callout="caption" i] {
    padding: 0;
    background: none;
    border: none;
    margin: 0 var(--space-l);
    position: relative;
    top: calc(var(--space) * -1.75);
    box-shadow: none;

    .callout-title {
        display: none;
    }

    .callout-content {
        padding: 0;
        background: none;
        border: none;
        box-shadow: none;
        line-height: 1;
        text-align: center !important;
        text-wrap: balance !important;
    }
}

// Margin adjustments for elements following a table-wrapper
article .table-wrapper + .callout,
article .table-wrapper + p:has(img),
article .table-wrapper + blockquote,
article .table-wrapper + .code-wrapper {
    margin-top: 0;
}

// ==========================
// Mobile Specific Styles
// ==========================

@media only screen and (max-width: 600px) {
    article {
        .callout,
        blockquote,
        .code-wrapper {
            margin: var(--space) 0 var(--space-l) 0;
        }

        ul:not([start]),
        ol:not([start]) {
            padding: 0;
            padding-left: var(--space);
        }
    }
}
