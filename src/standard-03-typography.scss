@use "standard-00-variables" as *;
/* Typography Design Tokens - Using logical properties */
:root {
    /* Font stacks */
    --font-sans: Archivo, system-ui, -apple-system, sans-serif;
    --font-serif: Fraunces, serif;
    --font-text: var(--font-sans);
    --font-header: Inter, system-ui, -apple-system, sans-serif;
    --font-monospace:
        "IBM Plex Mono", ui-monospace, "SF Mono", Monaco, "Cascadia Code",
        "Roboto Mono", Consolas, "Courier New", monospace;

    /* Font features & variations */
    --font-feature: "liga", "dlig", "kern", "calt";
    --font-variation: "";
    --font-header-feature: "liga", "dlig", "kern", "calt";
    --font-header-variation: "";
    --font-monospace-feature: "liga", "dlig", "kern", "calt";
    --font-monospace-variation: "";

    /* Font properties */
    --font-weight: 400;
    --bold-weight: 600;
    --font-letter-spacing: normal;
    --font-header-letter-spacing: -0.065em;
    --font-header-line-height: 0.75em;
    --font-header-weight: 900;

    /* Interface font tokens */
    --font-interface: var(--font-text);
    --font-interface-feature: var(--font-feature);
    --font-interface-variation: var(--font-variation);

    /* Calculated typography tokens */
    --line-height: calc(var(--font-size) * var(--font-density));

    /* Heading weight scale */
    --font-weight-h1: var(--font-header-weight);
    --font-weight-h2: max(
        calc(var(--font-header-weight) * 0.95),
        var(--font-weight)
    );
    --font-weight-h3: max(
        calc(var(--font-header-weight) * 0.9),
        var(--font-weight)
    );
    --font-weight-h4: max(
        calc(var(--font-header-weight) * 0.85),
        var(--font-weight)
    );
    --font-weight-h5: max(
        calc(var(--font-header-weight) * 0.8),
        var(--font-weight)
    );
    --font-weight-h6: max(
        calc(var(--font-header-weight) * 0.75),
        var(--font-weight)
    );

    /* List styling */
    --list-indentation: var(--space);
}

html.dark {
    /*--font-density: 1.5;*/
    --font-weight: 400;
    --font-letter-spacing: 0.001em;
}

// ========== Typography ==========

html {
    scroll-behavior: smooth;

    font-family: var(--font-text), system-ui, sans-serif;
    font-size: var(--scale);
    font-weight: var(--font-weight);
    letter-spacing: var(--font-letter-spacing);

    line-height: var(--line-height);

    text-rendering: optimizeLegibility; /* kerning & ligatures */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    font-optical-sizing: auto;

    font-feature-settings: var(--font-feature);
    font-variant-ligatures: normal;
    font-variation-settings: var(--font-variation);
    font-optical-sizing: auto;

    text-wrap: pretty;
    hyphens: none;
    widows: 2;
    orphans: 2;
}

/* Responsive adjustments - collapse gutters on small screens */
@media only screen and (max-width: #{$small}) {
    :root {
        --font-size: var(--font-mobile-size);
        --font-ratio: 1.2;
    }
}

h1,
h2,
h3,
h4,
h5,
h6 {
    font-family: var(--font-header), system-ui, sans-serif;
    color: var(--color-header);
    text-wrap: balance;
    font-variant-ligatures: normal;
    font-feature-settings: var(--font-header-feature);
    font-variation-settings: var(--font-header-variation);
    font-style: var(--font-header-style, normal);
    line-height: var(--font-header-line-height);
    letter-spacing: var(--font-header-letter-spacing);
    white-space: normal;
    overflow-wrap: normal;
    word-break: normal;
    hyphens: none;
    max-width: 100%;
    box-sizing: border-box;
}
/*
svg {
    fill: var(--color-header);
    stroke: var(--color-header);
}
*/

h1 {
    font-weight: var(--font-weight-h1);
    font-size: clamp(var(--scale-2xl), 10vw, var(--scale-3xl));
}

h2 {
    font-weight: var(--font-weight-h2);
    font-size: clamp(var(--scale-xl), 7vw, var(--scale-2xl));
}

h3 {
    font-weight: var(--font-weight-h3);
    font-size: var(--scale-xl);
}

h4 {
    font-weight: var(--font-weight-h4);
    font-size: var(--scale-l);
    line-height: var(--line-height);
}

h5 {
    font-weight: var(--font-weight-h5);
    font-size: var(--scale-l);
    line-height: var(--line-height);
}

h6 {
    font-weight: var(--font-weight-h6);
    font-size: var(--scale-l);
    line-height: var(--line-height);
}

// Utility text sizes
.small {
    font-size: var(--scale-s);
}
.smaller {
    font-size: var(--scale-xs);
}
.compact {
    line-height: var(--font-density-s);
}

.font-ui {
    font-family: var(--font-interface), system-ui, sans-serif;
    font-variation-settings: var(--font-interface-variation);
    font-feature-settings: var(--font-interface-feature);
}

// Monospaced text
pre,
code,
tt,
.code,
.mono,
.monospace,
.font-mono {
    font-family: var(--font-monospace), Inconsolata, Menlo, monospace;
    font-feature-settings: var(--font-monospace-feature);
    font-variation-settings: var(--font-monospace-variation);
    font-size: var(--scale-s);
}

// Strong/bold normalization
b,
strong,
.bold {
    font-weight: var(--bold-weight);
}
:is(h1, h2, h3, h4, h5, h6) :is(b, strong, .bold) {
    font-weight: inherit;
}

/* Links inherit color by default; article overrides already exist */
a,
a:visited {
    color: inherit;
}

/* Button styles for consistent appearance */
button {
    font-family: var(--font-interface), system-ui, sans-serif;
    font-size: var(--scale-s);
    font-weight: var(--font-weight);
    line-height: var(--font-density);

    padding: var(--space-xs) var(--space-s);
    border: none;
    border-radius: var(--border-radius);

    background: var(--color-accent);
    color: var(--color-background);

    cursor: pointer;
    transition: opacity 0.2s ease;

    &:hover {
        opacity: 0.9;
    }

    &:active {
        opacity: 0.8;
    }

    &:focus-visible {
        outline: 1px solid
            color-mix(in srgb, var(--color-accent) 50%, transparent);
    }
}

/* Form element styles for consistency */
input,
select,
textarea {
    font-family: var(--font-interface), system-ui, sans-serif;
    font-size: var(--scale-s);
    font-weight: var(--font-weight);
    line-height: var(--font-density);

    padding: var(--space-xs) var(--space-s);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius);

    background: var(--color-background-secondary);
    color: var(--color-foreground);

    &:focus {
        outline: 1px solid
            color-mix(in srgb, var(--color-accent) 50%, transparent);
        border-color: color-mix(in srgb, var(--color-accent) 50%, transparent);
        background-color: color-mix(
            in srgb,
            var(--color-accent) 2.5%,
            var(--color-background-secondary)
        );
    }

    &::placeholder {
        color: var(--color-muted);
        opacity: 0.7;
    }
}

textarea {
    resize: vertical;
    min-height: calc(var(--space-l) * 3);
}

/* =========================== */
/* RHYTHM ELEMENT TYPOGRAPHY   */
/* =========================== */

/* Typography properties for elements within rhythm containers */

/* List styling */
li {
    line-height: var(--font-density-s);
}

/* Blockquote typography */
blockquote {
    font-style: italic;
    font-size: var(--scale-s);
}

/* Code block typography */
pre,
code {
    font-family: var(--font-monospace, monospace);
    font-size: var(--scale-s);
    line-height: var(--font-density-s);
    overflow-x: auto;
}

/* Form typography */
legend {
    font-weight: var(--bold-weight, bold);
}

label {
    font-weight: var(--bold-weight, bold);
}

/* Figure caption typography */
figcaption {
    font-size: var(--scale-s);
    font-style: italic;
    text-align: center;
}

/* Table typography */
table {
    border-collapse: collapse;
    font-variant-numeric: tabular-nums;
}

th,
td {
    text-align: left;
}

th {
    font-weight: var(--bold-weight, bold);
}

caption {
    font-weight: var(--bold-weight, bold);
    text-align: left;
}

/* Callout typography */
.callout-title {
    font-weight: var(--bold-weight, bold);
}

/* ADD: Helper classes for extreme scales */
.display {
    font-size: clamp(var(--scale-3xl), 12vw, var(--scale-display));
    line-height: 0.85;
    font-weight: var(--font-header-weight);
    letter-spacing: var(--font-header-letter-spacing);
}

.poster {
    font-size: clamp(var(--scale-display), 15vw, var(--scale-poster));
    line-height: 0.8;
    font-weight: var(--font-header-weight);
    letter-spacing: -0.04em;
}

.label {
    font-size: var(--scale-micro);
    text-transform: uppercase;
    letter-spacing: 0.15em;
    font-weight: 700;
}

.micro {
    font-size: var(--scale-micro);
}
