---
// SiteConfig.astro - Example component demonstrating site.config.yml usage
import config from "virtual:standard/config";

const {
  title = "My Site",
  url = "https://example.com",
  description = "",
  author = {},
  nav = {},
  social = {},
  standard = {}
} = config;
---

<!-- Site Header with Config -->
<header class="site-header">
  <nav class="main-nav">
    <h1 class="site-title">
      <a href="/">{title}</a>
    </h1>

    {nav.header && (
      <ul class="nav-links">
        {nav.header.map((item) => (
          <li>
            <a href={item.url}>{item.title}</a>
          </li>
        ))}
      </ul>
    )}
  </nav>
</header>

<!-- Site Footer with Config -->
<footer class="site-footer">
  <div class="author-info">
    {author.name && (
      <p>
        Written by
        {author.url ? (
          <a href={author.url}>{author.name}</a>
        ) : (
          <span>{author.name}</span>
        )}
      </p>
    )}

    {author.email && (
      <p>
        Contact: <a href={`mailto:${author.email}`}>{author.email}</a>
      </p>
    )}
  </div>

  <!-- Social Links -->
  {social && Object.keys(social).length > 0 && (
    <div class="social-links">
      {social.twitter && (
        <a href={`https://twitter.com/${social.twitter.replace('@', '')}`}
           class="social-link twitter">
          Twitter
        </a>
      )}
      {social.instagram && (
        <a href={`https://instagram.com/${social.instagram.replace('@', '')}`}
           class="social-link instagram">
          Instagram
        </a>
      )}
    </div>
  )}
</footer>

<!-- Debug Component (Development Only) -->
{standard.verbose && (
  <details class="config-debug">
    <summary>Debug: Site Configuration</summary>
    <pre><code>{JSON.stringify(config, null, 2)}</code></pre>
  </details>
)}

<style>
  .site-header {
    padding: 1rem;
    border-bottom: 1px solid #e0e0e0;
  }

  .main-nav {
    display: flex;
    justify-content: space-between;
    align-items: center;
    max-width: 1200px;
    margin: 0 auto;
  }

  .site-title {
    margin: 0;
    font-size: 1.5rem;
  }

  .site-title a {
    text-decoration: none;
    color: inherit;
  }

  .nav-links {
    display: flex;
    list-style: none;
    gap: 2rem;
    margin: 0;
    padding: 0;
  }

  .nav-links a {
    text-decoration: none;
    color: #666;
    transition: color 0.2s;
  }

  .nav-links a:hover {
    color: #000;
  }

  .site-footer {
    padding: 2rem;
    border-top: 1px solid #e0e0e0;
    margin-top: 4rem;
  }

  .author-info {
    margin-bottom: 1rem;
  }

  .social-links {
    display: flex;
    gap: 1rem;
  }

  .social-link {
    padding: 0.5rem 1rem;
    background: #f0f0f0;
    border-radius: 4px;
    text-decoration: none;
    color: #666;
    transition: background 0.2s;
  }

  .social-link:hover {
    background: #e0e0e0;
  }

  .config-debug {
    position: fixed;
    bottom: 1rem;
    right: 1rem;
    background: white;
    border: 1px solid #ccc;
    border-radius: 4px;
    padding: 1rem;
    max-width: 400px;
    max-height: 300px;
    overflow: auto;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  }

  .config-debug pre {
    margin: 0;
    font-size: 0.8rem;
    white-space: pre-wrap;
  }
</style>
```

This component demonstrates several key features of using the loaded `site.config.yml`:

1. **Direct Import**: `import config from "virtual:standard/config"`
2. **Destructuring**: Clean access to specific config sections
3. **Conditional Rendering**: Only show elements when data exists
4. **Navigation**: Dynamic nav menu from config
5. **Author Information**: Flexible author display
6. **Social Links**: Dynamic social media links
7. **Debug Mode**: Development-only configuration viewer

You can use this component in your layouts or pages, and it will automatically reflect any changes you make to `site.config.yml` without requiring code changes.
