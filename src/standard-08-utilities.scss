/* Enhanced Rhythm Utilities: debugging, overrides, and advanced control - Using logical properties */

/* ===== LOGICAL SPACING UTILITIES ===== */

/* Block direction spacing utilities */
.no-margin-block-start {
    margin-block-start: 0 !important;
}
.no-margin-block-end {
    margin-block-end: 0 !important;
}
.no-margin-block {
    margin-block: 0 !important;
}

.no-padding-block-start {
    padding-block-start: 0 !important;
}
.no-padding-block-end {
    padding-block-end: 0 !important;
}
.no-padding-block {
    padding-block: 0 !important;
}

/* Inline direction spacing utilities */
.no-margin-inline-start {
    margin-inline-start: 0 !important;
}
.no-margin-inline-end {
    margin-inline-end: 0 !important;
}
.no-margin-inline {
    margin-inline: 0 !important;
}
.auto-margin-inline {
    margin-inline: auto !important;
}
.auto-margin-inline-start {
    margin-inline-start: auto !important;
}
.auto-margin-ineline-end {
    margin-inline-end: auto !important;
}

.no-padding-inline-start {
    padding-inline-start: 0 !important;
}
.no-padding-inline-end {
    padding-inline-end: 0 !important;
}
.no-padding-inline {
    padding-inline: 0 !important;
}

.box {
    background: var(--color-background-secondary);
    border-radius: var(--border-radius);
    border: var(--border);
    box-shadow: var(--shadow);
    padding: var(--space);
}
.box-inset {
    background: var(--color-background-secondary);
    border-radius: var(--border-radius);
    border: var(--border);
    box-shadow: inset var(--shadow);
    padding: var(--space);
}

/* ===== CENTERING UTILITIES ===== */
/* General-purpose centered containers with max-width constraints */

.centered {
    max-width: var(--line-width);
    margin-inline: auto;
}

.centered-narrow {
    max-width: var(--line-width-s);
    margin-inline: auto;
}

.centered-wide {
    max-width: var(--line-width-wide);
    margin-inline: auto;
}

.centered-xl {
    max-width: var(--line-width-xl);
    margin-inline: auto;
}

.centered-xs {
    max-width: var(--line-width-xs);
    margin-inline: auto;
}

/* Responsive centered container */
.centered-responsive {
    max-width: var(--content);
    margin-inline: auto;
    padding-inline: var(--gap);
}

/* ===== RHYTHM SCALING UTILITIES ===== */

/* Spacing exceptions using logical properties */
.no-block-start {
    margin-block-start: 0 !important;
}
.no-block-end {
    margin-block-end: 0 !important;
}
.stick-next {
    margin-block-end: var(--space-gap) !important;
}

/* Rhythm scaling utilities using logical properties */
.rhythm-micro {
    margin-block-end: calc(
        var(--space-xxxs) * var(--rhythm-multiplier, 1)
    ) !important;
}

.rhythm-tiny {
    margin-block-end: calc(
        var(--space-xxs) * var(--rhythm-multiplier, 1)
    ) !important;
}

.rhythm-small {
    margin-block-end: calc(
        var(--space-xs) * var(--rhythm-multiplier, 1)
    ) !important;
}

.rhythm-base {
    margin-block-end: calc(
        var(--space) * var(--rhythm-multiplier, 1)
    ) !important;
}

.rhythm-large {
    margin-block-end: calc(
        var(--space-l) * var(--rhythm-multiplier, 1)
    ) !important;
}

.rhythm-xl {
    margin-block-end: calc(
        var(--space-xl) * var(--rhythm-multiplier, 1)
    ) !important;
}

.rhythm-xxl {
    margin-block-end: calc(
        var(--space-xxl) * var(--rhythm-multiplier, 1)
    ) !important;
}

/* Rhythm reset - completely removes from rhythm system */
.rhythm-reset {
    margin: 0 !important;
}

/* Text utility */
.muted {
    color: var(--color-muted);
}

/* Line-width utilities for readability - using logical properties */
.line-width-xs {
    max-inline-size: var(--line-width-xs);
    margin-inline: auto;
}
.line-width-s {
    max-inline-size: var(--line-width-s);
    margin-inline: auto;
}
.line-width-normal {
    max-inline-size: var(--line-width);
    margin-inline: auto;
}
.line-width-wide {
    max-inline-size: var(--line-width-wide);
    margin-inline: auto;
}
.line-width-xl {
    max-inline-size: var(--line-width-xl);
    margin-inline: auto;
}
.line-width-full {
    max-inline-size: var(--line-width-full);
    margin-inline: auto;
}

/* ===== RHYTHM CONTENT UTILITIES ===== */

/* Force elements to participate in rhythm system */
.rhythm-include {
    margin-block-end: calc(
        var(--space-block) * var(--rhythm-multiplier, 1)
    ) !important;
}

/* Exclude elements from rhythm system */
.rhythm-exclude {
    margin: 0 !important;

    &.rhythm {
        --marge-active: 0;
        background-image: none;

        > * {
            margin-block-end: 0 !important;
        }
    }
}

/* Special rhythm behaviors */
.rhythm-tight-group > * {
    margin-block-end: calc(
        var(--space-xs) * var(--rhythm-multiplier, 1)
    ) !important;
}

.rhythm-loose-group > * {
    margin-block-end: calc(
        var(--space-l) * var(--rhythm-multiplier, 1)
    ) !important;
}

/* Form-specific rhythm helpers using logical properties */
.rhythm-form-row {
    display: flex;
    gap: calc(var(--space-s) * var(--rhythm-multiplier, 1));
    align-items: center;
    margin-block-end: calc(
        var(--space) * var(--rhythm-multiplier, 1)
    ) !important;
}

.rhythm-form-group {
    margin-block-end: calc(
        var(--space) * var(--rhythm-multiplier, 1)
    ) !important;

    label {
        margin-block-end: calc(
            var(--space-xs) * var(--rhythm-multiplier, 1)
        ) !important;
    }

    input,
    textarea,
    select {
        margin-block-end: calc(
            var(--space-xs) * var(--rhythm-multiplier, 1)
        ) !important;
    }
}

/* Rhythm mode switching */
/* Alternative rhythm modes removed - margin mode is the only mode */

/* Spacing override utilities */
.rhythm-tight {
    gap: calc(var(--space-s) * var(--rhythm-multiplier)) !important;
}

.rhythm-loose {
    gap: calc(var(--space-l) * var(--rhythm-multiplier)) !important;
}

.rhythm-none {
    gap: 0 !important;
}

/* Individual element overrides */
.no-rhythm {
    margin: 0 !important;
}

.rhythm-after-tight {
    /* Add small spacing after this element */
}

.rhythm-after-loose {
    /* Add large spacing after this element */
}

/* =========================== */
/* DEBUG AND DEVELOPMENT      */
/* =========================== */

/* Debug utilities moved to rhythm and color files for proper separation of concerns */

/* =========================== */
/* RESPONSIVE TYPOGRAPHY      */
/* =========================== */

.heading-responsive {
    font-size: clamp(var(--scale-xl), 4vw, var(--scale-xxl)) !important;
}

.heading-compact {
    font-size: clamp(var(--scale-l), 3vw, var(--scale-xl)) !important;
    line-height: 1.1 !important;
}

.heading-contain {
    container-type: inline-size;
    max-inline-size: 100%;
    overflow: hidden;
}

.heading-contain h1 {
    font-size: clamp(var(--scale-l), 5cqi, var(--scale-xxl));
}

.heading-contain h2 {
    font-size: clamp(var(--scale), 4cqi, var(--scale-xl));
}

.heading-contain h3 {
    font-size: clamp(var(--scale-s), 3cqi, var(--scale-l));
}

/* =========================== */
/* ACCESSIBILITY               */
/* =========================== */

/* Ensure rhythm doesn't interfere with screen readers */
.rhythm:focus-within {
    /* Maintain focus visibility */
}

/* Respect user motion preferences */
@media (prefers-reduced-motion: reduce) {
    .rhythm {
        transition: none;
    }
}

/* =========================== */
/* LEGACY SUPPORT             */
/* =========================== */

/* Fallback for browsers without CSS Grid support */
@supports not (display: grid) {
    .rhythm {
        display: block;

        > * {
            margin-block-end: calc(
                var(--space-block) * var(--rhythm-multiplier)
            );
        }

        > :last-child {
            margin-block-end: 0;
        }
    }
}

/* Fallback for logical properties */
@supports not (margin-block-end: 1rem) {
    .rhythm > * {
        margin-bottom: calc(var(--space-block) * var(--rhythm-multiplier));
    }

    .rhythm > :last-child {
        margin-bottom: 0;
    }

    .line-width-xs {
        max-width: var(--line-width-xs);
        margin-left: auto;
        margin-right: auto;
    }

    .line-width-s {
        max-width: var(--line-width-s);
        margin-left: auto;
        margin-right: auto;
    }

    .line-width-normal {
        max-width: var(--line-width);
        margin-left: auto;
        margin-right: auto;
    }

    .line-width-wide {
        max-width: var(--line-width-wide);
        margin-left: auto;
        margin-right: auto;
    }

    .line-width-xl {
        max-width: var(--line-width-xl);
        margin-left: auto;
        margin-right: auto;
    }

    .line-width-full {
        max-width: var(--line-width-full);
        margin-left: auto;
        margin-right: auto;
    }
}
