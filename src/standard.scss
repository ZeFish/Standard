/*!
 * Standard Framework - Fine-Art Typography Management
 *
 * A comprehensive framework implementing:
 * - Classical typography rules that CSS cannot handle
 * - Progressive enhancement with zero-configuration setup
 * - Multi-locale support with automatic detection
 * - Dynamic content observation
 * - Performance-optimized batch processing
 * - Image zoom with keyboard navigation
 *
 * Based on research from:
 * - The Elements of Typographic Style (Robert Bringhurst)
 * - Ellen Lupton's typography works
 * - Classical European typography conventions
 * - Swiss typography principles
 * - Modern web accessibility standards
 *
 * Philosophy: Respect classic typography rules, but readability always wins.
 *
 * @version 2.2.0
 * @license MIT
 */

@use "sanitize.css/sanitize.css";

/* Standard - Fine-Art Typography Framework */
/* A framework implementing classical design principles, mathematical precision with the golden ratio, */
/* and micro-typography rules inspired by the masters of print design. */

@use "standard-00-variables" as *;
@use "standard-01-token";
@use "standard-02-color";
@use "standard-03-typography";
@use "standard-04-rhythm";
@use "standard-05-grid";
@use "standard-06-reading";
@use "standard-07-utilities";
@use "standard-08-img";
@use "standard-09-md";
@use "standard-99-debug";

/* Add to standard.css */

:root {
    --baseline-trim-support: 0; /* Will be 1 when supported */
}

/* Detect support */
@supports (text-box-trim: both) {
    :root {
        --baseline-trim-support: 1;
    }
}

@supports (leading-trim: both) {
    :root {
        --baseline-trim-support: 1;
    }
}

/* Apply when supported */
.rhythm {
    /* Current fallback behavior */
}

@supports (text-box-trim: both) or (leading-trim: both) {
    .rhythm > * {
        text-box-trim: both;
        text-box-edge: cap alphabetic;

        /* Safari fallback */
        leading-trim: both;
        text-edge: cap alphabetic;

        /* Adjust margins since leading is now trimmed */
        margin-block-end: var(--space);
    }

    .rhythm > :is(h1, h2, h3, h4, h5, h6) {
        text-box-trim: both;
        text-box-edge: cap alphabetic;
        leading-trim: both;
        text-edge: cap alphabetic;
    }
}
