@use "sanitize.css/sanitize.css";

/* Standard - Fine-Art Typography Framework */
/* A framework implementing classical design principles, mathematical precision with the golden ratio, */
/* and micro-typography rules inspired by the masters of print design. */

@use "standard-00-variables" as *;
@use "standard-01-token";
@use "standard-02-color";
@use "standard-03-typography";
@use "standard-04-rhythm";
@use "standard-05-grid";
@use "standard-06-reading";
@use "standard-07-utilities";
@use "standard-08-img";
@use "standard-09-md";
@use "standard-99-debug";

/* Add to standard.css */

:root {
    --baseline-trim-support: 0; /* Will be 1 when supported */
}

/* Detect support */
@supports (text-box-trim: both) {
    :root {
        --baseline-trim-support: 1;
    }
}

@supports (leading-trim: both) {
    :root {
        --baseline-trim-support: 1;
    }
}

/* Apply when supported */
.rhythm {
    /* Current fallback behavior */
}

@supports (text-box-trim: both) or (leading-trim: both) {
    .rhythm > * {
        text-box-trim: both;
        text-box-edge: cap alphabetic;

        /* Safari fallback */
        leading-trim: both;
        text-edge: cap alphabetic;

        /* Adjust margins since leading is now trimmed */
        margin-block-end: var(--space);
    }

    .rhythm > :is(h1, h2, h3, h4, h5, h6) {
        text-box-trim: both;
        text-box-edge: cap alphabetic;
        leading-trim: both;
        text-edge: cap alphabetic;
    }
}
